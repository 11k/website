webpackJsonp([2],{117:function(t,e){function n(){return(new Date).getTime()}t.exports=Date.now||n},134:function(t,e){t.exports=["NORTHWESTERNMUTUAL","TRAVELERSINSURANCE","AMERICANEXPRESS","KERRYPROPERTIES","SANDVIKCOROMANT","AFAMILYCOMPANY","AMERICANFAMILY","BANANAREPUBLIC","CANCERRESEARCH","COOKINGCHANNEL","KERRYLOGISTICS","WEATHERCHANNEL","INTERNATIONAL","LIFEINSURANCE","SPREADBETTING","TRAVELCHANNEL","WOLTERSKLUWER","CONSTRUCTION","LPLFINANCIAL","PAMPEREDCHEF","SCHOLARSHIPS","VERSICHERUNG","ACCOUNTANTS","BARCLAYCARD","BLACKFRIDAY","BLOCKBUSTER","BRIDGESTONE","CALVINKLEIN","CONTRACTORS","CREDITUNION","ENGINEERING","ENTERPRISES","FOODNETWORK","INVESTMENTS","KERRYHOTELS","LAMBORGHINI","MOTORCYCLES","OLAYANGROUP","PHOTOGRAPHY","PLAYSTATION","PRODUCTIONS","PROGRESSIVE","REDUMBRELLA","RIGHTATHOME","WILLIAMHILL","ACCOUNTANT","APARTMENTS","ASSOCIATES","BASKETBALL","BNPPARIBAS","BOEHRINGER","CAPITALONE","CONSULTING","CREDITCARD","CUISINELLA","EUROVISION","EXTRASPACE","FOUNDATION","HEALTHCARE","IMMOBILIEN","INDUSTRIES","MANAGEMENT","MITSUBISHI","NATIONWIDE","NEWHOLLAND","NEXTDIRECT","ONYOURSIDE","PROPERTIES","PROTECTION","PRUDENTIAL","REALESTATE","REPUBLICAN","RESTAURANT","SCHAEFFLER","SWIFTCOVER","TATAMOTORS","TECHNOLOGY","TELEFONICA","UNIVERSITY","VISTAPRINT","VLAANDEREN","VOLKSWAGEN","ACCENTURE","ALFAROMEO","ALLFINANZ","AMSTERDAM","ANALYTICS","AQUARELLE","BARCELONA","BLOOMBERG","CHRISTMAS","COMMUNITY","DIRECTORY","EDUCATION","EQUIPMENT","FAIRWINDS","FINANCIAL","FIRESTONE","FRESENIUS","FRONTDOOR","FUJIXEROX","FURNITURE","GOLDPOINT","GOODHANDS","HISAMITSU","HOMEDEPOT","HOMEGOODS","HOMESENSE","HONEYWELL","INSTITUTE","INSURANCE","KUOKGROUP","LADBROKES","LANCASTER","LANDROVER","LIFESTYLE","MARKETING","MARSHALLS","MCDONALDS","MELBOURNE","MICROSOFT","MONTBLANC","PANASONIC","PASSAGENS","PRAMERICA","RICHARDLI","SCJOHNSON","SHANGRILA","SOLUTIONS","STATEBANK","STATEFARM","STOCKHOLM","TRAVELERS","VACATIONS","YODOBASHI","ABUDHABI","AIRFORCE","ALLSTATE","ATTORNEY","BARCLAYS","BAREFOOT","BARGAINS","BASEBALL","BOUTIQUE","BRADESCO","BROADWAY","BRUSSELS","BUDAPEST","BUILDERS","BUSINESS","CAPETOWN","CATERING","CATHOLIC","CHRYSLER","CIPRIANI","CITYEATS","CLEANING","CLINIQUE","CLOTHING","COMMBANK","COMPUTER","DELIVERY","DELOITTE","DEMOCRAT","DIAMONDS","DISCOUNT","DISCOVER","DOWNLOAD","ENGINEER","ERICSSON","ESURANCE","ETISALAT","EVERBANK","EXCHANGE","FEEDBACK","FIDELITY","FIRMDALE","FOOTBALL","FRONTIER","GOODYEAR","GRAINGER","GRAPHICS","GUARDIAN","HDFCBANK","HELSINKI","HOLDINGS","HOSPITAL","INFINITI","IPIRANGA","ISTANBUL","JPMORGAN","LIGHTING","LUNDBECK","MARRIOTT","MASERATI","MCKINSEY","MEMORIAL","MORTGAGE","MOVISTAR","OBSERVER","PARTNERS","PHARMACY","PICTURES","PLUMBING","PROPERTY","REDSTONE","RELIANCE","SAARLAND","SAMSCLUB","SECURITY","SERVICES","SHOPPING","SHOWTIME","SOFTBANK","SOFTWARE","STCGROUP","SUPPLIES","SYMANTEC","TELECITY","TRAINING","UCONNECT","VANGUARD","VENTURES","VERISIGN","WOODSIDE","YOKOHAMA","ABOGADO","ACADEMY","AGAKHAN","ALIBABA","ANDROID","ATHLETA","AUCTION","AUDIBLE","AUSPOST","AVIANCA","BANAMEX","BAUHAUS","BENTLEY","BESTBUY","BOOKING","BROTHER","BUGATTI","CAPITAL","CARAVAN","CAREERS","CARTIER","CHANNEL","CHINTAI","CITADEL","CLUBMED","COLLEGE","COLOGNE","COMCAST","COMPANY","COMPARE","CONTACT","COOKING","CORSICA","COUNTRY","COUPONS","COURSES","CRICKET","CRUISES","DENTIST","DIGITAL","DOMAINS","EXPOSED","EXPRESS","FARMERS","FASHION","FERRARI","FERRERO","FINANCE","FISHING","FITNESS","FLIGHTS","FLORIST","FLOWERS","FORSALE","FROGANS","FUJITSU","GALLERY","GENTING","GODADDY","GUITARS","HAMBURG","HANGOUT","HITACHI","HOLIDAY","HOSTING","HOTELES","HOTMAIL","HYUNDAI","ISELECT","ISMAILI","JEWELRY","JUNIPER","KITCHEN","KOMATSU","LACAIXA","LANCOME","LANXESS","LASALLE","LATROBE","LECLERC","LIAISON","LIMITED","LINCOLN","MARKETS","METLIFE","MONSTER","NETBANK","NETFLIX","NETWORK","NEUSTAR","OKINAWA","OLDNAVY","ORGANIC","ORIGINS","PANERAI","PHILIPS","PIONEER","POLITIE","REALTOR","RECIPES","RENTALS","REVIEWS","REXROTH","SAMSUNG","SANDVIK","SCHMIDT","SCHWARZ","SCIENCE","SHIKSHA","SHRIRAM","SINGLES","SPIEGEL","STAPLES","STARHUB","STATOIL","STORAGE","SUPPORT","SURGERY","SYSTEMS","TEMASEK","THEATER","THEATRE","TICKETS","TIFFANY","TOSHIBA","TRADING","WALMART","WANGGOU","WATCHES","WEATHER","WEBSITE","WEDDING","WHOSWHO","WINDOWS","WINNERS","XFINITY","YAMAXUN","YOUTUBE","ZUERICH","ABARTH","ABBOTT","ABBVIE","ACTIVE","AFRICA","AGENCY","AIRBUS","AIRTEL","ALIPAY","ALSACE","ALSTOM","ANQUAN","ARAMCO","AUTHOR","BAYERN","BEAUTY","BERLIN","BHARTI","BLANCO","BOSTIK","BOSTON","BROKER","CAMERA","CAREER","CASEIH","CASINO","CENTER","CHANEL","CHROME","CHURCH","CIRCLE","CLAIMS","CLINIC","COFFEE","COMSEC","CONDOS","COUPON","CREDIT","CRUISE","DATING","DATSUN","DEALER","DEGREE","DENTAL","DESIGN","DIRECT","DOCTOR","DUNLOP","DUPONT","DURBAN","EMERCK","ENERGY","ESTATE","EVENTS","EXPERT","FAMILY","FLICKR","FUTBOL","GALLUP","GARDEN","GEORGE","GIVING","GLOBAL","GOOGLE","GRATIS","HEALTH","HERMES","HIPHOP","HOCKEY","HOTELS","HUGHES","IMAMAT","INSURE","INTUIT","JAGUAR","JOBURG","JUEGOS","KAUFEN","KINDER","KINDLE","KOSHER","LANCIA","LATINO","LAWYER","LEFRAK","LIVING","LOCKER","LONDON","LUXURY","MADRID","MAISON","MAKEUP","MARKET","MATTEL","MOBILE","MOBILY","MONASH","MORMON","MOSCOW","MUSEUM","MUTUAL","NAGOYA","NATURA","NISSAN","NISSAY","NORTON","NOWRUZ","OFFICE","OLAYAN","ONLINE","ORACLE","ORANGE","OTSUKA","PFIZER","PHOTOS","PHYSIO","PIAGET","PICTET","QUEBEC","RACING","REALTY","REISEN","REPAIR","REPORT","REVIEW","ROCHER","ROGERS","RYUKYU","SAFETY","SAKURA","SANOFI","SCHOOL","SCHULE","SECURE","SELECT","SHOUJI","SOCCER","SOCIAL","STREAM","STUDIO","SUPPLY","SUZUKI","SWATCH","SYDNEY","TAIPEI","TAOBAO","TARGET","TATTOO","TENNIS","TIENDA","TJMAXX","TKMAXX","TOYOTA","TRAVEL","UNICOM","VIAJES","VIKING","VILLAS","VIRGIN","VISION","VOTING","VOYAGE","VUELOS","WALTER","WARMAN","WEBCAM","XIHUAN","XPERIA","YACHTS","YANDEX","ZAPPOS","ACTOR","ADULT","AETNA","AMFAM","AMICA","APPLE","ARCHI","AUDIO","AUTOS","AZURE","BAIDU","BEATS","BIBLE","BINGO","BLACK","BOATS","BOOTS","BOSCH","BUILD","CANON","CARDS","CHASE","CHEAP","CHLOE","CISCO","CITIC","CLICK","CLOUD","COACH","CODES","CROWN","CYMRU","DABUR","DANCE","DEALS","DELTA","DODGE","DRIVE","DUBAI","EARTH","EDEKA","EMAIL","EPOST","EPSON","FAITH","FEDEX","FINAL","FOREX","FORUM","GALLO","GAMES","GIFTS","GIVES","GLADE","GLASS","GLOBO","GMAIL","GREEN","GRIPE","GROUP","GUCCI","GUIDE","HOMES","HONDA","HORSE","HOUSE","HYATT","IKANO","INTEL","IRISH","IVECO","JETZT","KOELN","KYOTO","LAMER","LEASE","LEGAL","LEXUS","LILLY","LINDE","LIPSY","LIXIL","LOANS","LOCUS","LOTTE","LOTTO","LUPIN","MACYS","MANGO","MEDIA","MIAMI","MONEY","MOPAR","MOVIE","NADEX","NEXUS","NIKON","NINJA","NOKIA","NOWTV","OMEGA","OSAKA","PARIS","PARTS","PARTY","PHONE","PHOTO","PIZZA","PLACE","POKER","PRAXI","PRESS","PRIME","PROMO","QUEST","RADIO","REHAB","REISE","RICOH","ROCKS","RODEO","RUGBY","SALON","SENER","SEVEN","SHARP","SHELL","SHOES","SKYPE","SLING","SMART","SMILE","SOLAR","SPACE","STADA","STORE","STUDY","STYLE","SUCKS","SWISS","TATAR","TIRES","TIROL","TMALL","TODAY","TOKYO","TOOLS","TORAY","TOTAL","TOURS","TRADE","TRUST","TUNES","TUSHU","UBANK","VEGAS","VIDEO","VISTA","VODKA","VOLVO","WALES","WATCH","WEBER","WEIBO","WORKS","WORLD","XEROX","YAHOO","ZIPPO","local","onion","AARP","ABLE","ADAC","AERO","AIGO","AKDN","ALLY","AMEX","ARAB","ARMY","ARPA","ARTE","ASDA","ASIA","AUDI","AUTO","BABY","BAND","BANK","BBVA","BEER","BEST","BIKE","BING","BLOG","BLUE","BOFA","BOND","BOOK","BUZZ","CAFE","CALL","CAMP","CARE","CARS","CASA","CASE","CASH","CBRE","CERN","CHAT","CITI","CITY","CLUB","COOL","COOP","CYOU","DATA","DATE","DCLK","DEAL","DELL","DESI","DIET","DISH","DOCS","DOHA","DUCK","DUNS","DVAG","ERNI","FAGE","FAIL","FANS","FARM","FAST","FIAT","FIDO","FILM","FIRE","FISH","FLIR","FOOD","FORD","FREE","FUND","GAME","GBIZ","GENT","GGEE","GIFT","GMBH","GOLD","GOLF","GOOG","GUGE","GURU","HAIR","HAUS","HDFC","HELP","HERE","HGTV","HOST","HSBC","ICBC","IEEE","IMDB","IMMO","INFO","ITAU","JAVA","JEEP","JOBS","JPRS","KDDI","KIWI","KPMG","KRED","LAND","LEGO","LGBT","LIDL","LIFE","LIKE","LIMO","LINK","LIVE","LOAN","LOFT","LOVE","LTDA","LUXE","MAIF","MEET","MEME","MENU","MINI","MINT","MOBI","MODA","MOTO","NAME","NAVY","NEWS","NEXT","NICO","NIKE","OLLO","OPEN","PAGE","PARS","PCCW","PICS","PING","PINK","PLAY","PLUS","POHL","PORN","POST","PROD","PROF","QPON","RAID","READ","REIT","RENT","REST","RICH","RMIT","ROOM","RSVP","RUHR","SAFE","SALE","SAPO","SARL","SAVE","SAXO","SCOR","SCOT","SEAT","SEEK","SEXY","SHAW","SHIA","SHOP","SHOW","SILK","SINA","SITE","SKIN","SNCF","SOHU","SONG","SONY","SPOT","STAR","SURF","TALK","TAXI","TEAM","TECH","TEVA","TIAA","TIPS","TOWN","TOYS","TUBE","VANA","VISA","VIVA","VIVO","VOTE","VOTO","WANG","WEIR","WIEN","WIKI","WINE","WORK","XBOX","YOGA","ZARA","ZERO","ZONE","exit","zkey","AAA","ABB","ABC","ACO","ADS","AEG","AFL","AIG","ANZ","AOL","APP","ART","AWS","AXA","BAR","BBC","BBT","BCG","BCN","BET","BID","BIO","BIZ","BMS","BMW","BNL","BOM","BOO","BOT","BOX","BUY","BZH","CAB","CAL","CAM","CAR","CAT","CBA","CBN","CBS","CEB","CEO","CFA","CFD","COM","CRS","CSC","DAD","DAY","DDS","DEV","DHL","DIY","DNP","DOG","DOT","DTV","DVR","EAT","ECO","EDU","ESQ","EUS","FAN","FIT","FLY","FOO","FOX","FRL","FTR","FUN","FYI","GAL","GAP","GDN","GEA","GLE","GMO","GMX","GOO","GOP","GOT","GOV","HBO","HIV","HKT","HOT","HOW","HTC","IBM","ICE","ICU","IFM","ING","INK","INT","IST","ITV","IWC","JCB","JCP","JIO","JLC","JLL","JMP","JNJ","JOT","JOY","KFH","KIA","KIM","KPN","KRD","LAT","LAW","LDS","LOL","LPL","LTD","MAN","MBA","MCD","MED","MEN","MEO","MIL","MIT","MLB","MLS","MMA","MOE","MOI","MOM","MOV","MSD","MTN","MTR","NAB","NBA","NEC","NET","NEW","NFL","NGO","NHK","NOW","NRA","NRW","NTT","NYC","OBI","OFF","ONE","ONG","ONL","OOO","ORG","OTT","OVH","PAY","PET","PID","PIN","PNC","PRO","PRU","PUB","PWC","QVC","RED","REN","RIL","RIO","RIP","RUN","RWE","SAP","SAS","SBI","SBS","SCA","SCB","SES","SEW","SEX","SFR","SKI","SKY","SOY","SRL","SRT","STC","TAB","TAX","TCI","TDK","TEL","THD","TJX","TOP","TRV","TUI","TVS","UBS","UNO","UOL","UPS","VET","VIG","VIN","VIP","WED","WIN","WME","WOW","WTC","WTF","XIN","XXX","XYZ","YOU","YUN","ZIP","bit","gnu","i2p","AC","AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BM","BN","BO","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","ER","ES","ET","EU","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","ST","SU","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UK","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW"]},135:function(t,e,n){var i,s;/*! nanoScrollerJS - v0.8.7 - 2015
* http://jamesflorentino.github.com/nanoScrollerJS/
* Copyright (c) 2015 James Florentino; Licensed MIT */
!function(o){i=[n(4)],void 0!==(s=function(t){return o(t,window,document)}.apply(e,i))&&(t.exports=s)}(function(t,e,n){"use strict";var i,s,o,u,r,a,l,c,h,d,f,A,g,E,m,p,v,S,C,T,O,I,B,R,w,N,y,M;T={paneClass:"nano-pane",sliderClass:"nano-slider",contentClass:"nano-content",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null},m="scroll",l="mousedown",c="mouseenter",h="mousemove",f="mousewheel",d="mouseup",E="resize",r="drag",a="enter",v="up",g="panedown",o="DOMMouseScroll",u="down",S="wheel",p="touchmove",i="Microsoft Internet Explorer"===e.navigator.appName&&/msie 7./i.test(e.navigator.appVersion)&&e.ActiveXObject,s=null,R=e.requestAnimationFrame,C=e.cancelAnimationFrame,N=n.createElement("div").style,M=function(){var t,e,n,i;for(e=["t","webkitT","MozT","msT","OT"],t=n=0,i=e.length;n<i;t=++n)if(e[t],e[t]+"ransform"in N)return e[t].substr(0,e[t].length-1);return!1}(),y=function(t){return!1!==M&&(""===M?t:M+t.charAt(0).toUpperCase()+t.substr(1))},w=y("transform"),I=!1!==w,O=function(){var t,e,i;return t=n.createElement("div"),e=t.style,e.position="absolute",e.width="100px",e.height="100px",e.overflow=m,e.top="-9999px",n.body.appendChild(t),i=t.offsetWidth-t.clientWidth,n.body.removeChild(t),i},B=function(){var t,n,i;return n=e.navigator.userAgent,!!(t=/(?=.+Mac OS X)(?=.+Firefox)/.test(n))&&(i=/Firefox\/\d{2}\./.exec(n),i&&(i=i[0].replace(/\D+/g,"")),t&&+i>23)},A=function(){function A(i,o){this.el=i,this.options=o,s||(s=O()),this.$el=t(this.el),this.doc=t(this.options.documentContext||n),this.win=t(this.options.windowContext||e),this.body=this.doc.find("body"),this.$content=this.$el.children("."+this.options.contentClass),this.$content.attr("tabindex",this.options.tabIndex||0),this.content=this.$content[0],this.previousPosition=0,this.options.iOSNativeScrolling&&null!=this.el.style.WebkitOverflowScrolling?this.nativeScrolling():this.generate(),this.createEvents(),this.addEvents(),this.reset()}return A.prototype.preventScrolling=function(t,e){if(this.isActive)if(t.type===o)(e===u&&t.originalEvent.detail>0||e===v&&t.originalEvent.detail<0)&&t.preventDefault();else if(t.type===f){if(!t.originalEvent||!t.originalEvent.wheelDelta)return;(e===u&&t.originalEvent.wheelDelta<0||e===v&&t.originalEvent.wheelDelta>0)&&t.preventDefault()}},A.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"}),this.iOSNativeScrolling=!0,this.isActive=!0},A.prototype.updateScrollValues=function(){var t,e;t=this.content,this.maxScrollTop=t.scrollHeight-t.clientHeight,this.prevScrollTop=this.contentScrollTop||0,this.contentScrollTop=t.scrollTop,e=this.contentScrollTop>this.previousPosition?"down":this.contentScrollTop<this.previousPosition?"up":"same",this.previousPosition=this.contentScrollTop,"same"!==e&&this.$el.trigger("update",{position:this.contentScrollTop,maximum:this.maxScrollTop,direction:e}),this.iOSNativeScrolling||(this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=0===this.maxScrollTop?0:this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},A.prototype.setOnScrollStyles=function(){var t;I?(t={},t[w]="translate(0, "+this.sliderTop+"px)"):t={top:this.sliderTop},R?(C&&this.scrollRAF&&C(this.scrollRAF),this.scrollRAF=R(function(e){return function(){return e.scrollRAF=null,e.slider.css(t)}}(this))):this.slider.css(t)},A.prototype.createEvents=function(){this.events={down:function(t){return function(e){return t.isBeingDragged=!0,t.offsetY=e.pageY-t.slider.offset().top,t.slider.is(e.target)||(t.offsetY=0),t.pane.addClass("active"),t.doc.bind(h,t.events[r]).bind(d,t.events[v]),t.body.bind(c,t.events[a]),!1}}(this),drag:function(t){return function(e){return t.sliderY=e.pageY-t.$el.offset().top-t.paneTop-(t.offsetY||.5*t.sliderHeight),t.scroll(),t.contentScrollTop>=t.maxScrollTop&&t.prevScrollTop!==t.maxScrollTop?t.$el.trigger("scrollend"):0===t.contentScrollTop&&0!==t.prevScrollTop&&t.$el.trigger("scrolltop"),!1}}(this),up:function(t){return function(e){return t.isBeingDragged=!1,t.pane.removeClass("active"),t.doc.unbind(h,t.events[r]).unbind(d,t.events[v]),t.body.unbind(c,t.events[a]),!1}}(this),resize:function(t){return function(e){t.reset()}}(this),panedown:function(t){return function(e){return t.sliderY=(e.offsetY||e.originalEvent.layerY)-.5*t.sliderHeight,t.scroll(),t.events.down(e),!1}}(this),scroll:function(t){return function(e){t.updateScrollValues(),t.isBeingDragged||(t.iOSNativeScrolling||(t.sliderY=t.sliderTop,t.setOnScrollStyles()),null!=e&&(t.contentScrollTop>=t.maxScrollTop?(t.options.preventPageScrolling&&t.preventScrolling(e,u),t.prevScrollTop!==t.maxScrollTop&&t.$el.trigger("scrollend")):0===t.contentScrollTop&&(t.options.preventPageScrolling&&t.preventScrolling(e,v),0!==t.prevScrollTop&&t.$el.trigger("scrolltop"))))}}(this),wheel:function(t){return function(e){var n;if(null!=e)return n=e.delta||e.wheelDelta||e.originalEvent&&e.originalEvent.wheelDelta||-e.detail||e.originalEvent&&-e.originalEvent.detail,n&&(t.sliderY+=-n/3),t.scroll(),!1}}(this),enter:function(t){return function(e){var n;if(t.isBeingDragged)return 1!==(e.buttons||e.which)?(n=t.events)[v].apply(n,arguments):void 0}}(this)}},A.prototype.addEvents=function(){var t;this.removeEvents(),t=this.events,this.options.disableResize||this.win.bind(E,t[E]),this.iOSNativeScrolling||(this.slider.bind(l,t[u]),this.pane.bind(l,t[g]).bind(f+" "+o,t[S])),this.$content.bind(m+" "+f+" "+o+" "+p,t[m])},A.prototype.removeEvents=function(){var t;t=this.events,this.win.unbind(E,t[E]),this.iOSNativeScrolling||(this.slider.unbind(),this.pane.unbind()),this.$content.unbind(m+" "+f+" "+o+" "+p,t[m])},A.prototype.generate=function(){var t,n,i,o,u,r;return i=this.options,u=i.paneClass,r=i.sliderClass,i.contentClass,(o=this.$el.children("."+u)).length||o.children("."+r).length||this.$el.append('<div class="'+u+'"><div class="'+r+'" /></div>'),this.pane=this.$el.children("."+u),this.slider=this.pane.find("."+r),0===s&&B()?(n=e.getComputedStyle(this.content,null).getPropertyValue("padding-right").replace(/[^0-9.]+/g,""),t={right:-14,paddingRight:+n+14}):s&&(t={right:-s},this.$el.addClass("has-scrollbar")),null!=t&&this.$content.css(t),this},A.prototype.restore=function(){this.stopped=!1,this.iOSNativeScrolling||this.pane.show(),this.addEvents()},A.prototype.reset=function(){var t,e,n,o,u,r,a,l,c,h,d,f;return this.iOSNativeScrolling?void(this.contentHeight=this.content.scrollHeight):(this.$el.find("."+this.options.paneClass).length||this.generate().stop(),this.stopped&&this.restore(),t=this.content,o=t.style,u=o.overflowY,i&&this.$content.css({height:this.$content.height()}),e=t.scrollHeight+s,h=parseInt(this.$el.css("max-height"),10),h>0&&(this.$el.height(""),this.$el.height(t.scrollHeight>h?h:t.scrollHeight)),a=this.pane.outerHeight(!1),c=parseInt(this.pane.css("top"),10),r=parseInt(this.pane.css("bottom"),10),l=a+c+r,f=Math.round(l/e*a),f<this.options.sliderMinHeight?f=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&f>this.options.sliderMaxHeight&&(f=this.options.sliderMaxHeight),u===m&&o.overflowX!==m&&(f+=s),this.maxSliderTop=l-f,this.contentHeight=e,this.paneHeight=a,this.paneOuterHeight=l,this.sliderHeight=f,this.paneTop=c,this.slider.height(f),this.events.scroll(),this.pane.show(),this.isActive=!0,t.scrollHeight===t.clientHeight||this.pane.outerHeight(!0)>=t.scrollHeight&&u!==m?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===t.scrollHeight&&u===m?this.slider.hide():this.slider.show(),this.pane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),n=this.$content.css("position"),"static"!==n&&"relative"!==n||(d=parseInt(this.$content.css("right"),10))&&this.$content.css({right:"",marginRight:d}),this)},A.prototype.scroll=function(){if(this.isActive)return this.sliderY=Math.max(0,this.sliderY),this.sliderY=Math.min(this.maxSliderTop,this.sliderY),this.$content.scrollTop(this.maxScrollTop*this.sliderY/this.maxSliderTop),this.iOSNativeScrolling||(this.updateScrollValues(),this.setOnScrollStyles()),this},A.prototype.scrollBottom=function(t){if(this.isActive)return this.$content.scrollTop(this.contentHeight-this.$content.height()-t).trigger(f),this.stop().restore(),this},A.prototype.scrollTop=function(t){if(this.isActive)return this.$content.scrollTop(+t).trigger(f),this.stop().restore(),this},A.prototype.scrollTo=function(t){if(this.isActive)return this.scrollTop(this.$el.find(t).get(0).offsetTop),this},A.prototype.stop=function(){return C&&this.scrollRAF&&(C(this.scrollRAF),this.scrollRAF=null),this.stopped=!0,this.removeEvents(),this.iOSNativeScrolling||this.pane.hide(),this},A.prototype.destroy=function(){return this.stopped||this.stop(),!this.iOSNativeScrolling&&this.pane.length&&this.pane.remove(),i&&this.$content.height(""),this.$content.removeAttr("tabindex"),this.$el.hasClass("has-scrollbar")&&(this.$el.removeClass("has-scrollbar"),this.$content.css({right:""})),this},A.prototype.flash=function(){if(!this.iOSNativeScrolling&&this.isActive)return this.reset(),this.pane.addClass("flashed"),setTimeout(function(t){return function(){t.pane.removeClass("flashed")}}(this),this.options.flashDelay),this},A}(),t.fn.nanoScroller=function(e){return this.each(function(){var n,i;if((i=this.nanoscroller)||(n=t.extend({},T,e),this.nanoscroller=i=new A(this,n)),e&&"object"==typeof e){if(t.extend(i.options,e),null!=e.scrollBottom)return i.scrollBottom(e.scrollBottom);if(null!=e.scrollTop)return i.scrollTop(e.scrollTop);if(e.scrollTo)return i.scrollTo(e.scrollTo);if("bottom"===e.scroll)return i.scrollBottom(0);if("top"===e.scroll)return i.scrollTop(0);if(e.scroll&&e.scroll instanceof t)return i.scrollTo(e.scroll);if(e.stop)return i.stop();if(e.destroy)return i.destroy();if(e.flash)return i.flash()}return i.reset()})},t.fn.nanoScroller.Constructor=A})},27:function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e,n,s){i(this,t),this.id=e,this.name=n,this.label=s}return s(t,[{key:"toString",value:function(){return this.id}},{key:"equals",value:function(t){return 0===this.id.localeCompare(t)}}]),t}(),u={PROTECTED:new o("protected","PROTECTED","Protected"),SUBSCRIBER:new o("subscriber","SUBSCRIBER","Subscriber"),SUBSCRIBERT0:new o("flair9","SUBSCRIBERT0","Twitch subscriber"),SUBSCRIBERT1:new o("flair13","SUBSCRIBERT1","Subscriber (T1)"),SUBSCRIBERT2:new o("flair1","SUBSCRIBERT2","Subscriber (T2)"),SUBSCRIBERT3:new o("flair3","SUBSCRIBERT3","Subscriber (T3)"),SUBSCRIBERT4:new o("flair8","SUBSCRIBERT4","Subscriber (T4)"),VIP:new o("vip","VIP","VIP"),MODERATOR:new o("moderator","MODERATOR","Moderator"),ADMIN:new o("admin","ADMIN","Admin"),BROADCASTER:new o("flair12","BROADCASTER","Broadcaster"),BOT:new o("bot","BOT","Bot"),BOT2:new o("flair11","BOT2","Bot2"),NOTABLE:new o("flair2","NOTABLE","Notable"),TRUSTED:new o("flair4","TRUSTED","Trusted"),CONTRIBUTOR:new o("flair5","CONTRIBUTOR","Contributor"),COMPCHALLENGE:new o("flair6","COMPCHALLENGE","Composition winner"),EVE:new o("flair7","EVE","EVE"),SC2:new o("flair10","SC2","Starcraft 2")},r=new Map([["protected",u.PROTECTED],["subscriber",u.SUBSCRIBER],["flair9",u.SUBSCRIBERT0],["flair1",u.SUBSCRIBERT2],["flair13",u.SUBSCRIBERT1],["flair3",u.SUBSCRIBERT3],["flair8",u.SUBSCRIBERT4],["vip",u.VIP],["moderator",u.MODERATOR],["admin",u.ADMIN],["flair12",u.BROADCASTER],["bot",u.BOT],["flair11",u.BOT2],["flair2",u.NOTABLE],["flair4",u.TRUSTED],["flair5",u.CONTRIBUTOR],["flair6",u.COMPCHALLENGE],["flair7",u.EVE],["flair10",u.SC2]]);u.valueOf=function(t){return r.get(t.toLowerCase())||null},e.default=u},313:function(t,e,n){"use strict";(function(t){n(26),n(25),n(73);var e=n(52).default,i=n(77),s="ws"+("https:"===window.location.protocol?"s":"")+"://"+window.location.host+"/ws";t.when(new Promise(function(e){return t.getJSON({url:"/api/chat/me",timeout:5e3}).done(e).fail(function(){return e(null)})}),new Promise(function(e){return t.getJSON({url:"/api/chat/history",timeout:5e3}).done(e).fail(function(){return e(null)})})).then(function(t,n){return(new e).withUserAndSettings(t).withEmotes(i).withFormatters().withGui().withHistory(n).withWhispers().connect(s)})}).call(e,n(4))},42:function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(){i(this,t),this.listeners=new Map}return s(t,[{key:"on",value:function(t,e){return this.listeners.has(t)||this.listeners.set(t,[]),this.listeners.get(t).push(e),this}},{key:"emit",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var s=this.listeners.get(t);return!(!s||!s.length)&&(s.forEach(function(t){return t.apply(void 0,n)}),!0)}}]),t}();e.default=o},43:function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=window.localStorage||{},r=window.JSON,a=function(){function t(){s(this,t)}return o(t,null,[{key:"write",value:function(t,e){var n="";try{n=r.stringify(e instanceof Map||e instanceof Set?[].concat(i(e)):e)}catch(t){console.error(t)}u.setItem(t,n)}},{key:"read",value:function(t){var e=null;try{e=r.parse(u.getItem(t))}catch(t){console.error(t)}return e}},{key:"remove",value:function(t){try{u.removeItem(t)}catch(t){console.error(t)}}}]),t}();e.default=a},52:function(t,e,n){"use strict";(function(t){function i(t){return t&&t.__esModule?t:{default:t}}function s(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(70),l=i(a),c=n(0),h=i(c),d=n(42),f=i(d),A=n(94),g=i(A),E=n(65),m=i(E),p=n(63),v=n(92),S=n(90),C=n(88),T=i(C),O=n(91),I=i(O),B=n(89),R=i(B),w=n(43),N=i(w),y=n(27),M=i(y),F=n(93),k=i(F),D=n(66),L=i(D),b=/(?:(?:^|\s)@?)([a-zA-Z0-9_]{3,20})(?=$|\s|[\.\?!,])/g,U=/^[a-zA-Z0-9_]{3,20}$/,P=["green","yellow","orange","red","purple","blue","sky","lime","pink","black"],H=new Map([["unknown","Unknown error, this usually indicates an internal problem :("],["nopermission","You do not have the required permissions to use that"],["protocolerror","Invalid or badly formatted"],["needlogin","You have to be logged in to use that"],["invalidmsg","The message was invalid"],["throttled","Throttled! You were trying to send messages too fast"],["duplicate","The message is identical to the last one you sent"],["muted","You are muted (subscribing removes mutes). Check your profile for more information."],["submode","The channel is currently in subscriber only mode"],["needbanreason","Providing a reason for the ban is mandatory"],["banned","You have been banned (subscribing removes non-permanent bans). Check your profile for more information."],["privmsgbanned","Cannot send private messages while banned"],["requiresocket","This chat requires WebSockets"],["toomanyconnections","Only 5 concurrent connections allowed"],["socketerror","Error contacting server"],["privmsgaccounttooyoung","Your account is too recent to send private messages"],["notfound","The user was not found"],["notconnected","You have to be connected to use that"]]),G=new Map([["slashhelp","Type in /help for more a list of commands, do advanced things like modify your scroll-back size"],["tabcompletion","Use the tab key to auto-complete usernames and emotes (for user only completion prepend a @ or press shift)"],["hoveremotes","Hovering your mouse over an emote will show you the emote code"],["highlight","Chat messages containing your username will be highlighted"],["notify","Use /msg <username> to send a private message to someone"],["ignoreuser","Use /ignore <username> to hide messages from pesky chatters"],["mutespermanent","Mutes are never persistent, don't worry it will pass!"],["stalkmentionshint","Use the /stalk <nick> or /mentions <nick> to keep up to date"],["tagshint","Use the /tag <nick> <color> to highlight users you like. There are preset colors to choose from "+P.join(", ")],["bigscreen","Bigscreen! Did you know you can have the chat on the left or right side of the stream by clicking the swap icon in the top left?"]]),x=new Map([["schemaversion",1],["showtime",!1],["hideflairicons",!1],["profilesettings",!1],["timestampformat","HH:mm"],["maxlines",250],["notificationwhisper",!1],["notificationhighlight",!1],["highlight",!0],["customhighlight",[]],["highlightnicks",[]],["taggednicks",[]],["showremoved",!1],["showhispersinchat",!1],["ignorenicks",[]],["focusmentioned",!1],["notificationtimeout",!0],["ignorementions",!1]]),Y=new Map([["help",""],["emotes",""],["me",""],["msg",""],["ignore","without arguments to list the nicks ignored"],["unignore",""],["highlight","highlights target nicks messages for easier visibility"],["unhighlight",""],["maxlines",""],["mute",""],["unmute",""],["subonly",""],["ban",""],["unban","also unbans ip bans"],["timestampformat",""],["stalk",""],["mentions",""],["tag",""],["untag",""],["close","exit a conversation"]]),W={id:0,userid:0,username:"",targetuserid:"",targetusername:"",ipaddress:"",reason:"",starttimestamp:"",endtimestamp:""},K=(0,l.default)(function(t){return t.input.focus()},10),V=function(t){var e=void 0;return e=t.indexOf("://")>-1?t.split("/")[2]:t.split("/")[0],e=e.split(":")[0],e=e.split("?")[0]},_=function(t){window.getSelection().isCollapsed&&!t.input.is(":focus")&&K(t)},j=function(){function e(){var t=this;o(this,e),this.uri="",this.ui=null,this.css=null,this.output=null,this.input=null,this.loginscrn=null,this.loadingscrn=null,this.popoutbtn=null,this.reconnect=!0,this.connected=!1,this.lastmessage=null,this.showmotd=!0,this.authenticated=!1,this.backlogloading=!1,this.unresolved=[],this.formatters=[],this.emoticons=new Set,this.twitchemotes=new Set,this.control=new f.default(this),this.source=new g.default,this.user=new m.default,this.users=new Map,this.whispers=new Map,this.windows=new Map,this.settings=new Map([].concat(s(x))),this.autocomplete=new T.default,this.menus=new Map,this.taggednicks=new Map,this.ignoring=new Set,this.regexhighlightcustom=null,this.regexhighlightnicks=null,this.regexhighlightself=null,this.source.on("PING",function(e){return t.source.send("PONG",e)}),this.source.on("OPEN",function(e){return t.connected=!0}),this.source.on("REFRESH",function(t){return window.location.reload(!1)}),this.source.on("CONNECTING",function(e){return p.MessageBuilder.status("Connecting...").into(t)}),this.source.on("DISPATCH",function(e){return t.onDISPATCH(e)}),this.source.on("CLOSE",function(e){return t.onCLOSE(e)}),this.source.on("NAMES",function(e){return t.onNAMES(e)}),this.source.on("QUIT",function(e){return t.onQUIT(e)}),this.source.on("MSG",function(e){return t.onMSG(e)}),this.source.on("MUTE",function(e){return t.onMUTE(e)}),this.source.on("UNMUTE",function(e){return t.onUNMUTE(e)}),this.source.on("BAN",function(e){return t.onBAN(e)}),this.source.on("UNBAN",function(e){return t.onUNBAN(e)}),this.source.on("ERR",function(e){return t.onERR(e)}),this.source.on("SUBONLY",function(e){return t.onSUBONLY(e)}),this.source.on("BROADCAST",function(e){return t.onBROADCAST(e)}),this.control.on("SEND",function(e){return t.cmdSEND(e)}),this.control.on("HINT",function(e){return t.cmdHINT(e)}),this.control.on("EMOTES",function(e){return t.cmdEMOTES(e)}),this.control.on("HELP",function(e){return t.cmdHELP(e)}),this.control.on("IGNORE",function(e){return t.cmdIGNORE(e)}),this.control.on("UNIGNORE",function(e){return t.cmdUNIGNORE(e)}),this.control.on("MUTE",function(e){return t.cmdMUTE(e)}),this.control.on("BAN",function(e){return t.cmdBAN(e,"BAN")}),this.control.on("IPBAN",function(e){return t.cmdBAN(e,"IPBAN")}),this.control.on("UNMUTE",function(e){return t.cmdUNBAN(e,"UNMUTE")}),this.control.on("UNBAN",function(e){return t.cmdUNBAN(e,"UNBAN")}),this.control.on("SUBONLY",function(e){return t.cmdSUBONLY(e,"SUBONLY")}),this.control.on("MAXLINES",function(e){return t.cmdMAXLINES(e,"MAXLINES")}),this.control.on("UNHIGHLIGHT",function(e){return t.cmdHIGHLIGHT(e,"UNHIGHLIGHT")}),this.control.on("HIGHLIGHT",function(e){return t.cmdHIGHLIGHT(e,"HIGHLIGHT")}),this.control.on("TIMESTAMPFORMAT",function(e){return t.cmdTIMESTAMPFORMAT(e)}),this.control.on("BROADCAST",function(e){return t.cmdBROADCAST(e)}),this.control.on("CONNECT",function(e){return t.cmdCONNECT(e)}),this.control.on("TAG",function(e){return t.cmdTAG(e)}),this.control.on("UNTAG",function(e){return t.cmdUNTAG(e)}),this.control.on("BANINFO",function(e){return t.cmdBANINFO(e)}),this.source.on("PRIVMSGSENT",function(e){return t.onPRIVMSGSENT(e)}),this.source.on("PRIVMSG",function(e){return t.onPRIVMSG(e)}),this.control.on("MESSAGE",function(e){return t.cmdWHISPER(e)}),this.control.on("MSG",function(e){return t.cmdWHISPER(e)}),this.control.on("WHISPER",function(e){return t.cmdWHISPER(e)}),this.control.on("W",function(e){return t.cmdWHISPER(e)}),this.control.on("TELL",function(e){return t.cmdWHISPER(e)}),this.control.on("T",function(e){return t.cmdWHISPER(e)}),this.control.on("NOTIFY",function(e){return t.cmdWHISPER(e)}),this.control.on("MENTIONS",function(e){return t.cmdMENTIONS(e)}),this.control.on("M",function(e){return t.cmdMENTIONS(e)}),this.control.on("STALK",function(e){return t.cmdSTALK(e)}),this.control.on("S",function(e){return t.cmdSTALK(e)})}return r(e,[{key:"withUserAndSettings",value:function(t){return this.withUser(t).withSettings(t&&t.hasOwnProperty("settings")?new Map(t.settings):new Map)}},{key:"withUser",value:function(t){return this.user=this.addUser(t||{nick:"Anonymous"}),this.authenticated=null!==this.user&&""!==this.user.username&&"Anonymous"!==this.user.username,this}},{key:"withSettings",value:function(t){var e=this,n=this.authenticated&&t.get("profilesettings")?t:new Map(N.default.read("chat.settings")||[]);n.size>0&&[].concat(s(this.settings.keys())).filter(function(t){return void 0!==n.get(t)&&null!==n.get(t)}).forEach(function(t){return e.settings.set(t,n.get(t))});var i=parseInt(n.get("schemaversion")||-1),o=x.get("schemaversion");return-1!==i&&o!==i&&k.default.upgrade(this,i,o),this.taggednicks=new Map(this.settings.get("taggednicks")),this.ignoring=new Set(this.settings.get("ignorenicks")),this}},{key:"withGui",value:function(){var e=this;this.ui=t("#chat"),this.css=t("#chat-styles")[0].sheet,this.output=this.ui.find("#chat-output-frame"),this.input=this.ui.find("#chat-input-control"),this.loginscrn=this.ui.find("#chat-login-screen"),this.loadingscrn=this.ui.find("#chat-loading"),this.popoutbtn=this.ui.find("#chat-popout-btn"),this.windowselect=this.ui.find("#chat-windows-thumbnails"),this.inputhistory=new I.default(this),this.userfocus=new R.default(this,this.css),this.mainwindow=new L.default("main").into(this),this.menus.set("settings",new v.ChatSettingsMenu(this.ui.find("#chat-settings"),this.ui.find("#chat-settings-btn"),this)),this.menus.set("emotes",new v.ChatEmoteMenu(this.ui.find("#chat-emote-list"),this.ui.find("#chat-emoticon-btn"),this)),this.menus.set("users",new v.ChatUserMenu(this.ui.find("#chat-user-list"),this.ui.find("#chat-users-btn"),this)),this.menus.set("whisper-users",new v.ChatWhisperUsers(this.ui.find("#chat-whisper-users"),this.ui.find("#chat-whisper-btn"),this)),[].concat(s(Y.keys())).forEach(function(t){return e.autocomplete.addToBucket("/"+t,1,!1,0)}),this.emoticons.forEach(function(t){return e.autocomplete.addToBucket(t,1,!0,0)}),this.twitchemotes.forEach(function(t){return e.autocomplete.addToBucket(t,1,!0,0)}),this.autocomplete.bind(this),this.applySettings(!1),this.input.on("keypress",function(t){13!==t.keyCode||t.shiftKey||t.ctrlKey||(t.preventDefault(),t.stopPropagation(),e.authenticated?(e.control.emit("SEND",e.input.val().toString().trim()),e.input.val("").focus()):(e.loginscrn.show(),e.input.blur()))}),this.output.on("mouseup",function(){v.ChatMenu.closeMenus(e),_(e)}),document.addEventListener("keydown",function(t){27===t.keyCode&&v.ChatMenu.closeMenus(e)}),document.addEventListener("visibilitychange",(0,l.default)(function(){"visible"===(document.visibilityState||"visible")?_(e):v.ChatMenu.closeMenus(e)},100),!0);var n=!1,i=(0,l.default)(function(){n=!1,e.getActiveWindow().unlock(),_(e)},100),o=function(){n||(n=!0,v.ChatMenu.closeMenus(e),e.getActiveWindow().lock()),i()};window.addEventListener("resize",o,!1),this.windowselect.on("click",".ctrl",function(n){v.ChatMenu.closeMenus(e);var i=t(n.currentTarget);return i.hasClass("active")?i.hasClass("win-main")||(i.hasClass("select")?e.removeWindow(n.target.getAttribute("data-name").toLowerCase()):i.addClass("select")):e.windowToFront(n.target.getAttribute("data-name").toLowerCase()),e.input.focus(),!1}),this.output.on("click",".censored",function(e){return t(e.currentTarget).removeClass("censored"),!1}),this.loginscrn.on("click","#chat-btn-login",function(){var t=location.protocol+"//"+location.hostname+(location.port?":"+location.port:"");try{if(window.self!==window.top)return void(window.parent.location.href=t+"/login?follow="+encodeURIComponent(window.parent.location.pathname))}catch(t){}window.location.href=t+"/login?follow="+encodeURIComponent(window.location.pathname),e.loginscrn.hide()}),this.loginscrn.on("click","#chat-btn-cancel",function(){return e.loginscrn.hide()}),this.output.on("click",".chat-open-whisper",function(n){var i=t(n.target).closest(".msg-chat"),s=i.data("username").toString().toLowerCase();return e.whispers.has(s)&&e.menus.get("whisper-users").selectConversation(s),!1}),this.output.on("click",".chat-remove-whisper",function(n){e.mainwindow.lock();var i=t(n.target).closest(".msg-chat"),s=i.data("username").toString().toLowerCase(),o=i.data("id");if(null!==o&&e.whispers.has(s)){e.whispers.get(s).messages.filter(function(t){return t.id===o}).length>0&&(t.ajax({url:"/api/messages/"+encodeURIComponent(o)+"/open",method:"get"}),i.remove(),e.menus.get("whisper-users").redraw())}return e.mainwindow.unlock(),!1});try{var u=V(document.referrer);window.self!==window.top&&0!==u.localeCompare(window.location.hostname)?this.popoutbtn.on("click",function(){return window.open("/embed/chat","_blank","height=500,width=420,scrollbars=0,toolbar=0,location=0,status:no,menubar:0,resizable:0,dependent:0"),p.MessageBuilder.info("Disconnecting... Good bye.").into(e),e.reconnect=!1,e.source.disconnect(),!1}).show():this.popoutbtn.remove()}catch(t){this.popoutbtn.remove(),console.error(t)}return setInterval(function(){return t.ajax({url:"/ping"})},6e5),this.loadingscrn.fadeOut(500,function(){return e.loadingscrn.remove()}),this.mainwindow.updateAndPin(),this.input.focus(),this}},{key:"withFormatters",value:function(){return this.formatters.push(new S.HtmlTextFormatter(this)),this.formatters.push(new S.UrlFormatter(this)),this.formatters.push(new S.EmoteFormatter(this)),this.formatters.push(new S.MentionedUserFormatter(this)),this.formatters.push(new S.GreenTextFormatter(this)),this}},{key:"withEmotes",value:function(t){return this.emoticons=new Set(t.destiny),this.twitchemotes=new Set(t.twitch),this}},{key:"withHistory",value:function(t){var e=this;return t&&t.length>0&&(this.backlogloading=!0,t.forEach(function(t){return e.source.parseAndDispatch({data:t})}),this.backlogloading=!1,p.MessageBuilder.element("<hr/>").into(this),this.mainwindow.updateAndPin()),this}},{key:"withWhispers",value:function(){var e=this;return this.authenticated&&t.ajax({url:"/api/messages/inbox"}).done(function(t){return t.forEach(function(t){return e.whispers.set(t.username.toLowerCase(),{id:t.messageid,nick:t.username,unread:t.unread,messages:[],loaded:!1})})}).always(function(t){return e.menus.get("whisper-users").redraw()}),this}},{key:"connect",value:function(t){return this.uri=t,this.source.connect(t),this}},{key:"saveSettings",value:function(){this.authenticated&&this.settings.get("profilesettings")?t.ajax({url:"/api/chat/me/settings",method:"post",data:JSON.stringify([].concat(s(this.settings)))}):N.default.write("chat.settings",this.settings)}},{key:"commitSettings",value:function(){var t=this;this.debouncedsave||(this.debouncedsave=(0,l.default)(function(){return t.saveSettings()},1e3,!1)),this.debouncedsave()}},{key:"applySettings",value:function(){var t=this;(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this.saveSettings(),p.MessageGlobals.timeformat=this.settings.get("timestampformat");var n=Array.from(this.ignoring.values()).map(e.makeSafeForRegex);this.ignoreregex=n.length>0?new RegExp("\\b(?:"+n.join("|")+")\\b","i"):null;var i=[].concat(s(this.settings.get("customhighlight")||[])).filter(function(t){return""!==t}),o=[].concat(s(this.settings.get("highlightnicks")||[])).filter(function(t){return""!==t});this.regexhighlightself=this.user.nick?new RegExp("\\b(?:"+this.user.nick+")\\b","i"):null,this.regexhighlightcustom=i.length>0?new RegExp("\\b(?:"+i.join("|")+")\\b","i"):null,this.regexhighlightnicks=o.length>0?new RegExp("\\b(?:"+o.join("|")+")\\b","i"):null,Array.from(this.settings.keys()).filter(function(e){return"boolean"==typeof t.settings.get(e)}).forEach(function(e){return t.ui.toggleClass("pref-"+e,t.settings.get(e))}),[].concat(s(this.windows)).forEach(function(e){return e.maxlines=t.settings.get("maxlines")})}},{key:"addUser",value:function(t){if(!t)return null;var n=t.nick.toLowerCase(),i=this.users.get(n);return i?t.hasOwnProperty("features")&&!e.isArraysEqual(t.features,i.features)&&(i.features=t.features):(i=new m.default(t),this.users.set(n,i)),i}},{key:"addMessage",value:function(n){var i=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n.type!==p.MessageTypes.USER||!this.ignored(n.user.nick,n.message))return null===s&&(s=this.mainwindow),s.lock(),this.lastmessage&&this.lastmessage.type===p.MessageTypes.EMOTE&&this.lastmessage.emotecount>1&&this.lastmessage.completeCombo(),this.lastmessage&&this.lastmessage.type===n.type&&[p.MessageTypes.ERROR,p.MessageTypes.INFO,p.MessageTypes.COMMAND,p.MessageTypes.STATUS].indexOf(n.type)&&(n.continued=!0),n.type===p.MessageTypes.USER&&(n.message="//"===n.message.substring(0,2)?n.message.substring(1):n.message,n.slashme="/me "===n.message.substring(0,4).toLowerCase(),n.isown=n.user.username.toLowerCase()===this.user.username.toLowerCase(),n.continued=this.lastmessage&&this.lastmessage.user&&this.lastmessage.user.username.toLowerCase()===n.user.username.toLowerCase(),n.mentioned=e.extractNicks(n.message).filter(function(t){return i.users.has(t.toLowerCase())}),n.tag=this.taggednicks.get(n.user.nick.toLowerCase()),n.highlighted=!n.isown&&!n.user.hasFeature(M.default.BOT)&&(this.regexhighlightself&&this.settings.get("highlight")&&this.regexhighlightself.test(n.message)||this.regexhighlightnicks&&this.regexhighlightnicks.test(n.user.username)||this.regexhighlightcustom&&this.regexhighlightcustom.test(n.user.username+" "+n.message))),n.ui=t(n.html(this)),s.addline(n.ui),s.cleanup(),!this.backlogloading&&n.highlighted&&this.settings.get("notificationhighlight")&&!this.input.is(":focus")&&e.showNotification(n.user.username+" said ...",n.message,n.timestamp.valueOf(),this.settings.get("notificationtimeout")),this.lastmessage=n,s.unlock(),n}},{key:"resolveMessage",value:function(t,e){var n=!0,i=!1,s=void 0;try{for(var o,u=this.unresolved[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var r=o.value;if(this.user.username.toLowerCase()===t.toLowerCase()&&r.message===e)return this.unresolved.splice(this.unresolved.indexOf(r),1),!0}}catch(t){i=!0,s=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw s}}return!1}},{key:"removeMessageByNick",value:function(t){this.mainwindow.lock(),this.mainwindow.removelines('.msg-chat[data-username="'+t.toLowerCase()+'"]'),this.mainwindow.unlock()}},{key:"windowToFront",value:function(t){this.windows.forEach(function(t){t.visible&&(t.locked()||t.lock(),t.hide())});var e=this.windows.get(t);e.show(),e.locked()&&e.unlock(),this.redrawWindowIndicators()}},{key:"getActiveWindow",value:function(){return[].concat(s(this.windows.values())).filter(function(t){return t.visible})[0]}},{key:"getWindow",value:function(t){return this.windows.get(t)}},{key:"addWindow",value:function(t,e){this.windows.set(t,e),this.redrawWindowIndicators()}},{key:"removeWindow",value:function(t){var e=this.windows.get(t);if(e){var n=e.visible;if(this.windows.delete(t),e.destroy(),n){var i=[].concat(s(this.windows.keys()));this.windowToFront(this.windows.get(i[i.length-1]).name)}else this.redrawWindowIndicators()}}},{key:"redrawWindowIndicators",value:function(){var t=this;this.windowselect.empty(),this.windows.size>1&&this.windows.forEach(function(e){t.windowselect.append('<span title="'+e.label+'" data-name="'+e.name+'" class="ctrl win-'+e.name+" tag-"+e.tag+" "+(e.visible?"active":"")+'" aria-hidden="true">                        <i class="fa fa-times" data-name="'+e.name+'"></i>\n                     </span>')})}},{key:"censor",value:function(t){this.mainwindow.lock();var e=this.mainwindow.getlines('.msg-chat[data-username="'+t.toLowerCase()+'"]');this.settings.get("showremoved")?e.addClass("censored"):e.remove(),this.mainwindow.unlock()}},{key:"ignored",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.ignoring.has(t.toLowerCase())||this.ignoreregex&&null!==e&&this.settings.get("ignorementions")&&this.ignoreregex.test(e)}},{key:"ignore",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t=t.toLowerCase();var n=this.ignoring.has(t);e&&!n?this.ignoring.add(t):!e&&n&&this.ignoring.delete(t),this.settings.set("ignorenicks",[].concat(s(this.ignoring))),this.applySettings()}},{key:"onDISPATCH",value:function(t){var e=this,n=t.data;"object"===(void 0===n?"undefined":u(n))&&(n.hasOwnProperty("nick")&&this.autocomplete.updateNick(this.addUser(n).nick),n.hasOwnProperty("users")&&n.users.forEach(function(t){return e.autocomplete.updateNick(e.addUser(t).nick.toLowerCase())}))}},{key:"onCLOSE",value:function(){var t=this,e=this.connected;if(this.connected=!1,this.reconnect){var n=e?Math.floor(2500*Math.random())+501:Math.floor(25001*Math.random())+5e3;setTimeout(function(){t.connected||t.connect(t.uri)},n),p.MessageBuilder.status("Disconnected... reconnecting in "+Math.round(n/1e3)+" seconds").into(this)}}},{key:"onNAMES",value:function(t){p.MessageBuilder.status("Connected. Server connections: "+t.connectioncount).into(this),this.showmotd&&(this.cmdHINT([Math.floor(Math.random()*G.size)]),this.showmotd=!1)}},{key:"onQUIT",value:function(t){var e=t.nick.toLowerCase();this.users.has(e)&&(this.users.delete(e),this.autocomplete.removeNick(t.nick))}},{key:"onMSG",value:function(t){var n=e.extractTextOnly(t.data);(this.emoticons.has(n)||this.twitchemotes.has(n))&&null!==this.lastmessage&&e.extractTextOnly(this.lastmessage.message)===n?this.lastmessage.type===p.MessageTypes.EMOTE?(this.mainwindow.lock(),this.lastmessage.incEmoteCount(),this.mainwindow.unlock()):(this.lastmessage.ui.remove(),p.MessageBuilder.emote(n,t.timestamp,2).into(this)):this.resolveMessage(t.nick,t.data)||p.MessageBuilder.message(t.data,this.users.get(t.nick.toLowerCase()),t.timestamp).into(this)}},{key:"onMUTE",value:function(t){this.censor(t.data),this.user.username.toLowerCase()===t.data.toLowerCase()?p.MessageBuilder.command("You have been muted by "+t.nick+".",t.timestamp).into(this):p.MessageBuilder.command(t.data+" muted by "+t.nick+".",t.timestamp).into(this)}},{key:"onUNMUTE",value:function(t){this.user.username.toLowerCase()===t.data.toLowerCase()?p.MessageBuilder.command("You have been unmuted by "+t.nick+".",t.timestamp).into(this):p.MessageBuilder.command(t.data+" unmuted by "+t.nick+".",t.timestamp).into(this)}},{key:"onBAN",value:function(t){this.user.username.toLowerCase()===t.data.toLowerCase()?(p.MessageBuilder.command("You have been banned by "+t.nick+". Check your profile for more information.",t.timestamp).into(this),this.cmdBANINFO()):p.MessageBuilder.command(t.data+" banned by "+t.nick+".",t.timestamp).into(this),this.censor(t.data)}},{key:"onUNBAN",value:function(t){this.user.username.toLowerCase()===t.data.toLowerCase()?p.MessageBuilder.command("You have been unbanned by "+t.nick+".",t.timestamp).into(this):p.MessageBuilder.command(t.data+" unbanned by "+t.nick+".",t.timestamp).into(this)}},{key:"onERR",value:function(t){this.reconnect="toomanyconnections"!==t&&"banned"!==t;var e=H.has(t)?H.get(t):t,n=this.getActiveWindow();p.MessageBuilder.error(e).into(this,n),n!==this.mainwindow&&p.MessageBuilder.error(e).into(this)}},{key:"onSUBONLY",value:function(t){var e="on"===t.data?"enabled":"disabled";p.MessageBuilder.command("Subscriber only mode "+e+" by "+t.nick,t.timestamp).into(this)}},{key:"onBROADCAST",value:function(t){p.MessageBuilder.broadcast(t.data,t.timestamp).into(this)}},{key:"onPRIVMSGSENT",value:function(){this.mainwindow.visible&&p.MessageBuilder.info("Your message has been sent.").into(this)}},{key:"onPRIVMSG",value:function(t){var n=t.nick.toLowerCase();if(!this.ignoring.has(n)){var i=this.users.get(n)||new m.default({nick:t.nick}),s=t.hasOwnProperty("messageid")?t.messageid:null,o={data:t.data,timestamp:t.timestamp,read:!1,nick:t.nick,id:s},u=this.whispers.get(n)||{nick:t.nick,unread:0,messages:[],loaded:!0};this.whispers.set(n,u),o.read||u.unread++,u.loaded&&u.messages.push(o);var r=this.getWindow(n);r&&p.MessageBuilder.historical(t.data,i,t.timestamp).into(this,r),this.settings.get("showhispersinchat")&&p.MessageBuilder.whisper(t.data,i,this.user.username,t.timestamp,s).into(this),this.settings.get("notificationwhisper")&&!this.input.is(":focus")&&e.showNotification(t.nick+" whispered ...",t.data,t.timestamp,this.settings.get("notificationtimeout")),this.menus.get("whisper-users").redraw()}}},{key:"cmdSEND",value:function(t){if(""!==t){var e="/me "===t.substring(0,4).toLowerCase(),n="/"===t.substring(0,1)&&"//"!==t.substring(0,2),i=n?t.split(" ",1)[0]:"";if(this.mainwindow.visible)if(!e&&n){var s=(t.substring(i.length+1)||"").match(/([^ ]+)/g),o=i.substring(1).toUpperCase();this.control.listeners.has(o)?this.control.emit(o,s||[]):p.MessageBuilder.error("Unknown command. Try /help").into(this),this.inputhistory.add(t),this.autocomplete.markLastComplete()}else{var u=(e?t.substring(4):t).trim();if(this.connected&&!this.emoticons.has(u)&&!this.twitchemotes.has(u)){var r=p.MessageBuilder.message(t,this.user).into(this);this.unresolved.unshift(r)}this.source.send("MSG",{data:t}),this.inputhistory.add(t),this.autocomplete.markLastComplete()}else{var a=this.getActiveWindow();/^\/close/i.test(i)&&this.mainwindow!==a?(this.removeWindow(a.name),this.inputhistory.add(t),this.autocomplete.markLastComplete()):!e&&n?p.MessageBuilder.error("No commands in private channels yet.").into(this,a):this.source.connected()?(this.source.send("PRIVMSG",{nick:a.name,data:t}),p.MessageBuilder.message(t,this.user).into(this,a)):p.MessageBuilder.error(H.get("notconnected")).into(this,a)}}}},{key:"cmdEMOTES",value:function(){p.MessageBuilder.info("Available emoticons: "+this.emoticons.join(", ")+" (www.destiny.gg/emotes)").into(this)}},{key:"cmdHELP",value:function(){var t="Available commands: ";[].concat(s(Y)).forEach(function(e){var n=""!==e[1]?"("+e[1]+")":"";t+="/"+e[0]+" "+n+" "}),p.MessageBuilder.info(t).into(this)}},{key:"cmdHINT",value:function(t){var e=[].concat(s(G)),n=t&&t[0]?parseInt(t[0])-1:-1;n>0&&n<G.size?p.MessageBuilder.info(e[n][1]).into(this):(void 0===this.lasthintindex||this.lasthintindex===e.length-1?this.lasthintindex=0:this.lasthintindex++,p.MessageBuilder.info(e[this.lasthintindex][1]).into(this))}},{key:"cmdIGNORE",value:function(t){var e=t[0]||null;e?U.test(e)?(this.ignore(e,!0),this.removeMessageByNick(e),p.MessageBuilder.status("Ignoring "+e).into(this)):p.MessageBuilder.info("Invalid nick - /ignore <nick>").into(this):this.ignoring.size<=0?p.MessageBuilder.info("Your ignore list is empty").into(this):p.MessageBuilder.info("Ignoring the following people: "+Array.from(this.ignoring.values()).join(", ")).into(this)}},{key:"cmdUNIGNORE",value:function(t){var e=t[0]||null;e&&U.test(e)?(this.ignore(e,!1),p.MessageBuilder.status(e+" has been removed from your ignore list").into(this)):p.MessageBuilder.error("Invalid nick - /ignore <nick>").into(this)}},{key:"cmdMUTE",value:function(t){if(0===t.length)p.MessageBuilder.info("Usage: /mute <nick>[ <time>]").into(this);else if(U.test(t[0])){var n=t[1]?e.parseTimeInterval(t[1]):null;n&&n>0?this.source.send("MUTE",{data:t[0],duration:n}):this.source.send("MUTE",{data:t[0]})}else p.MessageBuilder.info("Invalid nick - /mute <nick>[ <time>]").into(this)}},{key:"cmdBAN",value:function(t,n){if(0===t.length||t.length<3)p.MessageBuilder.info("Usage: /"+n+" <nick> <time> <reason> (time can be 'permanent')").into(this);else if(U.test(t[0]))if(t[2]){var i={nick:t[0],reason:t.slice(2,t.length).join(" ")};"IPBAN"===n||/^perm/i.test(t[1])?i.ispermanent="IPBAN"===n||/^perm/i.test(t[1]):i.duration=e.parseTimeInterval(t[1]),this.source.send("BAN",i)}else p.MessageBuilder.error("Providing a reason is mandatory").into(this);else p.MessageBuilder.info("Invalid nick").into(this)}},{key:"cmdUNBAN",value:function(t,e){0===t.length?p.MessageBuilder.info("Usage: /"+e+" nick").into(this):U.test(t[0])?this.source.send(e,{data:t[0]}):p.MessageBuilder.info("Invalid nick").into(this)}},{key:"cmdSUBONLY",value:function(t,e){/on|off/i.test(t[0])?this.source.send(e.toUpperCase(),{data:t[0].toLowerCase()}):p.MessageBuilder.error("Invalid argument - /"+e.toLowerCase()+" on | off").into(this)}},{key:"cmdMAXLINES",value:function(t,e){if(0===t.length)return void p.MessageBuilder.info("Maximum lines stored: "+this.settings.get("maxlines")).into(this);var n=Math.abs(parseInt(t[0],10));n?(p.MessageBuilder.info("Current number of lines shown: "+this.settings.get("maxlines")).into(this),this.settings.set("maxlines",n),this.applySettings()):p.MessageBuilder.info("Invalid argument - /"+e+" is expecting a number").into(this)}},{key:"cmdHIGHLIGHT",value:function(t,e){var n=this.settings.get("highlightnicks");if(0===t.length)return void(n.length>0?p.MessageBuilder.info("Currently highlighted users: "+n.join(",")).into(this):p.MessageBuilder.info("No highlighted users").into(this));U.test(t[0])||p.MessageBuilder.error("Invalid nick - /"+e+" nick").into(this);var i=t[0].toLowerCase(),s=n.indexOf(i);switch(e){case"UNHIGHLIGHT":-1!==s&&n.splice(s,1);break;default:case"HIGHLIGHT":-1===s&&n.push(i)}p.MessageBuilder.info("HIGHLIGHT"===e.toUpperCase()?"Highlighting "+i:"No longer highlighting "+i+"}").into(this),this.settings.set("highlightnicks",n),this.applySettings()}},{key:"cmdTIMESTAMPFORMAT",value:function(t){if(0===t.length)p.MessageBuilder.info("Current format: "+this.settings.get("timestampformat")+" (the default is 'HH:mm', for more info: http://momentjs.com/docs/#/displaying/format/)").into(this);else{var e=t.slice(1,t.length);/^[a-z :.,-\\*]+$/i.test(e)?(p.MessageBuilder.info("New format: "+this.settings.get("timestampformat")).into(this),this.settings.set("timestampformat",e),this.applySettings()):p.MessageBuilder.error("Invalid format, see: http://momentjs.com/docs/#/displaying/format/").into(this)}}},{key:"cmdBROADCAST",value:function(t){this.source.send("BROADCAST",{data:t.join(" ")})}},{key:"cmdWHISPER",value:function(t){if(t[0]&&U.test(t[0]))if(t[0].toLowerCase()===this.user.username.toLowerCase())p.MessageBuilder.error("Cannot send a message to yourself").into(this);else{var e=t.slice(1,t.length).join(" ");this.source.send("PRIVMSG",{nick:t[0],data:e})}else p.MessageBuilder.error("Invalid nick - /msg nick message").into(this)}},{key:"cmdCONNECT",value:function(t){this.reconnect=!1,this.uri=t[0],this.source.disconnect(),this.source.connect(this.uri)}},{key:"cmdSTALK",value:function(e){var n=this;if(e[0]&&/^\d+$/.test(e[0])&&(e[1]=e[0],e[0]=this.user.username),!e[0]||!U.test(e[0].toLowerCase()))return void p.MessageBuilder.error("Invalid nick - /stalk <nick> <limit>").into(this);if(this.busystalk)return void p.MessageBuilder.error("Still busy stalking").into(this);if(this.nextallowedstalk&&this.nextallowedstalk.isAfter(new Date))return void p.MessageBuilder.error("Next allowed stalk "+this.nextallowedstalk.fromNow()).into(this);this.busystalk=!0;var i=e[1]?parseInt(e[1]):3;p.MessageBuilder.info("Getting messages for "+[e[0]]+" ...").into(this),t.ajax({timeout:5e3,url:"/api/chat/stalk?username="+encodeURIComponent(e[0])+"&limit="+i}).always(function(){n.nextallowedstalk=(0,h.default)().add(10,"seconds"),n.busystalk=!1}).done(function(t){if(0===t.lines.length)p.MessageBuilder.info("No messages for "+e[0]).into(n);else{var i=h.default.utc(1e3*t.lines[t.lines.length-1].timestamp).local().format("MMMM Do YYYY, h:mm:ss a");p.MessageBuilder.info("Stalked "+e[0]+" last seen "+i).into(n),t.lines.forEach(function(e){return p.MessageBuilder.historical(e.text,new m.default({nick:t.nick}),1e3*e.timestamp).into(n)}),p.MessageBuilder.info("End of stalk (https://dgg.overrustlelogs.net/"+e[0]+")").into(n)}}).fail(function(t){return p.MessageBuilder.error("No messages for "+e[0]+" received. Try again later").into(n)})}},{key:"cmdMENTIONS",value:function(e){var n=this;if(e[0]&&/^\d+$/.test(e[0])&&(e[1]=e[0],e[0]=this.user.username),e[0]||(e[0]=this.user.username),!e[0]||!U.test(e[0].toLowerCase()))return void p.MessageBuilder.error("Invalid nick - /mentions <nick> <limit>").into(this);if(this.busymentions)return void p.MessageBuilder.error("Still busy getting mentions").into(this);if(this.nextallowedmentions&&this.nextallowedmentions.isAfter(new Date))return void p.MessageBuilder.error("Next allowed mentions "+this.nextallowedmentions.fromNow()).into(this);this.busymentions=!0;var i=e[1]?parseInt(e[1]):3;p.MessageBuilder.info("Getting mentions for "+[e[0]]+" ...").into(this),t.ajax({timeout:5e3,url:"/api/chat/mentions?username="+encodeURIComponent(e[0])+"&limit="+i}).always(function(){n.nextallowedmentions=(0,h.default)().add(10,"seconds"),n.busymentions=!1}).done(function(t){if(0===t.length)p.MessageBuilder.info("No mentions for "+e[0]).into(n);else{var i=h.default.utc(1e3*t[t.length-1].date).local().format("MMMM Do YYYY, h:mm:ss a");p.MessageBuilder.info("Mentions for "+e[0]+" last seen "+i).into(n),t.forEach(function(t){return p.MessageBuilder.historical(t.text,new m.default({nick:t.nick}),1e3*t.date).into(n)}),p.MessageBuilder.info("End of stalk (https://dgg.overrustlelogs.net/"+e[0]+")").into(n)}}).fail(function(t){return p.MessageBuilder.error("No mentions for "+e[0]+" received. Try again later").into(n)})}},{key:"cmdTAG",value:function(t){var n=this;if(0===t.length)return void(this.taggednicks.size>0?p.MessageBuilder.info("Tagged nicks: "+[].concat(s(this.taggednicks.keys())).join(",")+". Available colors: "+P.join(",")).into(this):p.MessageBuilder.info("No tagged nicks. Available colors: "+P.join(",")).into(this));var i=t.filter(function(t){return null!==t&&""!==t&&U.test(t)});if(0===i.length)return void p.MessageBuilder.error("Invalid nick - /tag <nick> <color>").into(this);i.forEach(function(i){var s=i.toLowerCase();if(s===n.user.username.toLowerCase())return void p.MessageBuilder.error("Cannot tag yourself").into(n);var o=t[1]&&-1!==P.indexOf(t[1])?t[1]:P[Math.floor(Math.random()*P.length)];n.mainwindow.getlines('.msg-user[data-username="'+s+'"]').removeClass(e.removeClasses("msg-tagged")).addClass("msg-tagged msg-tagged-"+o),n.taggednicks.set(s,o),p.MessageBuilder.info("Tagged "+i+" as "+o).into(n)}),this.settings.set("taggednicks",[].concat(s(this.taggednicks))),this.applySettings()}},{key:"cmdUNTAG",value:function(t){var n=this;if(0===t.length)return void(this.taggednicks.size>0?p.MessageBuilder.info("Tagged nicks: "+[].concat(s(this.taggednicks.keys())).join(",")+". Available colors: "+P.join(",")).into(this):p.MessageBuilder.info("No tagged nicks. Available colors: "+P.join(",")).into(this));var i=t.filter(function(t){return null!==t&&""!==t&&U.test(t)});if(0===i.length)return void p.MessageBuilder.error("Invalid nick - /untag <nick>").into(this);i.forEach(function(t){var i=t.toLowerCase();n.taggednicks.delete(i),n.mainwindow.getlines('.msg-chat[data-username="'+i+'"]').removeClass(e.removeClasses("msg-tagged"))}),p.MessageBuilder.info("Un-tagged "+i.join(",")).into(this),this.settings.set("taggednicks",[].concat(s(this.taggednicks))),this.applySettings()}},{key:"cmdBANINFO",value:function(){var e=this;p.MessageBuilder.info("Loading ban info ...").into(this),t.ajax({url:"/api/chat/me/ban"}).done(function(n){if("bannotfound"===n)return void p.MessageBuilder.info("You have no active bans. Thank you.").into(e);var i=t.extend({},W,n),s=i.username?i.username:"Chat",o=(0,h.default)(i.starttimestamp).format("MMMM Do YYYY, h:mm:ss a");if(i.endtimestamp){var u=(0,h.default)(i.endtimestamp).calendar();p.MessageBuilder.info("Temporary ban by "+s+" starting "+o+" and ending "+u).into(e)}else p.MessageBuilder.info("Permanent ban by "+s+" starting "+o+".").into(e);if(i.reason){var r=p.MessageBuilder.message(i.reason,new m.default({nick:i.username},i.starttimestamp));r.historical=!0,r.into(e)}p.MessageBuilder.info("End of ban information").into(e)}).fail(function(t){return p.MessageBuilder.error("Error loading ban info. Check your profile.").into(e)})}}],[{key:"extractTextOnly",value:function(t){return("/me "===t.toLowerCase().substring(0,4)?t.substring(4):t).trim()}},{key:"extractNicks",value:function(t){for(var e=void 0,n=new Set;e=b.exec(t);)n.add(e[1]);return[].concat(s(n))}},{key:"removeClasses",value:function(t){return function(e,n){return(n.match(new RegExp("\\b"+t+"(?:[A-z-]+)?\\b","g"))||[]).join(" ")}}},{key:"isArraysEqual",value:function(t,e){return(!t||!e)&&(t.length!==e.length||t.sort().toString()!==e.sort().toString())}},{key:"showNotification",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("granted"===Notification.permission){var s=new Notification(t,{body:e,tag:"dgg"+n,icon:"/notifyicon.png",dir:"auto"});s.onclick=function(){},i&&setTimeout(function(){return s.close()},8e3)}}},{key:"makeSafeForRegex",value:function(t){return t.trim().replace(/[\-\[\]\/{}()*+?.\\\^$|]/g,"\\$&")}},{key:"parseTimeInterval",value:function(t){var e=0,n={s:1e9,sec:1e9,secs:1e9,second:1e9,seconds:1e9,m:6e10,min:6e10,mins:6e10,minute:6e10,minutes:6e10,h:36e11,hr:36e11,hrs:36e11,hour:36e11,hours:36e11,d:864e11,day:864e11,days:864e11};return t.replace(/(\d+(?:\.\d*)?)([a-z]+)?/gi,function(t,i,s){i*=s?n[s.toLowerCase()]||n.s:n.s,e+=+i}),e}}]),e}();e.default=j}).call(e,n(4))},63:function(t,e,n){"use strict";(function(t){function i(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function a(t){var e=[].concat(r(t.features||[])).filter(function(t){return!A.default.SUBSCRIBER.equals(t)}).sort(function(t,e){var n=void 0,i=void 0;return n=A.default.SUBSCRIBERT4.equals(t),i=A.default.SUBSCRIBERT4.equals(e),n>i?-1:n<i?1:(n=A.default.SUBSCRIBERT3.equals(t),i=A.default.SUBSCRIBERT3.equals(e),n>i?-1:n<i?1:(n=A.default.SUBSCRIBERT2.equals(t),i=A.default.SUBSCRIBERT2.equals(e),n>i?-1:n<i?1:(n=A.default.SUBSCRIBERT1.equals(t),i=A.default.SUBSCRIBERT1.equals(e),n>i?-1:n<i?1:(n=A.default.SUBSCRIBERT0.equals(t),i=A.default.SUBSCRIBERT0.equals(e),n>i?-1:n<i?1:(n=A.default.BOT2.equals(t)||A.default.BOT.equals(t),i=A.default.BOT2.equals(t)||A.default.BOT.equals(e),n>i?-1:n<i?1:(n=A.default.VIP.equals(t),i=A.default.VIP.equals(e),n>i?-1:n<i?1:(n=A.default.CONTRIBUTOR.equals(t)||A.default.TRUSTED.equals(t),i=A.default.CONTRIBUTOR.equals(e)||A.default.TRUSTED.equals(e),n>i?-1:n<i?1:(n=A.default.NOTABLE.equals(t),i=A.default.NOTABLE.equals(e),n>i?-1:n<i?1:t>e?-1:t<e?1:0))))))))}).map(function(t){var e=A.default.valueOf(t);return'<i class="flair icon-'+t.toLowerCase()+'" title="'+(null!==e?e.label:t)+'" />'}).join("");return e.length>0?'<span class="features">'+e+"</span>":""}function l(t){return"<i class='count'>"+t+'</i> <i class="x">X</i> <i class="hit">Hits</i> <i class=\'combo\'>C-C-C-COMBO</i>'}function c(t){return'<time class="time" title="'+t.timestamp.format(p.datetimeformat)+'">'+t.timestamp.format(t.timeformat)+"</time>"}function h(t,e){var n="/me "===e.message.substring(0,4).toLowerCase()?e.message.substring(4):e.message;return t.formatters.forEach(function(t){return n=t.format(n,e.user,e)}),'<span class="text">'+n+"</span>"}Object.defineProperty(e,"__esModule",{value:!0}),e.MessageTypes=e.ChatEmoteMessage=e.ChatUserMessage=e.ChatMessage=e.ChatUIMessage=e.MessageGlobals=e.MessageBuilder=void 0;var d=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),f=n(27),A=i(f),g=n(0),E=i(g),m={STATUS:"STATUS",ERROR:"ERROR",INFO:"INFO",COMMAND:"COMMAND",BROADCAST:"BROADCAST",UI:"UI",CHAT:"CHAT",USER:"USER",EMOTE:"EMOTE"},p={timeformat:"HH:mm",datetimeformat:"MMMM Do YYYY, h:mm:ss a"},v=function(){function t(){u(this,t)}return d(t,null,[{key:"element",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new S(t,e)}},{key:"status",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new C(t,e,m.STATUS)}},{key:"error",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new C(t,e,m.ERROR)}},{key:"info",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new C(t,e,m.INFO)}},{key:"broadcast",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new C(t,e,m.BROADCAST)}},{key:"command",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new C(t,e,m.COMMAND)}},{key:"message",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new T(t,e,n)}},{key:"emote",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return new O(t,e,n)}},{key:"whisper",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=new T(t,e,i);return o.id=s,o.target=n,o}},{key:"historical",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=new T(t,e,n);return i.historical=!0,i}}]),t}(),S=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];u(this,e),this.type=m.UI,this.message=t,this.classes=n}return d(e,[{key:"into",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t.addMessage(this,e),this}},{key:"wrap",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.push(this.classes),n.unshift("msg-"+this.type.toLowerCase()),n.unshift("msg-chat"),i.class=n.join(" "),t("<div />",i).html(e)[0].outerHTML}},{key:"html",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.wrap(this.message)}}]),e}(),C=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m.CHAT;u(this,e);var o=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return o.user=null,o.type=i,o.continued=!1,o.timestamp=n?E.default.utc(n).local():(0,E.default)(),o.timeformat=p.timeformat,o}return o(e,t),d(e,[{key:"html",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=[],n={};return this.continued&&e.push("msg-continue"),this.wrap(c(this)+" "+h(t,this),e,n)}}]),e}(S),T=function(t){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;u(this,e);var o=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,m.USER));return o.user=n,o.id=null,o.isown=!1,o.highlighted=!1,o.historical=!1,o.target=null,o.tag=null,o.slashme=!1,o.mentioned=[],o}return o(e,t),d(e,[{key:"html",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=[],n={};this.id&&(n["data-id"]=this.id),this.user&&this.user.username&&(n["data-username"]=this.user.username.toLowerCase()),this.mentioned&&this.mentioned.length>0&&(n["data-mentioned"]=this.mentioned.join(" ").toLowerCase()),this.isown&&e.push("msg-own"),this.slashme&&e.push("msg-emote"),this.historical&&e.push("msg-historical"),this.highlighted&&e.push("msg-highlight"),this.continued&&!this.target&&e.push("msg-continue"),this.tag&&e.push("msg-tagged msg-tagged-"+this.tag),this.target&&e.push("msg-whisper");var i=": ";this.target?i=' whispered you ... <span><a class="chat-open-whisper"><i class="fa fa-envelope" aria-hidden="true"></i> open</a> <a class="chat-remove-whisper"><i class="fa fa-times" aria-hidden="true"></i> remove</a></span>':this.slashme?i="":this.continued&&(i="");var s=a(this.user)+' <a class="user '+this.user.features.join(" ")+'">'+this.user.username+"</a>";return this.wrap(c(this)+" "+s+'<span class="ctrl">'+i+"</span> "+h(t,this),e,n)}}]),e}(C),O=function(t){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;u(this,e);var o=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,m.EMOTE));return o.emotecount=i,o.emotecountui=null,o}return o(e,t),d(e,[{key:"html",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.wrap(c(this)+" "+h(t,this)+' <span class="chat-combo">'+l(this.emotecount)+"<span>")}},{key:"incEmoteCount",value:function(){++this.emotecount;var t="";this.emotecount>=50?t=" x50":this.emotecount>=30?t=" x30":this.emotecount>=20?t=" x20":this.emotecount>=10?t=" x10":this.emotecount>=5&&(t=" x5"),this.emotecountui||(this.emotecountui=this.ui.find(".chat-combo")),this.emotecountui.detach().attr("class","chat-combo"+t).html(l(this.emotecount)).appendTo(this.ui)}},{key:"completeCombo",value:function(){this.emotecountui||(this.emotecountui=this.ui.find(".chat-combo")),this.emotecountui.addClass("combo-complete")}}]),e}(C);e.MessageBuilder=v,e.MessageGlobals=p,e.ChatUIMessage=S,e.ChatMessage=C,e.ChatUserMessage=T,e.ChatEmoteMessage=O,e.MessageTypes=m}).call(e,n(4))},64:function(t,e,n){"use strict";(function(t){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n(135);var o=function(){function e(n,s){var o=this,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{sliderMinHeight:40,tabIndex:1};i(this,e);var r=t(s);r.find(".chat-scroll-notify").length>0&&(r.on("update",function(){return r.toggleClass("chat-unpinned",!o.isPinned())}),r.on("mousedown",".chat-scroll-notify",function(){return!1}),r.on("mouseup",".chat-scroll-notify",function(){return o.updateAndPin(!0),!1})),this.scroller=r.nanoScroller(Object.assign({disableResize:!0,preventPageScrolling:!0},u))[0].nanoscroller}return s(e,[{key:"isPinned",value:function(){return!this.scroller.isActive||this.scroller.contentScrollTop>=this.scroller.maxScrollTop-30}},{key:"updateAndPin",value:function(t){this.reset(),t&&this.scroller.scrollBottom(0)}},{key:"reset",value:function(){this.scroller.reset()}},{key:"destroy",value:function(){this.scroller.destroy()}}]),e}();e.default=o}).call(e,n(4))},65:function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),this.nick=e.nick||"",this.username=e.nick||"",this.features=e.features||[]}return s(t,[{key:"hasAnyFeatures",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=!0,s=!1,o=void 0;try{for(var u,r=e[Symbol.iterator]();!(i=(u=r.next()).done);i=!0){var a=u.value;if(-1!==this.features.indexOf("string"!=typeof a?a.toString():a))return!0}}catch(t){s=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(s)throw o}}return!1}},{key:"hasFeature",value:function(t){return this.hasAnyFeatures(t)}}]),t}();e.default=o},66:function(t,e,n){"use strict";(function(t){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(64),u=function(t){return t&&t.__esModule?t:{default:t}}(o),r=["green","yellow","orange","purple","blue","sky","lime","pink"],a=function(){function e(n){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";i(this,e),this.name=n,this.label=o,this.maxlines=0,this.linecount=0,this.locks=0,this.waspinned=!0,this.scrollplugin=null,this.visible=!1,this.tag=null,this.ui=t('<div id="chat-win-'+n+'" class="chat-output '+s+' nano" style="display: none;">                        <div class="chat-lines nano-content"></div>                        <div class="chat-scroll-notify">More messages below</div>                     </div>'),this.lines=this.ui.find(".chat-lines")}return s(e,[{key:"destroy",value:function(){return this.ui.remove(),this.scrollplugin.destroy(),this}},{key:"into",value:function(t){return this.maxlines=t.settings.get("maxlines"),this.scrollplugin=new u.default(t,this.ui),this.tag=t.taggednicks.get(this.name)||r[Math.floor(Math.random()*r.length)],t.output.append(this.ui),t.addWindow(this.name.toLowerCase(),this),t.windowToFront(this.name.toLowerCase()),this}},{key:"show",value:function(){this.visible||(this.visible=!0,this.ui.show())}},{key:"hide",value:function(){this.visible&&(this.visible=!1,this.ui.hide())}},{key:"addline",value:function(t){this.lines.append(t),this.linecount++}},{key:"getlines",value:function(t){return this.lines.children(t)}},{key:"removelines",value:function(t){var e=this.lines.children(t);this.linecount-=e.length,e.remove()}},{key:"locked",value:function(){return this.locks>0}},{key:"lock",value:function(){1===++this.locks&&(this.waspinned=this.scrollplugin.isPinned())}},{key:"unlock",value:function(){0===--this.locks&&this.scrollplugin.updateAndPin(this.waspinned)}},{key:"cleanup",value:function(){if(this.scrollplugin.isPinned()||this.waspinned){var t=this.lines.children();if(t.length>=this.maxlines){var e=t.slice(0,t.length-this.maxlines);this.linecount-=e.length,e.remove()}}}},{key:"updateAndPin",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scrollplugin.updateAndPin(t)}}]),e}();e.default=a}).call(e,n(4))},70:function(t,e,n){var i=n(117);t.exports=function(t,e,n){function s(){var c=i()-a;c<e&&c>0?o=setTimeout(s,e-c):(o=null,n||(l=t.apply(r,u),o||(r=u=null)))}var o,u,r,a,l;return null==e&&(e=100),function(){r=this,u=arguments,a=i();var c=n&&!o;return o||(o=setTimeout(s,e)),c&&(l=t.apply(r,u),r=u=null),l}}},73:function(t,e){},77:function(t,e){t.exports={destiny:["Dravewin","INFESTINY","FIDGETLOL","Hhhehhehe","GameOfThrows","WORTH","FeedNathan","Abathur","LUL","Heimerdonger","SoSad","DURRSTINY","SURPRISE","NoTears","OverRustle","DuckerZ","Kappa","Klappa","DappaKappa","BibleThump","AngelThump","FrankerZ","BasedGod","OhKrappa","SoDoge","WhoahDude","MotherFuckinGame","DaFeels","UWOTM8","CallCatz","CallChad","DatGeoff","Disgustiny","FerretLOL","Sippy","DestiSenpaii","Nappa","DAFUK","AYYYLMAO","DANKMEMES","MLADY","SOTRIGGERED","MASTERB8","NOTMYTEMPO","LIES","LeRuse","YEE","SWEATSTINY","PEPE","CheekerZ","SpookerZ","SLEEPSTINY","PICNIC","Memegasm","WEEWOO","KappaRoss","ASLAN","DJAslan","TRUMPED","BASEDWATM8","BERN","HmmStiny","PepoThink","FeelsAmazingMan","FeelsBadMan","FeelsGoodMan","OhMyDog","Wowee","haHAA","POTATO","NOBULLY","ChibiDesti","gachiGASM"],twitch:["nathanD","nathanDank","nathanF","nathanNotears","nathanPepe","nathanRustle","nathanTowel","nathanWat","nathanThinking","nathanRuse","nathanYee","nathanWeeb"]}},88:function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(52),u=function(t){return t&&t.__esModule?t:{default:t}}(o),r=function(){function t(){i(this,t),this.minWordLength=1,this.maxResults=10,this.buckets={},this.origVal=null,this.searchResults=[],this.searchIndex=-1,this.searchWord=null,this.input=null}return s(t,[{key:"bind",value:function(t){var e=this;if(this.input=t.input,!this.input||0===this.input.length||!this.input[0].setSelectionRange)return this;setInterval(this.expireUsers.bind(this),6e4),this.input.on("mousedown",this.resetSearch.bind(this)),this.input.on("keydown",function(t){9===t.which?(t.preventDefault(),t.stopPropagation(),e.searchResults.length<=0&&(e.resetSearch(),e.searchSelectWord(t.shiftKey)),e.showAutoComplete()):e.resetSearch()})}},{key:"getBucketId",value:function(t){return 0===t.length?"":t.match(/[\w]/)[0].toLowerCase()}},{key:"addToBucket",value:function(t,e,n,i){var s=this.getBucketId(t);return this.buckets[s]||(this.buckets[s]={}),this.buckets[s][t]||(this.buckets[s][t]={data:t,weight:e,isemote:!!n,promoted:i}),this.buckets[s][t]}},{key:"removeNick",value:function(t){var e=this.getBucketId(t);return!(!this.buckets[e]||!this.buckets[e][t])&&(delete this.buckets[e][t],!0)}},{key:"updateNick",value:function(t){var e=Date.now();this.addToBucket(t,e,!1,0).weight=e}},{key:"promoteNick",value:function(t){var e=Date.now(),n=this.addToBucket(t,1,!1,e);if(n.isemote)return this;n.promoted=e}},{key:"getSearchWord",value:function(t,e){var n=t.substring(0,e),i=t.substring(e),s=n.lastIndexOf(" ")+1,o=i.indexOf(" "),u=!1;return s>0&&(n=n.substring(s)),o>-1&&(i=i.substring(0,o)),0===n.lastIndexOf("@")&&(s++,n=n.substring(1),u=!0),{word:n+i,startCaret:s,isUserSearch:u}}},{key:"sortResults",value:function(t,e){return t&&e?t.promoted!==e.promoted?t.promoted>e.promoted?-1:1:t.isemote!==e.isemote?t.isemote&&!e.isemote?-1:1:t.weight!==e.weight?t.weight>e.weight?-1:1:(t=t.data.toLowerCase(),e=e.data.toLowerCase(),t===e?0:t>e?1:-1):0}},{key:"searchBuckets",value:function(t,e,n){t=u.default.makeSafeForRegex(t);var i=[],s=new RegExp("^"+t,"i"),o=this.buckets[this.getBucketId(t)]||{};for(var r in o)!o.hasOwnProperty(r)||n&&o[r].isemote||s.test(r)&&i.push(o[r]);return i.sort(this.sortResults),i.slice(0,e)}},{key:"expireUsers",value:function(){var t=Date.now()-6e5;for(var e in this.buckets)if(this.buckets.hasOwnProperty(e))for(var n in this.buckets[e])if(this.buckets[e].hasOwnProperty(n)){var i=this.buckets[e][n];!i.isemote&&i.promoted<=t&&(i.promoted=0),!i.isemote&&i.weight<=t&&(i.weight=1)}}},{key:"markLastComplete",value:function(){if(this.lastComplete){var t=this.buckets[this.getBucketId(this.lastComplete)]||{};if(!t[this.lastComplete])return this.lastComplete=null;if(t[this.lastComplete].isemote){for(var e in t)t.hasOwnProperty(e)&&(t[e].promoted=0);return this.lastComplete=null}this.promoteNick(this.lastComplete),this.lastComplete=null}}},{key:"resetSearch",value:function(){this.origVal=null,this.searchResults=[],this.searchIndex=-1,this.searchWord=null}},{key:"searchSelectWord",value:function(t){var e=this.getSearchWord(this.input.val(),this.input[0].selectionStart);if(e.word.length>=this.minWordLength){this.searchWord=e;var n=!!t||this.searchWord.isUserSearch;this.searchResults=this.searchBuckets(this.searchWord.word,this.maxResults,n),this.origVal=this.input.val().toString()}}},{key:"showAutoComplete",value:function(){this.searchIndex=this.searchIndex>=this.searchResults.length-1?0:this.searchIndex+1;var t=this.searchResults[this.searchIndex];if(t&&t.data!==this.searchWord.word){this.lastComplete=t.data;var e=this.origVal.substr(0,this.searchWord.startCaret),n=this.origVal.substr(this.searchWord.startCaret+this.searchWord.word.length);" "===n[0]&&0!==n.length||(n=" "+n),this.input.focus().val(e+t.data+n),this.input[0].setSelectionRange(e.length+t.data.length+1,e.length+t.data.length+1)}}}]),t}();e.default=r},89:function(t,e,n){"use strict";(function(t){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(){function e(t,i){var s=this;n(this,e),this.chat=t,this.css=i,this.focused=[],this.chat.output.on("mousedown",function(t){return s.toggleElement(t.target)})}return i(e,[{key:"toggleElement",value:function(e){var n=t(e);n.hasClass("chat-user")?(this.chat.settings.get("focusmentioned")||this.toggleFocus(n.closest(".msg-user").data("username"),!0),this.toggleFocus(n.text())):n.hasClass("user")?this.toggleFocus(n.text()):this.focused.length>0&&this.clearFocus()}},{key:"toggleFocus",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t=(t||"").toLowerCase();var n=this.focused.indexOf(t.toLowerCase()),i=-1!==n;return null===e&&(e=!i),e&&!i?this.addCssRule(t):!e&&i&&this.removeCssRule(n),this}},{key:"addCssRule",value:function(t){var e=void 0;e=this.chat.settings.get("focusmentioned")?'.msg-user[data-username="'+t+'"],.msg-user[data-mentioned~="'+t+'"]{opacity:1 !important;}':'.msg-user[data-username="'+t+'"]{opacity:1 !important;}',this.css.insertRule(e,this.focused.length),this.focused.push(t),this.redraw()}},{key:"removeCssRule",value:function(t){this.css.deleteRule(t),this.focused.splice(t,1),this.redraw()}},{key:"clearFocus",value:function(){var t=this;this.focused.forEach(function(e){return t.css.deleteRule(0)}),this.focused=[],this.redraw()}},{key:"redraw",value:function(){this.chat.ui.toggleClass("focus-user",this.focused.length>0)}}]),e}();e.default=s}).call(e,n(4))},90:function(t,e,n){"use strict";(function(t){function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.UrlFormatter=e.MentionedUserFormatter=e.HtmlTextFormatter=e.GreenTextFormatter=e.EmoteFormatter=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(27),r=function(t){return t&&t.__esModule?t:{default:t}}(u),a=n(134),l="(?:"+a.join("|")+")",c=document.createElement("div"),h=void 0,d=void 0,f=function(){function t(){s(this,t)}return o(t,[{key:"format",value:function(t){return c.textContent=t,c.innerHTML}}]),t}(),A=function(){function t(e){s(this,t);var n=[].concat(i(e.emoticons)).join("|"),o=[].concat(i(e.twitchemotes)).join("|");h=new RegExp("(^|\\s)("+n+")(?=$|\\s)","gm"),d=new RegExp("(^|\\s)("+n+"|"+o+")(?=$|\\s)","gm")}return o(t,[{key:"format",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e&&e.hasFeature(r.default.SUBSCRIBERT0)||!e?d:h;return t.replace(n,'$1<div title="$2" class="chat-emote chat-emote-$2">$2 </div>')}}]),t}(),g=function(){function t(){s(this,t)}return o(t,[{key:"format",value:function(t,e){return e&&0===t.indexOf("&gt;")&&e.hasAnyFeatures(r.default.SUBSCRIBER,r.default.SUBSCRIBERT0,r.default.SUBSCRIBERT1,r.default.SUBSCRIBERT2,r.default.SUBSCRIBERT3,r.default.SUBSCRIBERT4,r.default.NOTABLE,r.default.TRUSTED,r.default.CONTRIBUTOR,r.default.COMPCHALLENGE,r.default.ADMIN,r.default.MODERATOR)&&(t='<span class="greentext">'+t+"</span>"),t}}]),t}(),E=function(){function t(){s(this,t)}return o(t,[{key:"format",value:function(t,e,n){return n&&n.mentioned&&n.mentioned.length>0?t.replace(new RegExp("((?:^|\\s)@?)("+n.mentioned.join("|")+")(?=$|\\s|[.?!,])","igm"),'$1<span class="chat-user">$2</span>'):t}}]),t}(),m=function(){function e(){s(this,e);var n={"p{L}":"\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC","p{N}":"\\u0030-\\u0039\\u00B2\\u00B3\\u00B9\\u00BC-\\u00BE\\u0660-\\u0669\\u06F0-\\u06F9\\u07C0-\\u07C9\\u0966-\\u096F\\u09E6-\\u09EF\\u09F4-\\u09F9\\u0A66-\\u0A6F\\u0AE6-\\u0AEF\\u0B66-\\u0B6F\\u0B72-\\u0B77\\u0BE6-\\u0BF2\\u0C66-\\u0C6F\\u0C78-\\u0C7E\\u0CE6-\\u0CEF\\u0D66-\\u0D75\\u0E50-\\u0E59\\u0ED0-\\u0ED9\\u0F20-\\u0F33\\u1040-\\u1049\\u1090-\\u1099\\u1369-\\u137C\\u16EE-\\u16F0\\u17E0-\\u17E9\\u17F0-\\u17F9\\u1810-\\u1819\\u1946-\\u194F\\u19D0-\\u19DA\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1B50-\\u1B59\\u1BB0-\\u1BB9\\u1C40-\\u1C49\\u1C50-\\u1C59\\u2070\\u2074-\\u2079\\u2080-\\u2089\\u2150-\\u2182\\u2185-\\u2189\\u2460-\\u249B\\u24EA-\\u24FF\\u2776-\\u2793\\u2CFD\\u3007\\u3021-\\u3029\\u3038-\\u303A\\u3192-\\u3195\\u3220-\\u3229\\u3248-\\u324F\\u3251-\\u325F\\u3280-\\u3289\\u32B1-\\u32BF\\uA620-\\uA629\\uA6E6-\\uA6EF\\uA830-\\uA835\\uA8D0-\\uA8D9\\uA900-\\uA909\\uA9D0-\\uA9D9\\uAA50-\\uAA59\\uABF0-\\uABF9\\uFF10-\\uFF19","p{Sc}":"\\u0024\\u00A2-\\u00A5\\u058F\\u060B\\u09F2\\u09F3\\u09FB\\u0AF1\\u0BF9\\u0E3F\\u17DB\\u20A0-\\u20B9\\uA838\\uFDFC\\uFE69\\uFF04\\uFFE0\\uFFE1\\uFFE5\\uFFE6","p{Sk}":"\\u005E\\u0060\\u00A8\\u00AF\\u00B4\\u00B8\\u02C2-\\u02C5\\u02D2-\\u02DF\\u02E5-\\u02EB\\u02ED\\u02EF-\\u02FF\\u0375\\u0384\\u0385\\u1FBD\\u1FBF-\\u1FC1\\u1FCD-\\u1FCF\\u1FDD-\\u1FDF\\u1FED-\\u1FEF\\u1FFD\\u1FFE\\u309B\\u309C\\uA700-\\uA716\\uA720\\uA721\\uA789\\uA78A\\uFBB2-\\uFBC1\\uFF3E\\uFF40\\uFFE3","p{So}":"\\u00A6\\u00A9\\u00AE\\u00B0\\u0482\\u060E\\u060F\\u06DE\\u06E9\\u06FD\\u06FE\\u07F6\\u09FA\\u0B70\\u0BF3-\\u0BF8\\u0BFA\\u0C7F\\u0D79\\u0F01-\\u0F03\\u0F13\\u0F15-\\u0F17\\u0F1A-\\u0F1F\\u0F34\\u0F36\\u0F38\\u0FBE-\\u0FC5\\u0FC7-\\u0FCC\\u0FCE\\u0FCF\\u0FD5-\\u0FD8\\u109E\\u109F\\u1390-\\u1399\\u1940\\u19DE-\\u19FF\\u1B61-\\u1B6A\\u1B74-\\u1B7C\\u2100\\u2101\\u2103-\\u2106\\u2108\\u2109\\u2114\\u2116\\u2117\\u211E-\\u2123\\u2125\\u2127\\u2129\\u212E\\u213A\\u213B\\u214A\\u214C\\u214D\\u214F\\u2195-\\u2199\\u219C-\\u219F\\u21A1\\u21A2\\u21A4\\u21A5\\u21A7-\\u21AD\\u21AF-\\u21CD\\u21D0\\u21D1\\u21D3\\u21D5-\\u21F3\\u2300-\\u2307\\u230C-\\u231F\\u2322-\\u2328\\u232B-\\u237B\\u237D-\\u239A\\u23B4-\\u23DB\\u23E2-\\u23F3\\u2400-\\u2426\\u2440-\\u244A\\u249C-\\u24E9\\u2500-\\u25B6\\u25B8-\\u25C0\\u25C2-\\u25F7\\u2600-\\u266E\\u2670-\\u26FF\\u2701-\\u2767\\u2794-\\u27BF\\u2800-\\u28FF\\u2B00-\\u2B2F\\u2B45\\u2B46\\u2B50-\\u2B59\\u2CE5-\\u2CEA\\u2E80-\\u2E99\\u2E9B-\\u2EF3\\u2F00-\\u2FD5\\u2FF0-\\u2FFB\\u3004\\u3012\\u3013\\u3020\\u3036\\u3037\\u303E\\u303F\\u3190\\u3191\\u3196-\\u319F\\u31C0-\\u31E3\\u3200-\\u321E\\u322A-\\u3247\\u3250\\u3260-\\u327F\\u328A-\\u32B0\\u32C0-\\u32FE\\u3300-\\u33FF\\u4DC0-\\u4DFF\\uA490-\\uA4C6\\uA828-\\uA82B\\uA836\\uA837\\uA839\\uAA77-\\uAA79\\uFDFD\\uFFE4\\uFFE8\\uFFED\\uFFEE\\uFFFC\\uFFFD"},i=n["p{L}"],o=n["p{N}"],u=i+o,r=u+"/\\-+=_&~*%@|#.,:;'?!"+n["p{Sc}"]+n["p{Sk}"]+n["p{So}"],a=u+"/\\-+=_&~*%;"+n["p{Sc}"],c="(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])",h="["+u+"](?:["+u+"\\-]*["+u+"])?",d="(?:"+h+"\\.)+",f="(?:"+d+l+"|(?:\\b"+c+"\\."+c+"\\."+c+"\\."+c+"\\b))",A="\\[["+r+"]*(?:\\[["+r+"]*\\]["+r+"]*)*\\]",g="\\(["+r+"]*(?:\\(["+r+"]*\\)["+r+"]*)*\\)",E=g+"|"+A,m="(?:["+r+"]*(?:"+E+"|["+a+"])+)+",p="(?:"+m+"|/|\\b|$)",v="(?:"+f+"(?::[0-9]+)?/"+p+")|(?:"+f+"(?::[0-9]+)?(?:\\b|$))",S="\\b(https?|ftp|wss?)://"+m,C=S+"|"+v;this.linkregex=new RegExp(C,"gi"),this._elem=t("<div/>")}return o(e,[{key:"encodeUrl",value:function(t){return t.replace(/&/g,"&amp;").replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(/([^\#-~| |!])/g,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}},{key:"format",value:function(t){if(t){var e=this,n="";return/\b(?:NSFL)\b/i.test(t)?n="nsfl-link":/\b(?:NSFW|SPOILER)\b/i.test(t)&&(n="nsfw-link"),t.replace(e.linkregex,function(t,i){i=i?"":"http://";var s=e._elem.html(t).text(),o=s.match(e.linkregex);if(!o)return t;t=e.encodeUrl(o[0]);var u=e.encodeUrl(s.substring(o[0].length));return'<a target="_blank" class="externallink '+n+'" href="'+(i+t)+'" rel="nofollow">'+t+"</a> "+u})}}}]),e}();e.EmoteFormatter=A,e.GreenTextFormatter=g,e.HtmlTextFormatter=f,e.MentionedUserFormatter=E,e.UrlFormatter=m}).call(e,n(4))},91:function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(43),u=function(t){return t&&t.__esModule?t:{default:t}}(o),r=function(){function t(e){var n=this;i(this,t),this.input=e.input,this.history=u.default.read("chat.history")||[],this.index=-1,this.lastinput="",this.maxentries=20,this.input.on("keydown",function(t){t.shiftKey||t.metaKey||t.ctrlKey||38!==t.which&&40!==t.which?n.index=-1:n.show(38===t.which?-1:1)})}return s(t,[{key:"show",value:function(t){if(this.index<0){if(-1!==t)return;if(this.index=this.history.length,this.lastinput=this.input.val(),this.index<=0)return}var e=this.index+t;if(e>=this.history.length||e<0)return void(e>=this.history.length&&(this.input.val(this.lastinput),this.index=-1));this.index=e,this.input.val(this.history[e])}},{key:"add",value:function(t){this.index=-1,this.history.length>0&&this.history[this.history.length-1]===t||(this.history.push(t),this.history.length>this.maxentries&&this.history.slice(-this.maxentries),u.default.write("chat.history",this.history))}}]),t}();e.default=r},92:function(t,e,n){"use strict";(function(t){function i(t){return t&&t.__esModule?t:{default:t}}function s(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){return'<div class="emote"><span title="'+t+'" class="chat-emote chat-emote-'+t+'">'+t+"</span></div>"}function l(e){switch(e.getAttribute("type")){case"checkbox":var n=t(e).is(":checked");return Boolean(e.hasAttribute("data-opposite")?!n:n);case"text":return t(e).val()}}function c(e,n){switch(e.getAttribute("type")){case"checkbox":t(e).prop("checked",Boolean(e.hasAttribute("data-opposite")?!n:n));break;case"text":t(e).val(n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.ChatWhisperUsers=e.ChatEmoteMenu=e.ChatUserMenu=e.ChatSettingsMenu=e.ChatMenu=void 0;var h=function t(e,n,i){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,n);if(void 0===s){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in s)return s.value;var u=s.get;if(void 0!==u)return u.call(i)},d=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),f=n(65),A=i(f),g=n(64),E=i(g),m=n(27),p=i(m),v=n(42),S=i(v),C=n(66),T=i(C),O=n(70),I=i(O),B=n(63),R=n(0),w=i(R),N=function(t){function e(t,n,i){o(this,e);var s=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return s.ui=t,s.btn=n,s.chat=i,s.visible=!1,s.shown=!1,s.ui.find(".scrollable").get().forEach(function(t){return s.scrollplugin=new E.default(i,t)}),s.ui.on("click",".close,.menu-close",s.hide.bind(s)),s.btn.on("click",function(t){s.visible&&i.input.focus(),s.toggle(t)}),s}return r(e,t),d(e,[{key:"show",value:function(){this.visible||(this.visible=!0,this.shown=!0,this.btn.addClass("active"),this.ui.addClass("active"),this.redraw(),this.emit("show"))}},{key:"hide",value:function(){this.visible&&(this.visible=!1,this.btn.removeClass("active"),this.ui.removeClass("active"),this.emit("hide"))}},{key:"toggle",value:function(){var t=this.visible;e.closeMenus(this.chat),t||this.show()}},{key:"redraw",value:function(){this.visible&&this.scrollplugin&&this.scrollplugin.reset()}}],[{key:"closeMenus",value:function(t){t.menus.forEach(function(t){return t.hide()})}}]),e}(S.default),y=function(e){function n(t,e,i){o(this,n);var s=u(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e,i));return s.notificationEl=s.ui.find("#chat-settings-notification-permissions"),s.ui.on("change",'input[type="checkbox"]',function(t){return s.onSettingsChange(t)}),s.ui.on("keypress blur",'textarea[name="customhighlight"]',function(t){return s.onCustomHighlightChange(t)}),s}return r(n,e),d(n,[{key:"onCustomHighlightChange",value:function(e){if(!e.which||13===e.which){var n=t(e.target).val().toString().split(",").map(function(t){return t.trim()});this.chat.settings.set("customhighlight",[].concat(s(new Set(n)))),this.chat.applySettings(!1),this.chat.commitSettings()}}},{key:"onSettingsChange",value:function(e){var n=this,i=l(e.target),s=e.target.getAttribute("name");if(void 0!==i){switch(s){case"profilesettings":!i&&this.chat.authenticated&&t.ajax({url:"/api/chat/me/settings",method:"delete"});break;case"notificationwhisper":case"notificationhighlight":i&&this.notificationPermission().then(function(){return n.updateNotification()})}this.chat.settings.set(s,i),this.chat.applySettings(!1),this.chat.commitSettings()}}},{key:"show",value:function(){var t=this;this.visible||(this.ui.find("input").get().filter(function(e){return t.chat.settings.has(e.getAttribute("name"))}).forEach(function(e){return c(e,t.chat.settings.get(e.getAttribute("name")))}),this.ui.find('textarea[name="customhighlight"]').val(this.chat.settings.get("customhighlight")||""),this.updateNotification()),h(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"show",this).call(this)}},{key:"updateNotification",value:function(){var t="default"===Notification.permission?"required":Notification.permission;this.notificationEl.text("(Permission "+t+")")}},{key:"notificationPermission",value:function(){return new Promise(function(t,e){switch(Notification.permission){case"default":Notification.requestPermission(function(n){switch(n){case"granted":t(n);break;default:e(n)}});break;case"granted":t(Notification.permission);break;case"denied":default:e(Notification.permission)}})}}]),n}(N),M=function(e){function n(e,i,s){o(this,n);var r=u(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,i,s));return r.searchterm="",r.searchcount=0,r.totalcount=0,r.header=r.ui.find("h5 span"),r.container=r.ui.find(".content:first"),r.searchinput=r.ui.find("#chat-user-list-search .form-control:first"),r.container.on("click",".user",function(t){return r.chat.userfocus.toggleFocus(t.target.getAttribute("data-username"))}),r.container.on("click",".whisper-nick",function(e){N.closeMenus(r.chat);var n=r.chat.input.val().toString().trim(),i=t(e.target).parent().data("username");return r.chat.input.val(n+(""===n?"":" ")+i+" ").focus(),!1}),r.chat.source.on("JOIN",function(t){return r.addAndRedraw(t.nick)}),r.chat.source.on("QUIT",function(t){return r.removeAndRedraw(t.nick)}),r.chat.source.on("NAMES",function(t){return r.addAll()}),r.searchinput.on("keyup",(0,I.default)(function(){r.searchterm=r.searchinput.val(),r.filter(),r.redraw()},100)),r}return r(n,e),d(n,[{key:"show",value:function(){h(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"show",this).call(this),this.searchinput.focus()}},{key:"redraw",value:function(){if(this.visible){var t=this.searchterm.length>0;t&&this.totalcount!==this.searchcount?this.header.text("Users ("+this.searchcount+" out of "+this.totalcount+")"):this.header.text("Users ("+this.totalcount+")"),this.ui.toggleClass("search-in",t)}h(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"redraw",this).call(this)}},{key:"addAll",value:function(){var t=this;this.totalcount=0,this.container.empty(),[].concat(s(this.chat.users.keys())).forEach(function(e){return t.addElement(e)}),this.sort(),this.filter(),this.redraw()}},{key:"addAndRedraw",value:function(t){this.hasElement(t)||(this.addElement(t),this.sort(),this.filter(),this.redraw())}},{key:"removeAndRedraw",value:function(t){this.hasElement(t)&&(this.removeElement(t),this.redraw())}},{key:"removeElement",value:function(t){this.container.find('.user[data-username="'+t+'"]').remove(),this.totalcount--}},{key:"addElement",value:function(t){var e=this.chat.users.get(t.toLowerCase()),n=e.username&&""!==e.username?e.username:"Anonymous",i=0===e.features.length?"nofeature":e.features.join(" ");this.container.append('<a data-username="'+e.username+'" class="user '+i+'">'+n+' <i class="fa fa-share-square whisper-nick" aria-hidden="true"></i></a>'),this.totalcount++}},{key:"hasElement",value:function(t){return this.container.find('.user[data-username="'+t+'"]').length>0}},{key:"filter",value:function(){var e=this;this.searchcount=0,this.searchterm&&this.searchterm.length>0?this.container.children(".user").get().forEach(function(n){var i=n.getAttribute("data-username").toLowerCase().indexOf(e.searchterm.toLowerCase())>=0;t(n).toggleClass("found",i),i&&e.searchcount++}):this.container.children(".user").removeClass("found")}},{key:"sort",value:function(){var t=this;this.container.children(".user").get().sort(function(e,n){var i=t.chat.users.get(e.getAttribute("data-username").toLowerCase()),s=t.chat.users.get(n.getAttribute("data-username").toLowerCase());if(!i||!s)return 0;var o=void 0,u=void 0;return o=i.hasFeature(p.default.ADMIN)||i.hasFeature(p.default.VIP),u=s.hasFeature(p.default.ADMIN)||s.hasFeature(p.default.VIP),o>u?-1:o<u?1:(o=i.hasFeature(p.default.BOT2),u=s.hasFeature(p.default.BOT2),o>u?1:o<u?-1:(o=i.hasFeature(p.default.BOT),u=s.hasFeature(p.default.BOT),o>u?1:o<u?-1:(o=i.hasFeature(p.default.BROADCASTER)||i.hasFeature(p.default.BROADCASTER),u=s.hasFeature(p.default.BROADCASTER)||s.hasFeature(p.default.BROADCASTER),o>u?-1:o<u?1:(o=i.hasFeature(p.default.SUBSCRIBER)||i.hasFeature(p.default.SUBSCRIBER),u=s.hasFeature(p.default.SUBSCRIBER)||s.hasFeature(p.default.SUBSCRIBER),o>u?-1:o<u?1:i.nick<s.nick?-1:i.nick>s.nick?1:0))))}).forEach(function(t){return t.parentNode.appendChild(t)})}}]),n}(N),F=function(t){function e(t,n,i){o(this,e);var r=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i));return r.temotes=r.ui.find("#twitch-emotes"),r.demotes=r.ui.find("#destiny-emotes"),r.demotes.append([].concat(s(r.chat.emoticons)).map(a).join("")),r.temotes.append([].concat(s(r.chat.twitchemotes)).map(a).join("")),r.ui.on("click",".chat-emote",function(t){N.closeMenus(i),r.selectEmote(t.target.innerText)}),r}return r(e,t),d(e,[{key:"show",value:function(){this.visible||this.chat.input.focus(),h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"show",this).call(this)}},{key:"selectEmote",value:function(t){var e=this.chat.input.val().toString().trim();this.chat.input.val(e+(""===e?"":" ")+t+" ").focus()}}]),e}(N),k=function(e){function n(e,i,s){o(this,n);var r=u(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,i,s));return r.unread=0,r.empty=t('<span class="empty">No new whispers :(</span>'),r.notif=t('<span id="chat-whisper-notif"></span>'),r.btn.append(r.notif),r.usersEl=e.find("ul:first"),r.usersEl.on("click",".user",function(t){return r.selectConversation(t.target.getAttribute("data-username"))}),r.usersEl.on("click",".remove",function(t){return r.removeConversation(t.target.getAttribute("data-username"))}),r}return r(n,e),d(n,[{key:"removeConversation",value:function(t){var e=t.toLowerCase();this.chat.whispers.delete(e),this.chat.removeWindow(e),this.redraw()}},{key:"selectConversation",value:function(e){var n=this;N.closeMenus(this.chat);var i=e.toLowerCase(),s=this.chat.whispers.get(i);if(s){s.unread=0;var o=this.chat.users.get(i)||new A.default({nick:e}),u=this.chat.getWindow(i);u?this.chat.windowToFront(u.name):(u=new T.default(e,"chat-output-whisper",o.nick).into(this.chat),this.chat.windowToFront(u.name),B.MessageBuilder.info("Messages from "+o.nick).into(this.chat,u),B.MessageBuilder.info("Enter /close to exit this conversation, click the round icons below and center of the chat input to toggle between them                     or close them from the whispers menu.").into(this.chat,u),B.MessageBuilder.info("Loading messages ...").into(this.chat,u),t.ajax({url:"/api/messages/"+encodeURIComponent(o.nick)+"/unread"}).done(function(t){if(0===t.length)B.MessageBuilder.info("No messages returned.").into(n.chat,u);else{var e=(0,w.default)(t[0].timestamp).format("MMMM Do YYYY, h:mm:ss a");B.MessageBuilder.info("Last message "+e).into(n.chat,u),t.reverse().forEach(function(t){var e=n.chat.users.get(t.from.toLowerCase())||new A.default({nick:t.from});B.MessageBuilder.historical(t.message,e,t.timestamp).into(n.chat,u)})}s.loaded=!0}).fail(function(){return B.MessageBuilder.error("Failed to load whispers :(").into(n.chat,u)})),this.chat.input.focus(),this.redraw()}}},{key:"updateNotification",value:function(){var t=this,e=this.unread;this.unread=[].concat(s(this.chat.whispers.entries())).map(function(t){return parseInt(t[1].unread)}).reduce(function(t,e){return t+e},0),e<this.unread&&(this.btn.addClass("ping"),setTimeout(function(){return t.btn.removeClass("ping")},2e3)),this.notif.text(this.unread),this.notif.toggle(this.unread>0);try{var n=window.parent.document.title.replace(/^\([0-9]+\) /,"");window.parent.document.title=this.unread>0?"("+this.unread+") "+n:""+n}catch(t){console.error(t)}}},{key:"redraw",value:function(){var t=this;this.updateNotification(),this.visible&&(this.usersEl.empty(),0===this.chat.whispers.size?this.usersEl.append(this.empty):[].concat(s(this.chat.whispers.entries())).sort(function(t,e){return 0===t[1].unread?1:0===e[1].unread?-1:t[1]===e[1]?0:void 0}).forEach(function(e){return t.addConversation(e[0],e[1].unread)})),h(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"redraw",this).call(this)}},{key:"addConversation",value:function(t,e){var n=this.chat.users.get(t.toLowerCase())||new A.default({nick:t});this.usersEl.append('\n            <li class="conversation unread-'+e+'">\n                <a data-username="'+n.nick.toLowerCase()+'" title="Hide" class="fa fa-times remove"></a>\n                <a data-username="'+n.nick.toLowerCase()+'" class="user">'+n.nick+' <span class="badge">'+e+"</span></a>\n            </li>\n        ")}}]),n}(N);e.ChatMenu=N,e.ChatSettingsMenu=y,e.ChatUserMenu=M,e.ChatEmoteMenu=F,e.ChatWhisperUsers=k}).call(e,n(4))},93:function(t,e,n){"use strict";function i(t,e,n){if(e<=0){var i=o.default.read("chatoptions");i&&Object.keys(i).forEach(function(e){switch(e){case"highlightnicks":t.settings.set("highlightnicks",Object.keys(i[e]));break;default:t.settings.set(e,i[e])}}),i=o.default.read("chatignorelist"),i&&t.settings.set("ignorenicks",Object.keys(i)||[]),i=o.default.read("chat.ignoring"),i&&t.settings.set("ignorenicks",i),i=o.default.read("inputhistory"),i&&o.default.write("chat.history",i),i=t.settings.get("allowNotifications"),void 0!==i&&null!==i&&(t.settings.set("notificationwhisper",i),t.settings.set("notificationhighlight",i),t.settings.delete("allowNotifications")),i=t.settings.get("notificationtimeout"),t.settings.set("notificationtimeout",-1!==i),i=null,o.default.remove("chatoptions"),o.default.remove("inputhistory"),o.default.remove("chatignorelist"),o.default.remove("hiddenhints"),o.default.remove("lasthinttime"),o.default.remove("unreadMessageCount"),o.default.remove("chat.shownhints"),o.default.remove("chat.ignoring"),t.saveSettings()}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(43),o=function(t){return t&&t.__esModule?t:{default:t}}(s);e.default={upgrade:i}},94:function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(42),a=function(t){return t&&t.__esModule?t:{default:t}}(r),l=window.WebSocket||window.MozWebSocket,c=function(t){function e(){i(this,e);var t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.sock=null,t}return o(e,t),u(e,[{key:"connect",value:function(t){var e=this;try{null!==this.sock&&(this.disconnect(),this.sock.onopen=null,this.sock.onclose=null,this.sock.onerror=null,this.sock.onmessage=null,this.sock=null),this.emit("CONNECTING"),this.sock=new l(t),this.sock.onopen=function(t){return e.emit("OPEN",t)},this.sock.onclose=function(t){return e.emit("CLOSE",t)},this.sock.onerror=function(t){return e.emit("ERR","socketerror")},this.sock.onmessage=function(t){return e.parseAndDispatch(t)}}catch(t){return console.error(t),this.emit("ERR","unknown")}}},{key:"connected",value:function(){return this.sock&&this.sock.readyState===this.sock.OPEN}},{key:"disconnect",value:function(){this.sock&&this.sock.readyState!==this.sock.CLOSED&&this.sock.close()}},{key:"parseAndDispatch",value:function(t){var e=t.data.split(" ",1)[0].toUpperCase(),n=t.data.substring(e.length+1),i=null;try{i=JSON.parse(n)}catch(t){i=n}this.emit("DISPATCH",{data:i,event:e}),this.emit(e,i)}},{key:"send",value:function(t,e){var n="string"==typeof e?e:JSON.stringify(e);this.connected()?this.sock.send(t+" "+n):this.emit("ERR","notconnected")}}]),e}(a.default);e.default=c}},[313]);