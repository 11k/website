webpackJsonp([2],{100:function(e,t,n){"use strict";(function(e){function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function e(t,n,i){null===t&&(t=Function.prototype);var u=Object.getOwnPropertyDescriptor(t,n);if(void 0===u){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in u)return u.value;var r=u.get;if(void 0!==r)return r.call(i)},l=n(20),c=i(l),h=n(15),f=i(h),p=function(t){function n(t,i){u(this,n);var r=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,i));return r.header=r.ui.find("h5 span"),r.groupsEl=e("#chat-groups"),r.group1=e('<ul id="chat-group1">'),r.group2=e('<ul id="chat-group2">'),r.group3=e('<ul id="chat-group3">'),r.group4=e('<ul id="chat-group4">'),r.group5=e('<ul id="chat-group5">'),r.groups=[r.group1,r.group2,r.group3,r.group4,r.group5],r.groupsEl.on("click",".user",function(e){return r.chat.userfocus.toggleFocus(e.target.textContent)}),r.chat.source.on("JOIN",function(e){return r.addAndRedraw(e.nick)}),r.chat.source.on("QUIT",function(e){return r.removeAndRedraw(e.nick)}),r.chat.source.on("NAMES",function(e){return r.redraw()}),r}return r(n,t),s(n,[{key:"redraw",value:function(){var e=this;this.visible&&(this.groups.forEach(function(e){return e.detach().children("li").remove()}),this.chat.users.forEach(function(t){var n=t.username;return e.addUser(n)}),this.sort(),this.groupsEl.append(this.groups),this.header.text(this.chat.users.size)),a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"redraw",this).call(this)}},{key:"addAndRedraw",value:function(e){this.visible&&!this.hasUser(e)&&(this.addUser(e),this.sort(),this.redraw())}},{key:"removeAndRedraw",value:function(e){this.visible&&this.hasUser(e)&&(this.removeUser(e),this.redraw())}},{key:"removeUser",value:function(e){return this.groupsEl.find('.user[data-username="'+e+'"]').parent().remove()}},{key:"addUser",value:function(e){var t=this.chat.users.get(e),n='<li><a data-username="'+t.username+'" class="user '+t.features.join(" ")+'">'+t.username+"</a></li>";t.hasFeature(f.default.BOT)||t.hasFeature(f.default.BOT2)?this.group5.append(n):t.hasFeature(f.default.ADMIN)||t.hasFeature(f.default.VIP)?this.group1.append(n):t.hasFeature(f.default.BROADCASTER)?this.group2.append(n):t.hasFeature(f.default.SUBSCRIBER)?this.group3.append(n):this.group4.append(n)}},{key:"hasUser",value:function(e){return this.groupsEl.find('.user[data-username="'+e+'"]').length>0}},{key:"sort",value:function(){this.groups.forEach(function(e){e.children(".user").get().sort(function(e,t){return e.getAttribute("data-username").localeCompare(t.getAttribute("data-username"))}).forEach(function(e){return e.parentNode.appendChild(e)})})}}]),n}(c.default);t.default=p}).call(t,n(3))},101:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(47),a=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;i(this,t);var r=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,"emote"));return r.emotecount=o,r.emotecountui=null,r}return o(t,e),r(t,[{key:"getEmoteCountLabel",value:function(){return"<i class='count'>"+this.emotecount+"</i><i class='x'>X</i> C-C-C-COMBO"}},{key:"html",value:function(){return this.wrap(this.wrapTime()+" "+this.wrapMessage()+' <span class="emotecount">'+this.getEmoteCountLabel()+"<span>")}},{key:"incEmoteCount",value:function(){++this.emotecount;var e="";this.emotecount>=50?e=" x50":this.emotecount>=30?e=" x30":this.emotecount>=20?e=" x20":this.emotecount>=10?e=" x10":this.emotecount>=5&&(e=" x5"),this.emotecountui||(this.emotecountui=this.ui.find(".emotecount")),this.emotecountui.detach().attr("class","emotecount"+e).html(this.getEmoteCountLabel()).appendTo(this.ui)}}]),t}(a.default);t.default=l},102:function(e,t,n){"use strict";(function(e){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var u=Object.getOwnPropertyDescriptor(t,n);if(void 0===u){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in u)return u.value;var r=u.get;if(void 0!==r)return r.call(i)},a=n(48),l=function(e){return e&&e.__esModule?e:{default:e}}(a),c=function(t){function n(e,t,o,r){i(this,n);var s=u(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t,r,"user"));return s.user=t,s.messageid=o,s.isSlashMe=!1,s}return o(n,t),r(n,[{key:"attach",value:function(t){var i=this;return s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"attach",this).call(this,t),this.ui.on("click",".mark-as-read",function(t){e.ajax({type:"POST",url:"/profile/messages/"+encodeURIComponent(i.messageid)+"/open"}).then(function(e){return i.chat.setUnreadMessageCount(e.unread||0)}),i.ui.find(".icon-mail-send").attr("class","icon-mail-open-document"),i.ui.find(".message-actions").remove(),t.preventDefault(),t.stopPropagation()})}},{key:"wrapUser",value:function(e){return' <i class="icon-mail-send" title="Received Message"></i> <a class="user">'+e.username+"</a>"}},{key:"html",value:function(){var e=[],t={};return e.push("private-message"),t["data-messageid"]=this.messageid,t["data-username"]=this.user.username.toLowerCase(),this.wrap(this.wrapTime()+' <a class="user">'+this.user.username+"</a> "+this.wrapMessage()+'<span class="message-actions"><a href="#" class="mark-as-read">Mark as read <i class="fa fa-check-square-o"></i></a></span><i class="speech-arrow"></i>',e,t)}}]),n}(l.default);t.default=c}).call(t,n(3))},103:function(e,t,n){"use strict";(function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function t(e){n(this,t),this.ui=null,this.chat=null,this.message=e,this.type="ui"}return i(t,[{key:"resolve",value:function(){return this}},{key:"attach",value:function(t,n){return this.chat=t,this.ui=e(this.html()),this.ui}},{key:"wrap",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.unshift("msg-"+this.type),i.class=n.join(" "),e("<div>",i).html(t)[0].outerHTML}},{key:"html",value:function(){return this.wrap(this.message)}}]),t}();t.default=u}).call(t,n(3))},104:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(46),l=i(a),c=n(32),h=i(c),f=window.WebSocket||window.MozWebSocket,p=function(e){function t(e,n){u(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.log=h.default.make(i),i.sock=null,i.server=n,i.chat=e,i}return r(t,e),s(t,[{key:"connect",value:function(){var e=this;try{this.sock=new f(this.server),this.sock.onopen=function(t){return e.emit("OPEN",t)},this.sock.onclose=function(t){return e.emit("CLOSE",t)},this.sock.onerror=function(t){return e.emit("ERR","socketerror")},this.sock.onmessage=function(t){return e.parseAndDispatch(t)}}catch(e){return this.log.error(e),this.emit("ERR","unknown")}}},{key:"parseAndDispatch",value:function(e){var t=e.data.split(" ",1)[0].toUpperCase(),n=e.data.substring(t.length+1),i=null;try{i=JSON.parse(n)}catch(e){i=n}this.log.log(t,i),this.emit("DISPATCH",i),this.emit(t,i)}},{key:"send",value:function(e,t){var n="string"==typeof t?t:JSON.stringify(t);this.sock.send(e+" "+n)}}]),t}(l.default);t.default=p},105:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t){i(this,e),this.nick=t.nick||"",this.username=t.nick||"",this.features=t.features||[]}return u(e,[{key:"hasAnyFeatures",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=!0,u=!1,o=void 0;try{for(var r,s=t[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var a=r.value;if(-1!==this.features.indexOf(a))return!0}}catch(e){u=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(u)throw o}}return!1}},{key:"hasFeature",value:function(e){return this.hasAnyFeatures(e)}}]),e}();e.exports=o},128:function(e,t,n){var i=n(129);e.exports=function(e,t,n){function u(){var c=i()-a;c<t&&c>0?o=setTimeout(u,t-c):(o=null,n||(l=e.apply(s,r),o||(s=r=null)))}var o,r,s,a,l;return null==t&&(t=100),function(){s=this,r=arguments,a=i();var c=n&&!o;return o||(o=setTimeout(u,t)),c&&(l=e.apply(s,r),s=r=null),l}}},129:function(e,t){function n(){return(new Date).getTime()}e.exports=Date.now||n},146:function(e,t){e.exports={destiny:["Dravewin","INFESTINY","FIDGETLOL","Hhhehhehe","GameOfThrows","WORTH","FeedNathan","Abathur","LUL","Heimerdonger","SoSad","DURRSTINY","SURPRISE","NoTears","OverRustle","DuckerZ","Kappa","Klappa","DappaKappa","BibleThump","AngelThump","FrankerZ","BasedGod","OhKrappa","SoDoge","WhoahDude","MotherFuckinGame","DaFeels","UWOTM8","CallCatz","CallChad","DatGeoff","Disgustiny","FerretLOL","Sippy","DestiSenpaii","Nappa","DAFUK","AYYYLMAO","DANKMEMES","MLADY","SOTRIGGERED","MASTERB8","NOTMYTEMPO","LIES","LeRuse","YEE","SWEATSTINY","PEPE","CheekerZ","SpookerZ","SLEEPSTINY","PICNIC","Memegasm","WEEWOO","KappaRoss","ASLAN","DJAslan","TRUMPED","BASEDWATM8","BERN","HmmStiny","PepoThink"],twitch:["nathanD","nathanDank","nathanF","nathanNotears","nathanPepe","nathanRustle","nathanTowel","nathanWat","nathanThinking","nathanRuse","nathanYee","nathanWeeb"]}},147:function(e,t){e.exports=["NORTHWESTERNMUTUAL","TRAVELERSINSURANCE","AMERICANEXPRESS","KERRYPROPERTIES","SANDVIKCOROMANT","AFAMILYCOMPANY","AMERICANFAMILY","BANANAREPUBLIC","CANCERRESEARCH","COOKINGCHANNEL","KERRYLOGISTICS","WEATHERCHANNEL","INTERNATIONAL","LIFEINSURANCE","ORIENTEXPRESS","SPREADBETTING","TRAVELCHANNEL","WOLTERSKLUWER","CONSTRUCTION","LPLFINANCIAL","PAMPEREDCHEF","SCHOLARSHIPS","VERSICHERUNG","ACCOUNTANTS","BARCLAYCARD","BLACKFRIDAY","BLOCKBUSTER","BRIDGESTONE","CALVINKLEIN","CONTRACTORS","CREDITUNION","ENGINEERING","ENTERPRISES","FOODNETWORK","INVESTMENTS","KERRYHOTELS","LAMBORGHINI","MOTORCYCLES","OLAYANGROUP","PHOTOGRAPHY","PLAYSTATION","PRODUCTIONS","PROGRESSIVE","REDUMBRELLA","RIGHTATHOME","WILLIAMHILL","ACCOUNTANT","APARTMENTS","ASSOCIATES","BASKETBALL","BNPPARIBAS","BOEHRINGER","CAPITALONE","CONSULTING","CREDITCARD","CUISINELLA","EUROVISION","EXTRASPACE","FOUNDATION","HEALTHCARE","IMMOBILIEN","INDUSTRIES","MANAGEMENT","MITSUBISHI","NATIONWIDE","NEWHOLLAND","NEXTDIRECT","ONYOURSIDE","PROPERTIES","PROTECTION","PRUDENTIAL","REALESTATE","REPUBLICAN","RESTAURANT","SCHAEFFLER","SWIFTCOVER","TATAMOTORS","TECHNOLOGY","TELEFONICA","UNIVERSITY","VISTAPRINT","VLAANDEREN","VOLKSWAGEN","ACCENTURE","ALFAROMEO","ALLFINANZ","AMSTERDAM","ANALYTICS","AQUARELLE","BARCELONA","BLOOMBERG","CHRISTMAS","COMMUNITY","DIRECTORY","EDUCATION","EQUIPMENT","FAIRWINDS","FINANCIAL","FIRESTONE","FRESENIUS","FRONTDOOR","FUJIXEROX","FURNITURE","GOLDPOINT","GOODHANDS","HISAMITSU","HOMEDEPOT","HOMEGOODS","HOMESENSE","HONEYWELL","INSTITUTE","INSURANCE","KUOKGROUP","LADBROKES","LANCASTER","LANDROVER","LIFESTYLE","MARKETING","MARSHALLS","MCDONALDS","MELBOURNE","MICROSOFT","MONTBLANC","PANASONIC","PASSAGENS","PRAMERICA","RICHARDLI","SCJOHNSON","SHANGRILA","SOLUTIONS","STATEBANK","STATEFARM","STOCKHOLM","TRAVELERS","VACATIONS","YODOBASHI","ABUDHABI","AIRFORCE","ALLSTATE","ATTORNEY","BARCLAYS","BAREFOOT","BARGAINS","BASEBALL","BOUTIQUE","BRADESCO","BROADWAY","BRUSSELS","BUDAPEST","BUILDERS","BUSINESS","CAPETOWN","CATERING","CATHOLIC","CHRYSLER","CIPRIANI","CITYEATS","CLEANING","CLINIQUE","CLOTHING","COMMBANK","COMPUTER","DELIVERY","DELOITTE","DEMOCRAT","DIAMONDS","DISCOUNT","DISCOVER","DOWNLOAD","ENGINEER","ERICSSON","ESURANCE","EVERBANK","EXCHANGE","FEEDBACK","FIDELITY","FIRMDALE","FOOTBALL","FRONTIER","GOODYEAR","GRAINGER","GRAPHICS","GUARDIAN","HDFCBANK","HELSINKI","HOLDINGS","HOSPITAL","INFINITI","IPIRANGA","ISTANBUL","JPMORGAN","LIGHTING","LUNDBECK","MARRIOTT","MASERATI","MCKINSEY","MEMORIAL","MORTGAGE","MOVISTAR","OBSERVER","PARTNERS","PHARMACY","PICTURES","PLUMBING","PROPERTY","REDSTONE","RELIANCE","SAARLAND","SAMSCLUB","SECURITY","SERVICES","SHOPPING","SHOWTIME","SOFTBANK","SOFTWARE","STCGROUP","SUPPLIES","SYMANTEC","TELECITY","TRAINING","UCONNECT","VANGUARD","VENTURES","VERISIGN","WOODSIDE","YOKOHAMA","ABOGADO","ACADEMY","AGAKHAN","ALIBABA","ANDROID","ATHLETA","AUCTION","AUDIBLE","AUSPOST","AVIANCA","BANAMEX","BAUHAUS","BENTLEY","BESTBUY","BOOKING","BROTHER","BUGATTI","CAPITAL","CARAVAN","CAREERS","CARTIER","CHANNEL","CHINTAI","CITADEL","CLUBMED","COLLEGE","COLOGNE","COMCAST","COMPANY","COMPARE","CONTACT","COOKING","CORSICA","COUNTRY","COUPONS","COURSES","CRICKET","CRUISES","DENTIST","DIGITAL","DOMAINS","EXPOSED","EXPRESS","FARMERS","FASHION","FERRARI","FERRERO","FINANCE","FISHING","FITNESS","FLIGHTS","FLORIST","FLOWERS","FORSALE","FROGANS","FUJITSU","GALLERY","GENTING","GODADDY","GUITARS","HAMBURG","HANGOUT","HITACHI","HOLIDAY","HOSTING","HOTELES","HOTMAIL","HYUNDAI","ISELECT","ISMAILI","JEWELRY","JUNIPER","KITCHEN","KOMATSU","LACAIXA","LANCOME","LANXESS","LASALLE","LATROBE","LECLERC","LIAISON","LIMITED","LINCOLN","MARKETS","METLIFE","MONSTER","NETBANK","NETFLIX","NETWORK","NEUSTAR","OKINAWA","OLDNAVY","ORGANIC","ORIGINS","PANERAI","PHILIPS","PIONEER","POLITIE","REALTOR","RECIPES","RENTALS","REVIEWS","REXROTH","SAMSUNG","SANDVIK","SCHMIDT","SCHWARZ","SCIENCE","SHIKSHA","SHRIRAM","SINGLES","SPIEGEL","STAPLES","STARHUB","STATOIL","STORAGE","SUPPORT","SURGERY","SYSTEMS","TEMASEK","THEATER","THEATRE","TICKETS","TIFFANY","TOSHIBA","TRADING","WALMART","WANGGOU","WATCHES","WEATHER","WEBSITE","WEDDING","WHOSWHO","WINDOWS","WINNERS","XFINITY","YAMAXUN","YOUTUBE","ZUERICH","ABARTH","ABBOTT","ABBVIE","ACTIVE","AFRICA","AGENCY","AIRBUS","AIRTEL","ALIPAY","ALSACE","ALSTOM","ANQUAN","ARAMCO","AUTHOR","BAYERN","BEAUTY","BERLIN","BHARTI","BLANCO","BOSTIK","BOSTON","BROKER","CAMERA","CAREER","CASEIH","CASINO","CENTER","CHANEL","CHROME","CHURCH","CIRCLE","CLAIMS","CLINIC","COFFEE","COMSEC","CONDOS","COUPON","CREDIT","CRUISE","DATING","DATSUN","DEALER","DEGREE","DENTAL","DESIGN","DIRECT","DOCTOR","DUNLOP","DUPONT","DURBAN","EMERCK","ENERGY","ESTATE","EVENTS","EXPERT","FAMILY","FLICKR","FUTBOL","GALLUP","GARDEN","GEORGE","GIVING","GLOBAL","GOOGLE","GRATIS","HEALTH","HERMES","HIPHOP","HOCKEY","HUGHES","IMAMAT","INSURE","INTUIT","JAGUAR","JOBURG","JUEGOS","KAUFEN","KINDER","KINDLE","KOSHER","LANCIA","LATINO","LAWYER","LEFRAK","LIVING","LOCKER","LONDON","LUXURY","MADRID","MAISON","MAKEUP","MARKET","MATTEL","MOBILE","MOBILY","MONASH","MORMON","MOSCOW","MUSEUM","MUTUAL","NAGOYA","NATURA","NISSAN","NISSAY","NORTON","NOWRUZ","OFFICE","OLAYAN","ONLINE","ORACLE","ORANGE","OTSUKA","PFIZER","PHOTOS","PHYSIO","PIAGET","PICTET","QUEBEC","RACING","REALTY","REISEN","REPAIR","REPORT","REVIEW","ROCHER","ROGERS","RYUKYU","SAFETY","SAKURA","SANOFI","SCHOOL","SCHULE","SECURE","SELECT","SHOUJI","SOCCER","SOCIAL","STREAM","STUDIO","SUPPLY","SUZUKI","SWATCH","SYDNEY","TAIPEI","TAOBAO","TARGET","TATTOO","TENNIS","TIENDA","TJMAXX","TKMAXX","TOYOTA","TRAVEL","UNICOM","VIAJES","VIKING","VILLAS","VIRGIN","VISION","VOTING","VOYAGE","VUELOS","WALTER","WARMAN","WEBCAM","XIHUAN","XPERIA","YACHTS","YANDEX","ZAPPOS","ACTOR","ADULT","AETNA","AMFAM","AMICA","APPLE","ARCHI","AUDIO","AUTOS","AZURE","BAIDU","BEATS","BIBLE","BINGO","BLACK","BOATS","BOOTS","BOSCH","BUILD","CANON","CARDS","CHASE","CHEAP","CHLOE","CISCO","CITIC","CLICK","CLOUD","COACH","CODES","CROWN","CYMRU","DABUR","DANCE","DEALS","DELTA","DODGE","DRIVE","DUBAI","EARTH","EDEKA","EMAIL","EPOST","EPSON","FAITH","FEDEX","FINAL","FOREX","FORUM","GALLO","GAMES","GIFTS","GIVES","GLADE","GLASS","GLOBO","GMAIL","GREEN","GRIPE","GROUP","GUCCI","GUIDE","HOMES","HONDA","HORSE","HOUSE","HYATT","IKANO","INTEL","IRISH","IVECO","JETZT","KOELN","KYOTO","LAMER","LEASE","LEGAL","LEXUS","LILLY","LINDE","LIPSY","LIXIL","LOANS","LOCUS","LOTTE","LOTTO","LUPIN","MACYS","MANGO","MEDIA","MIAMI","MONEY","MOPAR","MOVIE","NADEX","NEXUS","NIKON","NINJA","NOKIA","NOWTV","OMEGA","OSAKA","PARIS","PARTS","PARTY","PHONE","PHOTO","PIZZA","PLACE","POKER","PRAXI","PRESS","PRIME","PROMO","QUEST","RADIO","REHAB","REISE","RICOH","ROCKS","RODEO","SALON","SENER","SEVEN","SHARP","SHELL","SHOES","SKYPE","SLING","SMART","SMILE","SOLAR","SPACE","STADA","STORE","STUDY","STYLE","SUCKS","SWISS","TATAR","TIRES","TIROL","TMALL","TODAY","TOKYO","TOOLS","TORAY","TOTAL","TOURS","TRADE","TRUST","TUNES","TUSHU","UBANK","VEGAS","VIDEO","VISTA","VODKA","VOLVO","WALES","WATCH","WEBER","WEIBO","WORKS","WORLD","XEROX","YAHOO","ZIPPO","local","onion","AARP","ABLE","ADAC","AERO","AIGO","AKDN","ALLY","AMEX","ARMY","ARPA","ARTE","ASDA","ASIA","AUDI","AUTO","BABY","BAND","BANK","BBVA","BEER","BEST","BIKE","BING","BLOG","BLUE","BOFA","BOND","BOOK","BUZZ","CAFE","CALL","CAMP","CARE","CARS","CASA","CASE","CASH","CBRE","CERN","CHAT","CITI","CITY","CLUB","COOL","COOP","CYOU","DATA","DATE","DCLK","DEAL","DELL","DESI","DIET","DISH","DOCS","DOHA","DUCK","DUNS","DVAG","ERNI","FAGE","FAIL","FANS","FARM","FAST","FIAT","FIDO","FILM","FIRE","FISH","FLIR","FOOD","FORD","FREE","FUND","GAME","GBIZ","GENT","GGEE","GIFT","GMBH","GOLD","GOLF","GOOG","GUGE","GURU","HAIR","HAUS","HDFC","HELP","HERE","HGTV","HOST","HSBC","ICBC","IEEE","IMDB","IMMO","INFO","ITAU","JAVA","JEEP","JOBS","JPRS","KDDI","KIWI","KPMG","KRED","LAND","LEGO","LGBT","LIDL","LIFE","LIKE","LIMO","LINK","LIVE","LOAN","LOFT","LOVE","LTDA","LUXE","MAIF","MEET","MEME","MENU","MINI","MINT","MOBI","MODA","MOTO","MTPC","NAME","NAVY","NEWS","NEXT","NICO","NIKE","OLLO","OPEN","PAGE","PARS","PCCW","PICS","PING","PINK","PLAY","PLUS","POHL","PORN","POST","PROD","PROF","QPON","RAID","READ","REIT","RENT","REST","RICH","RMIT","ROOM","RSVP","RUHR","SAFE","SALE","SAPO","SARL","SAVE","SAXO","SCOR","SCOT","SEAT","SEEK","SEXY","SHAW","SHIA","SHOP","SHOW","SILK","SINA","SITE","SKIN","SNCF","SOHU","SONG","SONY","SPOT","STAR","SURF","TALK","TAXI","TEAM","TECH","TEVA","TIAA","TIPS","TOWN","TOYS","TUBE","VANA","VISA","VIVA","VIVO","VOTE","VOTO","WANG","WEIR","WIEN","WIKI","WINE","WORK","XBOX","YOGA","ZARA","ZERO","ZONE","exit","zkey","AAA","ABB","ABC","ACO","ADS","AEG","AFL","AIG","ANZ","AOL","APP","ART","AWS","AXA","BAR","BBC","BBT","BCG","BCN","BET","BID","BIO","BIZ","BMS","BMW","BNL","BOM","BOO","BOT","BOX","BUY","BZH","CAB","CAL","CAM","CAR","CAT","CBA","CBN","CBS","CEB","CEO","CFA","CFD","COM","CRS","CSC","DAD","DAY","DDS","DEV","DHL","DIY","DNP","DOG","DOT","DTV","DVR","EAT","ECO","EDU","ESQ","EUS","FAN","FIT","FLY","FOO","FOX","FRL","FTR","FUN","FYI","GAL","GAP","GDN","GEA","GLE","GMO","GMX","GOO","GOP","GOT","GOV","HBO","HIV","HKT","HOT","HOW","HTC","IBM","ICE","ICU","IFM","ING","INK","INT","IST","ITV","IWC","JCB","JCP","JIO","JLC","JLL","JMP","JNJ","JOT","JOY","KFH","KIA","KIM","KPN","KRD","LAT","LAW","LDS","LOL","LPL","LTD","MAN","MBA","MCD","MED","MEN","MEO","MIL","MIT","MLB","MLS","MMA","MOE","MOI","MOM","MOV","MSD","MTN","MTR","NAB","NBA","NEC","NET","NEW","NFL","NGO","NHK","NOW","NRA","NRW","NTT","NYC","OBI","OFF","ONE","ONG","ONL","OOO","ORG","OTT","OVH","PAY","PET","PID","PIN","PNC","PRO","PRU","PUB","PWC","QVC","RED","REN","RIL","RIO","RIP","RUN","RWE","SAP","SAS","SBI","SBS","SCA","SCB","SES","SEW","SEX","SFR","SKI","SKY","SOY","SRL","SRT","STC","TAB","TAX","TCI","TDK","TEL","THD","TJX","TOP","TRV","TUI","TVS","UBS","UNO","UOL","UPS","VET","VIG","VIN","VIP","WED","WIN","WME","WOW","WTC","WTF","XIN","XXX","XYZ","YOU","YUN","ZIP","bit","gnu","i2p","AC","AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BM","BN","BO","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","ER","ES","ET","EU","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","ST","SU","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UK","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW"]},148:function(e,t,n){var i,u;/*! nanoScrollerJS - v0.8.7 - 2015
* http://jamesflorentino.github.com/nanoScrollerJS/
* Copyright (c) 2015 James Florentino; Licensed MIT */
!function(o){i=[n(3)],void 0!==(u=function(e){return o(e,window,document)}.apply(t,i))&&(e.exports=u)}(function(e,t,n){"use strict";var i,u,o,r,s,a,l,c,h,f,p,d,A,E,g,O,m,S,C,T,v,y,I,R,b,N,B,F;T={paneClass:"nano-pane",sliderClass:"nano-slider",contentClass:"nano-content",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null},g="scroll",l="mousedown",c="mouseenter",h="mousemove",p="mousewheel",f="mouseup",E="resize",s="drag",a="enter",m="up",A="panedown",o="DOMMouseScroll",r="down",S="wheel",O="touchmove",i="Microsoft Internet Explorer"===t.navigator.appName&&/msie 7./i.test(t.navigator.appVersion)&&t.ActiveXObject,u=null,R=t.requestAnimationFrame,C=t.cancelAnimationFrame,N=n.createElement("div").style,F=function(){var e,t,n,i;for(t=["t","webkitT","MozT","msT","OT"],e=n=0,i=t.length;n<i;e=++n)if(t[e],t[e]+"ransform"in N)return t[e].substr(0,t[e].length-1);return!1}(),B=function(e){return!1!==F&&(""===F?e:F+e.charAt(0).toUpperCase()+e.substr(1))},b=B("transform"),y=!1!==b,v=function(){var e,t,i;return e=n.createElement("div"),t=e.style,t.position="absolute",t.width="100px",t.height="100px",t.overflow=g,t.top="-9999px",n.body.appendChild(e),i=e.offsetWidth-e.clientWidth,n.body.removeChild(e),i},I=function(){var e,n,i;return n=t.navigator.userAgent,!!(e=/(?=.+Mac OS X)(?=.+Firefox)/.test(n))&&(i=/Firefox\/\d{2}\./.exec(n),i&&(i=i[0].replace(/\D+/g,"")),e&&+i>23)},d=function(){function d(i,o){this.el=i,this.options=o,u||(u=v()),this.$el=e(this.el),this.doc=e(this.options.documentContext||n),this.win=e(this.options.windowContext||t),this.body=this.doc.find("body"),this.$content=this.$el.children("."+this.options.contentClass),this.$content.attr("tabindex",this.options.tabIndex||0),this.content=this.$content[0],this.previousPosition=0,this.options.iOSNativeScrolling&&null!=this.el.style.WebkitOverflowScrolling?this.nativeScrolling():this.generate(),this.createEvents(),this.addEvents(),this.reset()}return d.prototype.preventScrolling=function(e,t){if(this.isActive)if(e.type===o)(t===r&&e.originalEvent.detail>0||t===m&&e.originalEvent.detail<0)&&e.preventDefault();else if(e.type===p){if(!e.originalEvent||!e.originalEvent.wheelDelta)return;(t===r&&e.originalEvent.wheelDelta<0||t===m&&e.originalEvent.wheelDelta>0)&&e.preventDefault()}},d.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"}),this.iOSNativeScrolling=!0,this.isActive=!0},d.prototype.updateScrollValues=function(){var e,t;e=this.content,this.maxScrollTop=e.scrollHeight-e.clientHeight,this.prevScrollTop=this.contentScrollTop||0,this.contentScrollTop=e.scrollTop,t=this.contentScrollTop>this.previousPosition?"down":this.contentScrollTop<this.previousPosition?"up":"same",this.previousPosition=this.contentScrollTop,"same"!==t&&this.$el.trigger("update",{position:this.contentScrollTop,maximum:this.maxScrollTop,direction:t}),this.iOSNativeScrolling||(this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=0===this.maxScrollTop?0:this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},d.prototype.setOnScrollStyles=function(){var e;y?(e={},e[b]="translate(0, "+this.sliderTop+"px)"):e={top:this.sliderTop},R?(C&&this.scrollRAF&&C(this.scrollRAF),this.scrollRAF=R(function(t){return function(){return t.scrollRAF=null,t.slider.css(e)}}(this))):this.slider.css(e)},d.prototype.createEvents=function(){this.events={down:function(e){return function(t){return e.isBeingDragged=!0,e.offsetY=t.pageY-e.slider.offset().top,e.slider.is(t.target)||(e.offsetY=0),e.pane.addClass("active"),e.doc.bind(h,e.events[s]).bind(f,e.events[m]),e.body.bind(c,e.events[a]),!1}}(this),drag:function(e){return function(t){return e.sliderY=t.pageY-e.$el.offset().top-e.paneTop-(e.offsetY||.5*e.sliderHeight),e.scroll(),e.contentScrollTop>=e.maxScrollTop&&e.prevScrollTop!==e.maxScrollTop?e.$el.trigger("scrollend"):0===e.contentScrollTop&&0!==e.prevScrollTop&&e.$el.trigger("scrolltop"),!1}}(this),up:function(e){return function(t){return e.isBeingDragged=!1,e.pane.removeClass("active"),e.doc.unbind(h,e.events[s]).unbind(f,e.events[m]),e.body.unbind(c,e.events[a]),!1}}(this),resize:function(e){return function(t){e.reset()}}(this),panedown:function(e){return function(t){return e.sliderY=(t.offsetY||t.originalEvent.layerY)-.5*e.sliderHeight,e.scroll(),e.events.down(t),!1}}(this),scroll:function(e){return function(t){e.updateScrollValues(),e.isBeingDragged||(e.iOSNativeScrolling||(e.sliderY=e.sliderTop,e.setOnScrollStyles()),null!=t&&(e.contentScrollTop>=e.maxScrollTop?(e.options.preventPageScrolling&&e.preventScrolling(t,r),e.prevScrollTop!==e.maxScrollTop&&e.$el.trigger("scrollend")):0===e.contentScrollTop&&(e.options.preventPageScrolling&&e.preventScrolling(t,m),0!==e.prevScrollTop&&e.$el.trigger("scrolltop"))))}}(this),wheel:function(e){return function(t){var n;if(null!=t)return n=t.delta||t.wheelDelta||t.originalEvent&&t.originalEvent.wheelDelta||-t.detail||t.originalEvent&&-t.originalEvent.detail,n&&(e.sliderY+=-n/3),e.scroll(),!1}}(this),enter:function(e){return function(t){var n;if(e.isBeingDragged)return 1!==(t.buttons||t.which)?(n=e.events)[m].apply(n,arguments):void 0}}(this)}},d.prototype.addEvents=function(){var e;this.removeEvents(),e=this.events,this.options.disableResize||this.win.bind(E,e[E]),this.iOSNativeScrolling||(this.slider.bind(l,e[r]),this.pane.bind(l,e[A]).bind(p+" "+o,e[S])),this.$content.bind(g+" "+p+" "+o+" "+O,e[g])},d.prototype.removeEvents=function(){var e;e=this.events,this.win.unbind(E,e[E]),this.iOSNativeScrolling||(this.slider.unbind(),this.pane.unbind()),this.$content.unbind(g+" "+p+" "+o+" "+O,e[g])},d.prototype.generate=function(){var e,n,i,o,r,s;return i=this.options,r=i.paneClass,s=i.sliderClass,i.contentClass,(o=this.$el.children("."+r)).length||o.children("."+s).length||this.$el.append('<div class="'+r+'"><div class="'+s+'" /></div>'),this.pane=this.$el.children("."+r),this.slider=this.pane.find("."+s),0===u&&I()?(n=t.getComputedStyle(this.content,null).getPropertyValue("padding-right").replace(/[^0-9.]+/g,""),e={right:-14,paddingRight:+n+14}):u&&(e={right:-u},this.$el.addClass("has-scrollbar")),null!=e&&this.$content.css(e),this},d.prototype.restore=function(){this.stopped=!1,this.iOSNativeScrolling||this.pane.show(),this.addEvents()},d.prototype.reset=function(){var e,t,n,o,r,s,a,l,c,h,f,p;return this.iOSNativeScrolling?void(this.contentHeight=this.content.scrollHeight):(this.$el.find("."+this.options.paneClass).length||this.generate().stop(),this.stopped&&this.restore(),e=this.content,o=e.style,r=o.overflowY,i&&this.$content.css({height:this.$content.height()}),t=e.scrollHeight+u,h=parseInt(this.$el.css("max-height"),10),h>0&&(this.$el.height(""),this.$el.height(e.scrollHeight>h?h:e.scrollHeight)),a=this.pane.outerHeight(!1),c=parseInt(this.pane.css("top"),10),s=parseInt(this.pane.css("bottom"),10),l=a+c+s,p=Math.round(l/t*a),p<this.options.sliderMinHeight?p=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&p>this.options.sliderMaxHeight&&(p=this.options.sliderMaxHeight),r===g&&o.overflowX!==g&&(p+=u),this.maxSliderTop=l-p,this.contentHeight=t,this.paneHeight=a,this.paneOuterHeight=l,this.sliderHeight=p,this.paneTop=c,this.slider.height(p),this.events.scroll(),this.pane.show(),this.isActive=!0,e.scrollHeight===e.clientHeight||this.pane.outerHeight(!0)>=e.scrollHeight&&r!==g?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===e.scrollHeight&&r===g?this.slider.hide():this.slider.show(),this.pane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),n=this.$content.css("position"),"static"!==n&&"relative"!==n||(f=parseInt(this.$content.css("right"),10))&&this.$content.css({right:"",marginRight:f}),this)},d.prototype.scroll=function(){if(this.isActive)return this.sliderY=Math.max(0,this.sliderY),this.sliderY=Math.min(this.maxSliderTop,this.sliderY),this.$content.scrollTop(this.maxScrollTop*this.sliderY/this.maxSliderTop),this.iOSNativeScrolling||(this.updateScrollValues(),this.setOnScrollStyles()),this},d.prototype.scrollBottom=function(e){if(this.isActive)return this.$content.scrollTop(this.contentHeight-this.$content.height()-e).trigger(p),this.stop().restore(),this},d.prototype.scrollTop=function(e){if(this.isActive)return this.$content.scrollTop(+e).trigger(p),this.stop().restore(),this},d.prototype.scrollTo=function(e){if(this.isActive)return this.scrollTop(this.$el.find(e).get(0).offsetTop),this},d.prototype.stop=function(){return C&&this.scrollRAF&&(C(this.scrollRAF),this.scrollRAF=null),this.stopped=!0,this.removeEvents(),this.iOSNativeScrolling||this.pane.hide(),this},d.prototype.destroy=function(){return this.stopped||this.stop(),!this.iOSNativeScrolling&&this.pane.length&&this.pane.remove(),i&&this.$content.height(""),this.$content.removeAttr("tabindex"),this.$el.hasClass("has-scrollbar")&&(this.$el.removeClass("has-scrollbar"),this.$content.css({right:""})),this},d.prototype.flash=function(){if(!this.iOSNativeScrolling&&this.isActive)return this.reset(),this.pane.addClass("flashed"),setTimeout(function(e){return function(){e.pane.removeClass("flashed")}}(this),this.options.flashDelay),this},d}(),e.fn.nanoScroller=function(t){return this.each(function(){var n,i;if((i=this.nanoscroller)||(n=e.extend({},T,t),this.nanoscroller=i=new d(this,n)),t&&"object"==typeof t){if(e.extend(i.options,t),null!=t.scrollBottom)return i.scrollBottom(t.scrollBottom);if(null!=t.scrollTop)return i.scrollTop(t.scrollTop);if(t.scrollTo)return i.scrollTo(t.scrollTo);if("bottom"===t.scroll)return i.scrollBottom(0);if("top"===t.scroll)return i.scrollTop(0);if(t.scroll&&t.scroll instanceof e)return i.scrollTo(t.scroll);if(t.stop)return i.stop();if(t.destroy)return i.destroy();if(t.flash)return i.flash()}return i.reset()})},e.fn.nanoScroller.Constructor=d})},15:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={PROTECTED:"protected",SUBSCRIBER:"subscriber",SUBSCRIBERT0:"flair9",SUBSCRIBERT1:"flair13",SUBSCRIBERT2:"flair1",SUBSCRIBERT3:"flair3",SUBSCRIBERT4:"flair8",VIP:"vip",MODERATOR:"moderator",ADMIN:"admin",BROADCASTER:"flair12",BOT:"bot",BOT2:"flair11",NOTABLE:"flair2",TRUSTED:"flair4",CONTRIBUTOR:"flair5",COMPCHALLENGE:"flair6",EVE:"flair7",SC2:"flair10"}},19:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t){i(this,e),this.chat=t}return u(e,[{key:"format",value:function(e,t){return e}}]),e}();t.default=o},20:function(e,t,n){"use strict";(function(e){function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(68),l=i(a),c=n(46),h=i(c),f=function(t){function n(t,i){u(this,n);var r=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return r.ui=e(t),r.chat=i,r.btn=null,r.visible=!1,r.shown=!1,r.ui.find(".scrollable").get().forEach(function(e){return r.scrollPlugin=new l.default(e)}),r.ui.on("click",".close",r.hide.bind(r)),r}return r(n,t),s(n,[{key:"show",value:function(t){this.visible||(this.visible=!0,this.btn=e(t),this.shown=!0,this.btn.addClass("active"),this.ui.addClass("active"),this.redraw(),this.emit("show"))}},{key:"hide",value:function(){this.visible&&(this.visible=!1,this.btn.removeClass("active"),this.ui.removeClass("active"),this.emit("hide"))}},{key:"toggle",value:function(e){var t=this.visible;n.closeMenus(this.chat),t||this.show(e)}},{key:"redraw",value:function(){this.scrollPlugin&&this.scrollPlugin.reset()}}],[{key:"closeMenus",value:function(e){e.menus.forEach(function(e){return e.hide()})}}]),n}(h.default);t.default=f}).call(t,n(3))},32:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t){i(this,e),this.console=window.console,this.context=t}return u(e,[{key:"debug",value:function(){for(var e,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];window.destiny.loglevel>=2&&(e=this.console).debug.apply(e,[this.context].concat(n))}},{key:"log",value:function(){for(var e,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];window.destiny.loglevel>=1&&(e=this.console).log.apply(e,[this.context].concat(n))}},{key:"info",value:function(){for(var e,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];window.destiny.loglevel>=0&&(e=this.console).info.apply(e,[this.context].concat(n))}},{key:"error",value:function(){for(var e,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];window.destiny.loglevel>=0&&(e=this.console).error.apply(e,[this.context].concat(n))}}],[{key:"make",value:function(t){return new e("["+t.constructor.name+"]")}}]),e}();t.default=o},326:function(e,t,n){"use strict";(function(e){n(30),n(28),n(31),n(29),n(74),window.setInterval(function(){return e.ajax({url:"/ping",method:"get"})},6e5),window.destiny={loglevel:0},window.destiny.chat=function(){var t=new(n(38).default);return e.when(function(){return new Promise(function(t){e.getJSON({url:"/profile/info",timeout:5e3}).done(t).fail(function(){return t(null)})})}(),function(){return new Promise(function(t){e.getJSON({url:"/chat/history",timeout:5e3}).done(t).fail(function(){return t(null)})})}()).then(function(e,n){return t.init(e,n)}),t}()}).call(t,n(3))},38:function(e,t,n){"use strict";(function(e){function i(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(128),l=i(a),c=n(46),h=i(c),f=n(104),p=i(f),d=n(20),A=i(d),E=n(105),g=i(E),O=n(47),m=i(O),S=n(48),C=i(S),T=n(102),v=i(T),y=n(101),I=i(y),R=n(88),b=i(R),N=n(96),B=i(N),F=n(68),w=i(F),M=n(100),D=i(M),L=n(98),P=i(L),k=n(97),U=i(k),H=n(99),G=i(H),_=n(89),x=i(_),Y=n(95),j=i(Y),K=n(49),W=i(K),V=n(94),X=i(V),$=n(90),J=i($),Z=n(93),z=i(Z),Q=n(91),q=i(Q),ee=n(92),te=i(ee),ne=n(15),ie=i(ne),ue=n(32),oe=i(ue),re=n(146),se=window.location,ae=function(){function t(){o(this,t),this.log=oe.default.make(this),this.uri=("https:"===se.protocol?"wss":"ws")+"://"+se.host+"/ws",this.reconnect=!0,this.connected=!1,this.showstarthint=!0,this.maxlines=250,this.users=new Map,this.unresolved=[],this.backlogLoading=!1,this.pmcountnum=0,this.nickregex=/^[a-zA-Z0-9_]{3,20}$/,this.lastMessage=null,this.emoticons=new Set(re.destiny),this.twitchemotes=new Set(re.twitch),this.shownhints=new Set,this.formatters=[],this.ignoreregex=null,this.ignoring=new Set,this.settings=new Map([["showtime",!1],["hideflairicons",!1],["timestampformat","HH:mm"],["maxlines",this.maxlines],["allowNotifications",!1],["highlight",!0],["customhighlight",[]],["highlightnicks",[]]]),this.errorstrings=new Map([["unknown","Unknown error, this usually indicates an internal problem :("],["nopermission","You do not have the required permissions to use that"],["protocolerror","Invalid or badly formatted"],["needlogin","You have to be logged in to use that"],["invalidmsg","The message was invalid"],["throttled","Throttled! You were trying to send messages too fast"],["duplicate","The message is identical to the last one you sent"],["muted","You are muted (subscribing auto-removes mutes). Check your profile for more information."],["submode","The channel is currently in subscriber only mode"],["needbanreason","Providing a reason for the ban is mandatory"],["banned","You have been banned (subscribing auto-removes non-permanent bans), disconnecting. Check your profile for more information."],["requiresocket","This chat requires WebSockets"],["toomanyconnections","Only 5 concurrent connections allowed"],["socketerror","Error contacting server"],["privmsgbanned","Cannot send private messages while banned"],["privmsgaccounttooyoung","Your account is too recent to send private messages"],["notfound","The user was not found"]]),this.hints=new Map([["hint","Type in /hint for more hints"],["slashhelp","Type in /help for more advanced features, like modifying the scrollback size"],["tabcompletion","Use the tab key to auto-complete usernames and emotes (for user only completion prepend a @ or press shift)"],["hoveremotes","Hovering your mouse over an emote will show you the emote code"],["highlight","Chat messages containing your username will be highlighted"],["notify","Use /msg <username> to send a private message to someone"],["ignoreuser","Use /ignore <username> to hide messages from pesky chatters"],["mutespermanent","Mutes are never persistent, don't worry it will pass!"]]),this.ui=e("#chat"),this.css=e("#chat-styles")[0].sheet,this.output=e("#chat-output"),this.lines=e("#chat-lines"),this.input=e("#chat-input-control"),this.scrollnotify=e("#chat-scroll-notify"),this.pmcount=e("#chat-pm-count"),this.source=new p.default(this,this.uri),this.control=new h.default(this)}return s(t,[{key:"init",value:function(t,n){var i=this;this.user=this.addUser(t||{}),this.settings=new Map([].concat(u(this.settings),u(W.default.read("chat.settings")||[]))),this.ignoring=new Set([].concat(u(W.default.read("chat.ignoring")||[]))),this.shownhints=new Set([].concat(u(W.default.read("chat.shownhints")||[]))),this.source.on("PING",function(e){return i.source.send("PONG",e)}),this.source.on("OPEN",function(e){return i.connected=!0}),this.source.on("REFRESH",function(e){return window.location.reload(!1)}),this.source.on("DISPATCH",function(e){return i.onDISPATCH(e)}),this.source.on("CLOSE",function(e){return i.onCLOSE(e)}),this.source.on("NAMES",function(e){return i.onNAMES(e)}),this.source.on("JOIN",function(e){return i.onJOIN(e)}),this.source.on("QUIT",function(e){return i.onQUIT(e)}),this.source.on("PRIVMSG",function(e){return i.onPRIVMSG(e)}),this.source.on("MSG",function(e){return i.onMSG(e)}),this.source.on("MUTE",function(e){return i.onMUTE(e)}),this.source.on("UNMUTE",function(e){return i.onUNMUTE(e)}),this.source.on("BAN",function(e){return i.onBAN(e)}),this.source.on("UNBAN",function(e){return i.onUNBAN(e)}),this.source.on("ERR",function(e){return i.onERR(e)}),this.source.on("SUBONLY",function(e){return i.onSUBONLY(e)}),this.source.on("BROADCAST",function(e){return i.onBROADCAST(e)}),this.source.on("PRIVMSGSENT",function(e){return i.onPRIVMSGSENT(e)}),this.control.on("SEND",function(e){return i.cmdSEND(e)}),this.control.on("HINT",function(e){return i.cmdHINT(e)}),this.control.on("EMOTES",function(e){return i.cmdEMOTES(e)}),this.control.on("HELP",function(e){return i.cmdHELP(e)}),this.control.on("ME",function(e){return i.cmdME(e)}),this.control.on("MESSAGE",function(e){return i.cmdWHISPER(e)}),this.control.on("MSG",function(e){return i.cmdWHISPER(e)}),this.control.on("WHISPER",function(e){return i.cmdWHISPER(e)}),this.control.on("W",function(e){return i.cmdWHISPER(e)}),this.control.on("TELL",function(e){return i.cmdWHISPER(e)}),this.control.on("T",function(e){return i.cmdWHISPER(e)}),this.control.on("NOTIFY",function(e){return i.cmdWHISPER(e)}),this.control.on("IGNORE",function(e){return i.cmdIGNORE(e)}),this.control.on("UNIGNORE",function(e){return i.cmdUNIGNORE(e)}),this.control.on("MUTE",function(e){return i.cmdMUTE(e)}),this.control.on("BAN",function(e){return i.cmdBAN(e)}),this.control.on("IPBAN",function(e){return i.cmdBAN(e)}),this.control.on("UNMUTE",function(e){return i.cmdUNBAN(e)}),this.control.on("UNBAN",function(e){return i.cmdUNBAN(e)}),this.control.on("UNBAN",function(e){return i.cmdUNBAN(e)}),this.control.on("SUBONLY",function(e){return i.cmdSUBONLY(e)}),this.control.on("MAXLINES",function(e){return i.cmdMAXLINES(e)}),this.control.on("UNHIGHLIGHT",function(e){return i.cmdTOGGLEHIGHLIGHT(e)}),this.control.on("HIGHLIGHT",function(e){return i.cmdTOGGLEHIGHLIGHT(e)}),this.control.on("TIMESTAMPFORMAT",function(e){return i.cmdTIMESTAMPFORMAT(e)}),this.control.on("BROADCAST",function(e){return i.cmdBROADCAST(e)}),this.formatters.push(new te.default(this)),this.formatters.push(new X.default(this)),this.formatters.push(new J.default(this)),this.formatters.push(new z.default(this)),this.formatters.push(new q.default(this)),this.scrollPlugin=new w.default(this.output,{sliderMinHeight:40,tabIndex:1}),this.autocomplete=new b.default(this),this.emoticons.forEach(function(e){return i.autocomplete.addEmote(e)}),this.twitchemotes.forEach(function(e){return i.autocomplete.addEmote(e)}),this.inputhistory=new B.default(this),this.highlighter=new j.default(this),this.userfocus=new x.default(this,this.css),this.menus=new Map([["settings",new G.default(e("#chat-settings"),this)],["emotes",new U.default(e("#chat-emote-list"),this)],["users",new D.default(e("#chat-user-list"),this)],["pm",new P.default(e("#chat-pm-notification"),this)]]),this.toolbuttons=new Map([["users",e("#chat-users-btn")],["settings",e("#chat-settings-btn")],["emoticon",e("#emoticon-btn")]]),this.setUnreadMessageCount(this.pmcountnum),this.updateSettingsCss(),this.updateIgnoreRegex(),this.toolbuttons.get("settings").on("click",function(e){return i.menus.get("settings").toggle(e.target)}),this.toolbuttons.get("emoticon").on("click",function(e){return i.menus.get("emotes").toggle(e.target)}),this.toolbuttons.get("users").on("click",function(e){return i.menus.get(i.pmcountnum>0?"pm":"users").toggle(e.target)}),this.ui.on("submit",function(e){e.preventDefault(),e.stopPropagation(),i.control.emit("SEND",i.input.val().toString().trim()),i.input.val("").focus()}),this.output.on("update",(0,l.default)(function(){return i.scrollnotify.toggle(!i.scrollPlugin.isPinned())},100)),this.scrollnotify.on("click",function(){return i.scrollPlugin.updateAndPin(!0)}),this.mousedown=!1,this.waspinned=!0,this.waitingtopin=!1;var o=(0,l.default)(function(){i.waspinned&&!i.mousedown&&(i.scrollPlugin.updateAndPin(!0),i.log.debug("Unfreeze scrolling.")),i.waitingtopin=!1},750);this.output.on("mouseup",function(){i.mousedown=!1,i.waitingtopin=!0,o()}),this.output.on("mousedown",function(){i.mousedown=!0,i.waitingtopin||(i.waspinned=i.scrollPlugin.isPinned(),i.log.debug("Freeze scrolling.",i.waspinned)),A.default.closeMenus(i)});var r=null,s=!1,a=(0,l.default)(function(){i.scrollPlugin.updateAndPin(r),s=!1},300);e(window).on("resize",function(){s||(r=i.scrollPlugin.isPinned(),s=!0),a()}),e("#chat-login-msg").on("click","a",function(t){t.preventDefault();try{if(window.self!==window.top)return void(window.parent.location.href=e(t.target).attr("href")+"?follow="+encodeURIComponent(window.parent.location.pathname))}catch(e){}window.location.href=e(t.target).attr("href")+"?follow="+encodeURIComponent(window.location.pathname)}),this.backlogLoading=!0,n.forEach(function(e){return i.source.parseAndDispatch({data:e})}),n.length>0&&this.push(m.default.uiMessage("<hr/>")),this.scrollPlugin.updateAndPin(!0),this.backlogLoading=!1,this.push(m.default.statusMessage("Connecting...")),this.source.connect()}},{key:"sendCommand",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=(t||"").match(/([^ ]+)/g);this.log.log(e,"->",n),this.control.emit(e,n||[])}},{key:"addUser",value:function(e){var n=this.users.get(e.nick);return n?e.hasOwnProperty("features")&&!t.isArraysEqual(e.features,n.features)&&(n.features=e.features):(n=new g.default(e),this.users.set(e.nick,n)),n}},{key:"onDISPATCH",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if("object"===(void 0===t?"undefined":r(t))){var n=function(t){var n=t.nick,i=t.ignored;return e.autocomplete.toggleNick(n,i)};t.hasOwnProperty("nick")&&n(this.addUser(t)),t.hasOwnProperty("users")&&t.users.forEach(function(t){return n(e.addUser(t))})}}},{key:"onCLOSE",value:function(){var e=this,t=this.connected;if(this.connected=!1,this.reconnect){var n=t?Math.floor(2500*Math.random())+501:Math.floor(25001*Math.random())+5e3;setTimeout(function(){return e.source.connect()},n),this.push(m.default.statusMessage("Disconnected... reconnecting in "+Math.round(n/1e3)+" seconds"))}}},{key:"onNAMES",value:function(e){this.push(m.default.statusMessage("Connected. Server connections: "+e.connectioncount)),this.showstarthint&&(this.showstarthint=!1,this.sendCommand("HINT"))}},{key:"onJOIN",value:function(e){}},{key:"onQUIT",value:function(e){this.users.has(e.nick)&&(delete this.users.delete(e.nick),this.autocomplete.removeNick(e.nick))}},{key:"onMSG",value:function(e){var t=("/me "===e.data.substring(0,4)?e.data.substring(4):e.data).trim();(this.emoticons.has(t)||this.twitchemotes.has(t))&&null!==this.lastMessage&&this.lastMessage.message===t?this.lastMessage instanceof I.default?this.lastMessage.incEmoteCount():(this.lastMessage.ui.remove(),this.push(new I.default(t,e.timestamp,2))):this.resolveMessage(e)||this.push(new C.default(e.data,this.users.get(e.nick),e.timestamp))}},{key:"onMUTE",value:function(e){var t=e.data;this.user.username.toLowerCase()===e.data.toLowerCase()?t="You have been":this.user.hasAnyFeatures(ie.default.SUBSCRIBERT3,ie.default.SUBSCRIBERT4,ie.default.SUBSCRIBERT2,ie.default.ADMIN,ie.default.MODERATOR)||this.removeMessageByUsername(e.data),this.push(m.default.commandMessage(t+" muted by "+e.nick,e.timestamp))}},{key:"onUNMUTE",value:function(e){var t=e.data;this.user.username.toLowerCase()===e.data.toLowerCase()&&(t="You have been"),this.push(m.default.commandMessage(t+" unmuted by "+e.nick,e.timestamp))}},{key:"onBAN",value:function(e){var t=e.data;this.user.username.toLowerCase()===t.toLowerCase()?(t="You have been",this.ui.addClass("banned")):this.user.hasAnyFeatures(ie.default.SUBSCRIBERT3,ie.default.SUBSCRIBERT4,ie.default.SUBSCRIBERT2,ie.default.ADMIN,ie.default.MODERATOR)||this.removeMessageByUsername(e.data),this.push(m.default.commandMessage(t+" banned by "+e.nick,e.timestamp))}},{key:"onUNBAN",value:function(e){var t=e.data;this.user.username.toLowerCase()===e.data.toLowerCase()&&(t="You have been",this.ui.removeClass("banned")),this.push(m.default.commandMessage(t+" unbanned by "+e.nick,e.timestamp))}},{key:"onERR",value:function(e){this.reconnect="toomanyconnections"!==e&&"banned"!==e;var t=this.errorstrings.has(e)?this.errorstrings.get(e):e;this.push(m.default.errorMessage(t))}},{key:"onSUBONLY",value:function(e){var t="on"===e.data?"enabled":"disabled";this.push(m.default.commandMessage("Subscriber only mode "+t+" by "+e.nick,e.timestamp))}},{key:"onBROADCAST",value:function(e){if(!this.backlogLoading)if("redirect:"===e.data.substring(0,9)){var t=e.data.substring(9);setTimeout(function(){window.parent?window.parent.location.href=t:window.location.href=t},5e3),this.push(m.default.broadcastMessage("Redirecting in 5 seconds to "+t,e.timestamp))}else this.push(m.default.broadcastMessage(e.data,e.timestamp))}},{key:"onPRIVMSGSENT",value:function(){this.push(m.default.infoMessage("Your message has been sent!"))}},{key:"onPRIVMSG",value:function(e){var t=this.users.get(e.nick);t&&!this.shouldIgnoreUser(t.username)&&(this.setUnreadMessageCount(this.pmcountnum+1),this.push(new v.default(e.data,t,e.messageid,e.timestamp)))}},{key:"cmdSEND",value:function(e){var t=e.toLowerCase();if(""!==t&&"/me"!==t&&"/me "!==t){if(null===this.user||!this.user.username)return this.push(m.default.errorMessage(this.errorstrings.get("needlogin")));if(/^\/[^\/|me]/i.test(e)){var n=e.split(" ",1)[0];this.sendCommand(n.substring(1).toUpperCase(),e.substring(n.length+1))}else{var i=("/me "===t.substring(0,4)?e.substring(4):e).trim();if(this.isEmote(i))this.source.send("MSG",{data:e});else{var u=new C.default(e,this.user);this.push(u),this.unresolved.unshift(u),this.source.send("MSG",{data:e})}}this.inputhistory.add(e),this.autocomplete.markLastComplete()}}},{key:"cmdEMOTES",value:function(){this.push(m.default.infoMessage("Available emoticons: "+this.emoticons.join(", ")+" (www.destiny.gg/emotes)"))}},{key:"cmdHELP",value:function(){this.push(m.default.infoMessage("Available commands: /emotes /me /msg /ignore (without arguments to list the nicks ignored) /unignore /highlight (highlights target nicks messages for easier visibility) /unhighlight /maxlines /mute /unmute /subonly /ban /ipban /unban (also unbans ip bans) /timestampformat"))}},{key:"cmdHINT",value:function(){for(var e=-1,t=null,n=[].concat(u(this.hints.keys()));;){if(++e>=this.hints.size){t=n[0],this.shownhints.clear(),this.shownhints.add(t);break}if(t=n[e],!this.shownhints.has(t)){this.shownhints.add(t);break}}W.default.write("chat.shownhints",this.shownhints),this.push(m.default.infoMessage(this.hints.get(t)))}},{key:"cmdME",value:function(e){this.source.send("MSG",{data:e.join(" ")})}},{key:"cmdWHISPER",value:function(e){e[0]&&this.nickregex.test(e[0].toLowerCase())?e[0].toLowerCase()===this.user.username.toLowerCase()?this.push(m.default.errorMessage("Cannot send a message to yourself")):this.source.send("PRIVMSG",{nick:e[0],data:e.slice(1,e.length).join(" ")}):this.push(m.default.errorMessage("Invalid nick - /msg nick message"))}},{key:"cmdIGNORE",value:function(e){var t=e[0]||null;t?this.nickregex.test(t)?(this.ignoreNick(t,!0),this.removeMessageByUsername(t),this.push(m.default.statusMessage("Ignoring "+t))):this.push(m.default.infoMessage("Invalid nick - /ignore nick")):this.ignoring.size<=0?this.push(m.default.infoMessage("Your ignore list is empty")):this.push(m.default.infoMessage("Ignoring the following people: "+Array.from(this.ignoring.values()).join(", ")))}},{key:"cmdUNIGNORE",value:function(e){var t=e[0]||null;t&&this.nickregex.test(t)?(this.ignoreNick(t,!1),this.push(m.default.statusMessage(t+" has been removed from your ignore list"))):this.push(m.default.errorMessage("Invalid nick - /ignore nick"))}},{key:"cmdMUTE",value:function(e){if(e[0])if(this.nickregex.test(e[0])){var n=e[1]?t.parseTimeInterval(e[1]):null;n&&n>0?this.source.send("MUTE",{data:e[0],duration:n}):this.source.send("MUTE",{data:e[0]})}else this.push(m.default.infoMessage("Invalid nick - /mute nick[ time]"));else this.push(m.default.infoMessage("Usage: /mute nick[ time]"))}},{key:"cmdBAN",value:function(e,n){if(e.length<3)this.push(m.default.infoMessage("Usage: /"+n+" nick time reason (time can be 'permanent')"));else if(this.nickregex.test(e[0]))if(e[2]){var i={nick:e[0],reason:e.slice(2,e.length).join(" ")};"IPBAN"===n||/^perm/i.test(e[1])?i.ispermanent="IPBAN"===n||/^perm/i.test(e[1]):i.duration=t.parseTimeInterval(e[1]),this.source.send("BAN",i)}else this.push(m.default.errorMessage("Providing a reason is mandatory"));else this.push(m.default.infoMessage("Invalid nick"))}},{key:"cmdUNBAN",value:function(e,t){e[0]?this.nickregex.test(e[0])?this.source.send(t,{data:e[0]}):this.push(m.default.infoMessage("Invalid nick - /"+t+" nick")):this.push(m.default.infoMessage("Usage: /"+t+" nick"))}},{key:"cmdSUBONLY",value:function(e,t){"on"!==e[0]&&"off"!==e[0]?this.push(m.default.errorMessage("Invalid argument - /"+t+" on/off")):this.source.send(t.toUpperCase(),{data:e[0]})}},{key:"cmdMAXLINES",value:function(e,t){if(e[0]){var n=Math.abs(parseInt(e[0],10));n?(this.settings.set("maxlines",n),W.default.write("chat.settings",this.settings),this.updateSettingsCss(),this.push(m.default.infoMessage("Current number of lines shown: "+this.settings.get("maxlines")))):this.push(m.default.infoMessage("Invalid argument - /"+t+" is expecting a number"))}else this.push(m.default.infoMessage("Current number of lines shown: "+this.settings.get("maxlines")))}},{key:"cmdTOGGLEHIGHLIGHT",value:function(e,t){var n=this.settings.get("highlightnicks"),i=Object.keys(n);if(e[0])if(this.nickregex.test(e[1])){var u=e[0].toLowerCase();switch(t){case"UNHIGHLIGHT":n[u]&&delete n[u],this.push(m.default.infoMessage("No longer highlighting "+u));break;default:case"HIGHLIGHT":n[u]||(n[u]=!0),this.push(m.default.infoMessage("Now highlighting "+u))}this.settings.set("highlightnicks",n),W.default.write("chat.settings",this.settings),this.highlighter.loadHighlighters(),this.highlighter.redraw(),this.updateSettingsCss()}else this.push(m.default.errorMessage("Invalid nick - /"+t+" nick"));else this.push(m.default.infoMessage("Currently highlighted users: "+i.join(", ")))}},{key:"cmdTIMESTAMPFORMAT",value:function(e){if(e[0]){var t=e.slice(1,e.length);/^[a-z :.,-\\*]+$/i.test(t)?(this.settings.set("timestampformat",t),W.default.write("chat.settings",this.settings),this.updateSettingsCss(),this.push(m.default.infoMessage("New format: "+this.settings.get("timestampformat")))):this.push(m.default.errorMessage("Invalid format, see: http://momentjs.com/docs/#/displaying/format/"))}else this.push(m.default.infoMessage("Current format: "+this.settings.get("timestampformat")+" (the default is 'HH:mm', for more info: http://momentjs.com/docs/#/displaying/format/)"))}},{key:"cmdBROADCAST",value:function(e){this.source.send("BROADCAST",{data:e.join(" ")})}},{key:"push",value:function(e){if(!(e instanceof C.default&&this.shouldIgnoreMessage(e.message))){var n=this.settings.get("maxlines"),i=this.lines.children(),u=this.scrollPlugin.isPinned()&&!this.mousedown&&!this.waitingtopin;return u&&i.length>=n&&i.slice(0,i.length-n).remove(),e.highlighted=this.highlighter.mustHighlight(e),this.lines.append(e.attach(this)),this.backlogLoading||(this.log.debug("Update scroll Pinned: "+u+" contentScrollTop: "+this.scrollPlugin.scroller.contentScrollTop+" maxScrollTop: "+this.scrollPlugin.scroller.maxScrollTop),this.scrollPlugin.updateAndPin(u),e.highlighted&&this.settings.get("allowNotifications")&&!this.input.is(":focus")&&t.showNotification(e)),this.lastMessage=e,e}}},{key:"resolveMessage",value:function(e){var t=!0,n=!1,i=void 0;try{for(var u,o=this.unresolved[Symbol.iterator]();!(t=(u=o.next()).done);t=!0){var r=u.value;if(this.user.username===e.nick&&r.message===e.data)return this.unresolved.splice(0,1)[0].resolve(this)}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}return null}},{key:"removeMessageByUsername",value:function(e){this.lines.children('div[data-username="'+e.toLowerCase()+'"]').remove(),this.scrollPlugin.reset()}},{key:"ignoreNick",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e=e.toLowerCase(),t?this.ignoring.has(e)&&this.ignoring.delete(e):this.ignoring.add(e),W.default.write("chat.ignoring",this.ignoring),this.updateIgnoreRegex()}},{key:"shouldIgnoreMessage",value:function(e){return""!==e&&this.ignoreregex&&this.ignoreregex.test(e)}},{key:"shouldIgnoreUser",value:function(e){return this.ignoring.has(e.toLowerCase())}},{key:"updateSettingsCss",value:function(){var e=this;Array.from(this.settings.keys()).filter(function(t){return"boolean"==typeof e.settings.get(t)}).forEach(function(t){return e.ui.toggleClass("pref-"+t,e.settings.get(t))})}},{key:"updateIgnoreRegex",value:function(){var e=Array.from(this.ignoring.values()).map(t.makeSafeForRegex);this.ignoreregex=e.length>0?new RegExp(e.join("|"),"i"):null}},{key:"setUnreadMessageCount",value:function(e){this.pmcountnum=Math.max(0,e),this.pmcount.toggleClass("hidden",!this.pmcountnum).text(this.pmcountnum)}},{key:"isEmote",value:function(e){return this.emoticons.has(e)||this.twitchemotes.has(e)}}],[{key:"isArraysEqual",value:function(e,t){return(!e||!t)&&(e.length!==t.length||e.sort().toString()!==t.sort().toString())}},{key:"showNotification",value:function(e){if("granted"===Notification.permission){var t=new Notification(e.user.username+" said ...",{body:e.message,tag:"dgg"+e.timestamp.valueOf(),icon:"/notifyicon.png",dir:"auto"});setTimeout(function(){return t.close()},5e3),t.onclick=function(){}}}},{key:"makeSafeForRegex",value:function(e){return e.trim().replace(/[\-\[\]\/{}()*+?.\\\^$|]/g,"\\$&")}},{key:"parseTimeInterval",value:function(e){var t=0,n={s:1e9,sec:1e9,secs:1e9,second:1e9,seconds:1e9,m:6e10,min:6e10,mins:6e10,minute:6e10,minutes:6e10,h:36e11,hr:36e11,hrs:36e11,hour:36e11,hours:36e11,d:864e11,day:864e11,days:864e11};return e.replace(/(\d+(?:\.\d*)?)([a-z]+)?/gi,function(e,i,u){i*=u?n[u.toLowerCase()]||n.s:n.s,t+=+i}),t}}]),t}();t.default=ae}).call(t,n(3))},46:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){i(this,e),this.listeners=new Map}return u(e,[{key:"on",value:function(e,t){return this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t),this}},{key:"emit",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var u=this.listeners.get(e);return!(!u||!u.length)&&(u.forEach(function(e){return e.apply(void 0,n)}),!0)}}]),e}();t.default=o},47:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),l=i(a),c=n(103),h=i(c),f=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"chat";u(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.type=i,r.timestamp=n?l.default.utc(n).local():(0,l.default)(),r}return r(t,e),s(t,[{key:"wrapTime",value:function(){return'<time class="time" title="'+this.timestamp.format("MMMM Do YYYY, h:mm:ss a")+'">'+this.timestamp.format(this.chat.settings.get("timestampformat"))+"</time>"}},{key:"wrapMessage",value:function(){var e=this,t=this.message;return this.chat.formatters.forEach(function(n){return t=n.format(t,e.user)}),'<span class="text">'+t+"</span>"}},{key:"html",value:function(){return this.wrap(this.wrapTime()+" "+this.wrapMessage())}}],[{key:"uiMessage",value:function(e){return new h.default(e)}},{key:"statusMessage",value:function(e){return new t(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,"status")}},{key:"errorMessage",value:function(e){return new t(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,"error")}},{key:"infoMessage",value:function(e){return new t(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,"info")}},{key:"broadcastMessage",value:function(e){return new t(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,"broadcast")}},{key:"commandMessage",value:function(e){return new t(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,"command")}}]),t}(h.default);t.default=f},48:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(47),l=i(a),c=n(15),h=i(c),f=function(e){function t(e,n,i){u(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,"user"));return r.user=n,r.highlighted=!1,r.prepareMessage(),r}return r(t,e),s(t,[{key:"prepareMessage",value:function(){this.isSlashMe=!1,"/me "===this.message.substring(0,4)?(this.isSlashMe=!0,this.message=this.message.substring(4)):"//"===this.message.substring(0,2)&&(this.message=this.message.substring(1))}},{key:"wrapUser",value:function(e){return(e.features.length>0?'<span class="features">'+t.getFeatureHTML(e)+"</span>":"")+' <a class="user '+e.features.join(" ")+'">'+e.username+"</a>"}},{key:"html",value:function(){var e=[],t={};return this.user&&this.user.username&&(t["data-username"]=this.user.username.toLowerCase()),this.chat.user&&this.chat.user.username===this.user.username&&e.push("msg-own"),this.isSlashMe&&e.push("msg-emote"),this.highlighted&&e.push("msg-highlight"),this.chat.lastMessage&&this.chat.lastMessage.user&&this.user&&this.chat.lastMessage.user.username===this.user.username&&e.push("msg-continue"),this.wrap(this.wrapTime()+" "+this.wrapUser(this.user)+" "+this.wrapMessage(),e,t)}}],[{key:"getFeatureHTML",value:function(e){var t="";e.hasFeature(h.default.SUBSCRIBERT4)?t+='<i class="icon-subscribert4" title="Subscriber (T4)"/>':e.hasFeature(h.default.SUBSCRIBERT3)?t+='<i class="icon-subscribert3" title="Subscriber (T3)"/>':e.hasFeature(h.default.SUBSCRIBERT2)?t+='<i class="icon-subscribert2" title="Subscriber (T2)"/>':e.hasFeature(h.default.SUBSCRIBERT1)?t+='<i class="icon-subscriber" title="Subscriber (T1)"/>':!e.hasFeature(h.default.SUBSCRIBERT0)&&e.hasFeature(h.default.SUBSCRIBER)&&(t+='<i class="icon-subscriber" title="Subscriber (T1)"/>');var n=!0,i=!1,u=void 0;try{for(var o,r=e.features[Symbol.iterator]();!(n=(o=r.next()).done);n=!0){switch(o.value){case h.default.SUBSCRIBERT0:t+='<i class="icon-minitwitch" title="Twitch subscriber"/>';break;case h.default.BOT:t+='<i class="icon-bot" title="Bot"/>';break;case h.default.BOT2:t+='<i class="icon-bot2" title="Bot"/>';break;case h.default.NOTABLE:t+='<i class="icon-notable" title="Notable"/>';break;case h.default.TRUSTED:t+='<i class="icon-trusted" title="Trusted"/>';break;case h.default.CONTRIBUTOR:t+='<i class="icon-contributor" title="Contributor"/>';break;case h.default.COMPCHALLENGE:t+='<i class="icon-compchallenge" title="Composition Winner"/>';break;case h.default.EVE:t+='<i class="icon-eve" title="Eve"/>';break;case h.default.SC2:t+='<i class="icon-sc2" title="Starcraft 2"/>';break;case h.default.BROADCASTER:t+='<i class="icon-broadcaster" title="Broadcaster"/>'}}}catch(e){i=!0,u=e}finally{try{!n&&r.return&&r.return()}finally{if(i)throw u}}return t}}]),t}(l.default);t.default=f},49:function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=window.localStorage||{},s=window.JSON,a=function(){function e(){u(this,e)}return o(e,null,[{key:"write",value:function(e,t){var n="";try{n=s.stringify(t instanceof Map||t instanceof Set?[].concat(i(t)):t)}catch(e){}r.setItem(e,n)}},{key:"read",value:function(e){var t=null;try{t=s.parse(r.getItem(e))}catch(e){}return t}}]),e}();t.default=a},68:function(e,t,n){"use strict";(function(e){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(148);var o=function(){function t(n,u){i(this,t),this.scroller=e(n).nanoScroller(Object.assign({disableResize:!0,preventPageScrolling:!0},u))[0].nanoscroller}return u(t,[{key:"isPinned",value:function(){return!this.scroller.isActive||this.scroller.contentScrollTop>=this.scroller.maxScrollTop-30}},{key:"updateAndPin",value:function(e){this.reset(),e&&this.scroller.scrollBottom(0)}},{key:"reset",value:function(){this.scroller.reset()}}]),t}();t.default=o}).call(t,n(3))},74:function(e,t){},88:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(38),r=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(t){var n=this;if(i(this,e),this.minWordLength=1,this.maxResults=10,this.buckets={},this.origVal=null,this.searchResults=[],this.searchIndex=-1,this.searchWord=null,this.input=t.input,!this.input[0].setSelectionRange)return this;setInterval(this.expireUsers.bind(this),6e4),this.input.on("mousedown",this.resetSearch.bind(this)),this.input.on("keydown",function(e){9===e.which?(e.preventDefault(),e.stopPropagation(),n.searchResults.length<=0&&(n.resetSearch(),n.searchSelectWord(e.shiftKey)),n.showAutoComplete()):n.resetSearch()})}return u(e,[{key:"getBucketId",value:function(e){return 0===e.length?"":e[0].toLowerCase()}},{key:"addToBucket",value:function(e,t,n,i){var u=this.getBucketId(e);return this.buckets[u]||(this.buckets[u]={}),this.buckets[u][e]||(this.buckets[u][e]={data:e,weight:t,isemote:!!n,promoted:i}),this.buckets[u][e]}},{key:"toggleNick",value:function(e,t){return t?this.removeNick(e):this.updateNick(e)}},{key:"removeNick",value:function(e){var t=this.getBucketId(e);return!(!this.buckets[t]||!this.buckets[t][e])&&(delete this.buckets[t][e],!0)}},{key:"addEmote",value:function(e){this.addToBucket(e,1,!0,0)}},{key:"addNick",value:function(e){this.addToBucket(e,1,!1,0)}},{key:"updateNick",value:function(e){var t=Date.now();this.addToBucket(e,t,!1,0).weight=t}},{key:"promoteNick",value:function(e){var t=Date.now(),n=this.addToBucket(e,1,!1,t);if(n.isemote)return this;n.promoted=t}},{key:"getSearchWord",value:function(e,t){var n=e.substring(0,t),i=e.substring(t),u=n.lastIndexOf(" ")+1,o=i.indexOf(" "),r=!1;return u>0&&(n=n.substring(u)),o>-1&&(i=i.substring(0,o)),0===n.lastIndexOf("@")&&(u++,n=n.substring(1),r=!0),{word:n+i,startCaret:u,isUserSearch:r}}},{key:"sortResults",value:function(e,t){return e&&t?e.promoted!==t.promoted?e.promoted>t.promoted?-1:1:e.isemote!==t.isemote?e.isemote&&!t.isemote?-1:1:e.weight!==t.weight?e.weight>t.weight?-1:1:(e=e.data.toLowerCase(),t=t.data.toLowerCase(),e===t?0:e>t?1:-1):0}},{key:"searchBuckets",value:function(e,t,n){e=r.default.makeSafeForRegex(e);var i=[],u=new RegExp("^"+e,"i"),o=this.buckets[this.getBucketId(e)]||{};for(var s in o)!o.hasOwnProperty(s)||n&&o[s].isemote||u.test(s)&&i.push(o[s]);return i.sort(this.sortResults),i.slice(0,t)}},{key:"expireUsers",value:function(){var e=Date.now()-6e5;for(var t in this.buckets)if(this.buckets.hasOwnProperty(t))for(var n in this.buckets[t])if(this.buckets[t].hasOwnProperty(n)){var i=this.buckets[t][n];!i.isemote&&i.promoted<=e&&(i.promoted=0),!i.isemote&&i.weight<=e&&(i.weight=1)}}},{key:"markLastComplete",value:function(){if(this.lastComplete){var e=this.buckets[this.getBucketId(this.lastComplete)]||{};if(!e[this.lastComplete])return this.lastComplete=null;if(e[this.lastComplete].isemote){for(var t in e)e.hasOwnProperty(t)&&(e[t].promoted=0);return this.lastComplete=null}this.promoteNick(this.lastComplete),this.lastComplete=null}}},{key:"resetSearch",value:function(){this.origVal=null,this.searchResults=[],this.searchIndex=-1,this.searchWord=null}},{key:"searchSelectWord",value:function(e){var t=this.getSearchWord(this.input.val(),this.input[0].selectionStart);if(t.word.length>=this.minWordLength){this.searchWord=t;var n=!!e||this.searchWord.isUserSearch;this.searchResults=this.searchBuckets(this.searchWord.word,this.maxResults,n),this.origVal=this.input.val().toString()}}},{key:"showAutoComplete",value:function(){this.searchIndex=this.searchIndex>=this.searchResults.length-1?0:this.searchIndex+1;var e=this.searchResults[this.searchIndex];if(e&&e.data!==this.searchWord.word){this.lastComplete=e.data;var t=this.origVal.substr(0,this.searchWord.startCaret),n=this.origVal.substr(this.searchWord.startCaret+this.searchWord.word.length);" "===n[0]&&0!==n.length||(n=" "+n),this.input.focus().val(t+e.data+n),this.input[0].setSelectionRange(t.length+e.data.length+1,t.length+e.data.length+1)}}}]),e}();t.default=s},89:function(e,t,n){"use strict";(function(e){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(32),r=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function t(e,n){var u=this;i(this,t),this.log=r.default.make(this),this.chat=e,this.css=n,this.focused=[],this.chat.lines.on("mousedown",function(e){return u.toggleElement(e.target)})}return u(t,[{key:"toggleElement",value:function(t){var n=e(t);n.hasClass("chat-user")?this.toggleFocus(n.closest(".msg-user").data("username"),!0).toggleFocus(n.text().toLowerCase()):n.hasClass("user")?this.toggleFocus(n.closest(".msg-user").data("username")):this.focused.length>0&&this.clearFocus()}},{key:"addCssRule",value:function(e){this.log.debug("Add focus user",e),this.css.insertRule('.msg-user[data-username="'+e+'"]{opacity:1 !important;}',this.focused.length),this.focused.push(e),this.redraw()}},{key:"removeCssRule",value:function(e){this.log.debug("Remove focus user",e),this.css.deleteRule(e),this.focused.splice(e,1),this.redraw()}},{key:"clearFocus",value:function(){var e=this;this.log.debug("Clearing focus",this.focused.length),this.focused.forEach(function(t){return e.css.deleteRule(0)}),this.focused=[],this.redraw()}},{key:"redraw",value:function(){this.chat.ui.toggleClass("focus-user",this.focused.length>0)}},{key:"toggleFocus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.focused.indexOf(e.toLowerCase()),i=-1!==n;return null===t&&(t=!i),t&&!i?this.addCssRule(e):!t&&i&&this.removeCssRule(n),this}}]),t}();t.default=s}).call(t,n(3))},90:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(19),c=i(l),h=n(15),f=i(h),p=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),i=[].concat(u(e.emoticons)).join("|"),s=[].concat(u(e.twitchemotes)).join("|");return n.emoteregex=new RegExp("(^|\\s)("+i+")(?=$|\\s)"),n.gemoteregex=new RegExp("(^|\\s)("+i+")(?=$|\\s)","gm"),n.twitchemoteregex=new RegExp("(^|\\s)("+i+"|"+s+")(?=$|\\s)","gm"),n}return s(t,e),a(t,[{key:"format",value:function(e,t){var n=t&&t.features.length>0?t.hasFeature(f.default.SUBSCRIBERT0)?this.twitchemoteregex:this.gemoteregex:this.emoteregex;return e.replace(n,'$1<div title="$2" class="chat-emote chat-emote-$2">$2 </div>')}}]),t}(c.default);t.default=p},91:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(19),l=i(a),c=n(15),h=i(c),f=function(e){function t(){return u(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),s(t,[{key:"format",value:function(e,t){return t&&0===e.indexOf("&gt;")&&t.hasAnyFeatures(h.default.SUBSCRIBERT3,h.default.SUBSCRIBERT4,h.default.SUBSCRIBERT2,h.default.ADMIN,h.default.MODERATOR)&&(e='<span class="greentext">'+e+"</span>"),e}}]),t}(l.default);t.default=f},92:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(19),a=function(e){return e&&e.__esModule?e:{default:e}}(s),l=document.createElement("div"),c=function(e){function t(){return i(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return o(t,e),r(t,[{key:"format",value:function(e){return l.textContent=e,l.innerHTML}}]),t}(a.default);t.default=c},93:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(19),a=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(e){i(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.userregex=/((?:^|\s)@?)([a-zA-Z0-9_]{3,20})(?=$|\s|[\.\?!,])/g,n}return o(t,e),r(t,[{key:"format",value:function(e,t){var n=this;return e.replace(this.userregex,function(e,t,i){return n.chat.users.has(i)?t+'<span class="chat-user">'+i+"</span>":e})}}]),t}(a.default);t.default=l},94:function(e,t,n){"use strict";(function(e){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(19),a=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(t){function s(t){i(this,s);var o=u(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,t)),r=n(147),a="(?:"+r.join("|")+")",l={"p{L}":"\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC","p{N}":"\\u0030-\\u0039\\u00B2\\u00B3\\u00B9\\u00BC-\\u00BE\\u0660-\\u0669\\u06F0-\\u06F9\\u07C0-\\u07C9\\u0966-\\u096F\\u09E6-\\u09EF\\u09F4-\\u09F9\\u0A66-\\u0A6F\\u0AE6-\\u0AEF\\u0B66-\\u0B6F\\u0B72-\\u0B77\\u0BE6-\\u0BF2\\u0C66-\\u0C6F\\u0C78-\\u0C7E\\u0CE6-\\u0CEF\\u0D66-\\u0D75\\u0E50-\\u0E59\\u0ED0-\\u0ED9\\u0F20-\\u0F33\\u1040-\\u1049\\u1090-\\u1099\\u1369-\\u137C\\u16EE-\\u16F0\\u17E0-\\u17E9\\u17F0-\\u17F9\\u1810-\\u1819\\u1946-\\u194F\\u19D0-\\u19DA\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1B50-\\u1B59\\u1BB0-\\u1BB9\\u1C40-\\u1C49\\u1C50-\\u1C59\\u2070\\u2074-\\u2079\\u2080-\\u2089\\u2150-\\u2182\\u2185-\\u2189\\u2460-\\u249B\\u24EA-\\u24FF\\u2776-\\u2793\\u2CFD\\u3007\\u3021-\\u3029\\u3038-\\u303A\\u3192-\\u3195\\u3220-\\u3229\\u3248-\\u324F\\u3251-\\u325F\\u3280-\\u3289\\u32B1-\\u32BF\\uA620-\\uA629\\uA6E6-\\uA6EF\\uA830-\\uA835\\uA8D0-\\uA8D9\\uA900-\\uA909\\uA9D0-\\uA9D9\\uAA50-\\uAA59\\uABF0-\\uABF9\\uFF10-\\uFF19","p{Sc}":"\\u0024\\u00A2-\\u00A5\\u058F\\u060B\\u09F2\\u09F3\\u09FB\\u0AF1\\u0BF9\\u0E3F\\u17DB\\u20A0-\\u20B9\\uA838\\uFDFC\\uFE69\\uFF04\\uFFE0\\uFFE1\\uFFE5\\uFFE6","p{Sk}":"\\u005E\\u0060\\u00A8\\u00AF\\u00B4\\u00B8\\u02C2-\\u02C5\\u02D2-\\u02DF\\u02E5-\\u02EB\\u02ED\\u02EF-\\u02FF\\u0375\\u0384\\u0385\\u1FBD\\u1FBF-\\u1FC1\\u1FCD-\\u1FCF\\u1FDD-\\u1FDF\\u1FED-\\u1FEF\\u1FFD\\u1FFE\\u309B\\u309C\\uA700-\\uA716\\uA720\\uA721\\uA789\\uA78A\\uFBB2-\\uFBC1\\uFF3E\\uFF40\\uFFE3","p{So}":"\\u00A6\\u00A9\\u00AE\\u00B0\\u0482\\u060E\\u060F\\u06DE\\u06E9\\u06FD\\u06FE\\u07F6\\u09FA\\u0B70\\u0BF3-\\u0BF8\\u0BFA\\u0C7F\\u0D79\\u0F01-\\u0F03\\u0F13\\u0F15-\\u0F17\\u0F1A-\\u0F1F\\u0F34\\u0F36\\u0F38\\u0FBE-\\u0FC5\\u0FC7-\\u0FCC\\u0FCE\\u0FCF\\u0FD5-\\u0FD8\\u109E\\u109F\\u1390-\\u1399\\u1940\\u19DE-\\u19FF\\u1B61-\\u1B6A\\u1B74-\\u1B7C\\u2100\\u2101\\u2103-\\u2106\\u2108\\u2109\\u2114\\u2116\\u2117\\u211E-\\u2123\\u2125\\u2127\\u2129\\u212E\\u213A\\u213B\\u214A\\u214C\\u214D\\u214F\\u2195-\\u2199\\u219C-\\u219F\\u21A1\\u21A2\\u21A4\\u21A5\\u21A7-\\u21AD\\u21AF-\\u21CD\\u21D0\\u21D1\\u21D3\\u21D5-\\u21F3\\u2300-\\u2307\\u230C-\\u231F\\u2322-\\u2328\\u232B-\\u237B\\u237D-\\u239A\\u23B4-\\u23DB\\u23E2-\\u23F3\\u2400-\\u2426\\u2440-\\u244A\\u249C-\\u24E9\\u2500-\\u25B6\\u25B8-\\u25C0\\u25C2-\\u25F7\\u2600-\\u266E\\u2670-\\u26FF\\u2701-\\u2767\\u2794-\\u27BF\\u2800-\\u28FF\\u2B00-\\u2B2F\\u2B45\\u2B46\\u2B50-\\u2B59\\u2CE5-\\u2CEA\\u2E80-\\u2E99\\u2E9B-\\u2EF3\\u2F00-\\u2FD5\\u2FF0-\\u2FFB\\u3004\\u3012\\u3013\\u3020\\u3036\\u3037\\u303E\\u303F\\u3190\\u3191\\u3196-\\u319F\\u31C0-\\u31E3\\u3200-\\u321E\\u322A-\\u3247\\u3250\\u3260-\\u327F\\u328A-\\u32B0\\u32C0-\\u32FE\\u3300-\\u33FF\\u4DC0-\\u4DFF\\uA490-\\uA4C6\\uA828-\\uA82B\\uA836\\uA837\\uA839\\uAA77-\\uAA79\\uFDFD\\uFFE4\\uFFE8\\uFFED\\uFFEE\\uFFFC\\uFFFD"},c=l["p{L}"],h=l["p{N}"],f=c+h,p=f+"/\\-+=_&~*%@|#.,:;'?!"+l["p{Sc}"]+l["p{Sk}"]+l["p{So}"],d=f+"/\\-+=_&~*%;"+l["p{Sc}"],A="(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])",E="["+f+"](?:["+f+"\\-]*["+f+"])?",g="(?:"+E+"\\.)+",O="(?:"+g+a+"|(?:\\b"+A+"\\."+A+"\\."+A+"\\."+A+"\\b))",m="\\[["+p+"]*(?:\\[["+p+"]*\\]["+p+"]*)*\\]",S="\\(["+p+"]*(?:\\(["+p+"]*\\)["+p+"]*)*\\)",C=S+"|"+m,T="(?:["+p+"]*(?:"+C+"|["+d+"])+)+",v="(?:"+T+"|/|\\b|$)",y="(?:"+O+"(?::[0-9]+)?/"+v+")|(?:"+O+"(?::[0-9]+)?(?:\\b|$))",I="\\b(https?|ftp)://"+T,R=I+"|"+y;return o.linkregex=new RegExp(R,"gi"),o._elem=e("<div/>"),o}return o(s,t),r(s,[{key:"encodeUrl",value:function(e){return e.replace(/&/g,"&amp;").replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(/([^\#-~| |!])/g,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}},{key:"format",value:function(e){if(e){var t=this,n="";return/\b(?:NSFL)\b/i.test(e)?n="nsfl-link":/\b(?:NSFW|SPOILER)\b/i.test(e)&&(n="nsfw-link"),e.replace(t.linkregex,function(e,i){i=i?"":"http://";var u=t._elem.html(e).text(),o=u.match(t.linkregex);if(!o)return e;e=t.encodeUrl(o[0]);var r=t.encodeUrl(u.substring(o[0].length));return'<a target="_blank" class="externallink '+n+'" href="'+(i+e)+'" rel="nofollow">'+e+"</a>"+r})}}}]),s}(a.default);t.default=l}).call(t,n(3))},95:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(38),s=i(r),a=n(48),l=i(a),c=n(15),h=i(c),f=function(){function e(t){u(this,e),this.chat=t,this.customregex=null,this.userregex=null,this.highlightnicks=null,this.loadHighlighters()}return o(e,[{key:"loadHighlighters",value:function(){var e=this.chat.settings.get("customhighlight").map(s.default.makeSafeForRegex).join("|");""!==e&&(this.customregex=new RegExp("\\b(?:"+e+")\\b","i")),this.chat.user&&this.chat.user.username&&(this.userregex=new RegExp("\\b@?(?:"+this.chat.user.username+")\\b","i")),this.highlightnicks=Object.keys(this.chat.settings.get("highlightnicks"))}},{key:"mustHighlight",value:function(e){return!(!(this.chat.user&&e instanceof l.default&&this.chat.settings.get("highlight"))||e.user.hasFeature(h.default.BOT)||e.user.username===this.chat.user.username)&&Boolean(this.highlightnicks.find(function(t){return e.user.username.toLowerCase()===t.toLowerCase()})||this.userregex&&this.userregex.test(e.message)||this.customregex&&this.customregex.test(e.message))}},{key:"redraw",value:function(){}}]),e}();t.default=f},96:function(e,t,n){"use strict";(function(e){function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(49),s=i(r),a=n(32),l=i(a),c=function(){function t(n){var i=this;u(this,t),this.log=l.default.make(this),this.input=e(n.input),this.history=s.default.read("chat.history")||[],this.index=-1,this.lastinput="",this.maxentries=20,this.input.on("keyup",function(e){e.shiftKey||e.metaKey||e.ctrlKey||38!==e.which&&40!==e.which?i.index=-1:i.show(38===e.which?-1:1)})}return o(t,[{key:"show",value:function(e){var t=-1===e?"UP":"DOWN";if(this.log.debug("Show "+t+"("+e+") index "+this.index+" total "+this.history.length),this.index<0){if(-1!==e)return;if(this.index=this.history.length,this.lastinput=this.input.val(),this.index<=0)return}var n=this.index+e;if(n>=this.history.length||n<0)return void(n>=this.history.length&&(this.input.val(this.lastinput),this.index=-1));this.index=n,this.input.val(this.history[n])}},{key:"add",value:function(e){this.log.debug("Add",e),this.index=-1,this.history.length>0&&this.history[this.history.length-1]===e||(this.history.push(e),this.history.length>this.maxentries&&(this.history=this.history.slice(0,this.history.length-this.maxentries)),s.default.write("chat.history",this.history))}}]),t}();t.default=c}).call(t,n(3))},97:function(e,t,n){"use strict";(function(e){function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(20),l=function(e){return e&&e.__esModule?e:{default:e}}(a),c=function(t){function n(t,r){u(this,n);var s=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,r));return s.input=e(s.chat.input),s.temotes=e("#twitch-emotes"),s.demotes=e("#destiny-emotes"),s.demotes.append([].concat(i(s.chat.emoticons)).map(function(e){return n.buildEmote(e)}).join("")),s.temotes.append([].concat(i(s.chat.twitchemotes)).map(function(e){return n.buildEmote(e)}).join("")),s.ui.on("click",".chat-emote",function(e){return s.selectEmote(e.target.innerText)}),s}return r(n,t),s(n,[{key:"selectEmote",value:function(e){var t=this.input.val().toString().trim();this.input.val(t+(""===t?"":" ")+e+" ").focus()}}],[{key:"buildEmote",value:function(e){return'<div class="emote"><span title="'+e+'" class="chat-emote chat-emote-'+e+'">'+e+"</span></div>"}}]),n}(l.default);t.default=c}).call(t,n(3))},98:function(e,t,n){"use strict";(function(e){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(20),s=function(e){return e&&e.__esModule?e:{default:e}}(r),a=function(t){function n(t,o){i(this,n);var r=u(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,o));return r.ui.on("click","#user-list-link",function(){s.default.closeMenus(r.chat),r.chat.menus.get("users").show(r.btn)}),r.ui.on("click","#markread-privmsg",function(){r.chat.setUnreadMessageCount(0),s.default.closeMenus(r.chat),e.ajax({type:"POST",url:"/profile/messages/openall"})}),r.ui.on("click","#inbox-privmsg",function(){r.chat.setUnreadMessageCount(0),s.default.closeMenus(r.chat)}),r}return o(n,t),n}(s.default);t.default=a}).call(t,n(3))},99:function(e,t,n){"use strict";(function(e){function i(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function e(t,n,i){null===t&&(t=Function.prototype);var u=Object.getOwnPropertyDescriptor(t,n);if(void 0===u){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in u)return u.value;var r=u.get;if(void 0!==r)return r.call(i)},c=n(20),h=i(c),f=n(49),p=i(f),d=function(t){function n(t,i){o(this,n);var s=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,i));return s.notificationEl=s.ui.find("#chat-settings-notification-permissions"),s.customHighlightEl=s.ui.find("input[name=customhighlight]"),s.allowNotificationsEl=s.ui.find('input[name="allowNotifications"]'),s.customHighlightEl.on("keypress blur",function(t){if(!t.which||13===t.which){var n=e(t.target).val().toString().split(",").map(function(e){return e.trim()});s.chat.settings.set("customhighlight",[].concat(u(new Set(n)))),s.chat.highlighter.loadHighlighters(),s.chat.highlighter.redraw()}}),s.ui.on("change",'input[type="checkbox"]',function(t){var n=e(t.target).attr("name"),i=e(t.target).is(":checked");switch(n){case"showtime":case"hideflairicons":case"highlight":s.updateSetting(n,i);break;case"allowNotifications":i?s.notificationPermission().then(function(e){return s.updateSetting(n,!0)},function(e){return s.updateSetting(n,!1)}):s.updateSetting(n,!1)}}),s}return s(n,t),a(n,[{key:"show",value:function(e){var t=this;l(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"show",this).call(this,e),Object.keys(this.chat.settings).forEach(function(e){t.ui.find("input[name="+e+'][type="checkbox"]').prop("checked",t.chat.settings.get(e))}),"granted"!==Notification.permission&&this.allowNotificationsEl.prop("checked",!1),this.customHighlightEl.val(this.chat.settings.get("customhighlight").join(",")),this.updateNotification()}},{key:"updateSetting",value:function(e,t){this.updateNotification(),this.chat.settings.set(e,t),p.default.write("chat.settings",this.chat.settings),this.chat.updateSettingsCss(),this.chat.scrollPlugin.updateAndPin(this.chat.scrollPlugin.isPinned())}},{key:"updateNotification",value:function(){var e="default"===Notification.permission?"required":Notification.permission;this.notificationEl.text("(Permission "+e+")")}},{key:"notificationPermission",value:function(){return new Promise(function(e,t){switch(Notification.permission){case"default":Notification.requestPermission(function(n){switch(n){case"granted":e(n);break;default:t(n)}});break;case"granted":e(Notification.permission);break;case"denied":default:t(Notification.permission)}})}}]),n}(h.default);t.default=d}).call(t,n(3))}},[326]);