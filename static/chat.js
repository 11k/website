webpackJsonp([2],{0:function(t,e,n){(function(t){"use strict";n(63),n(58),n(76),n(62),n(493),n(492),window.setInterval(function(){t.ajax({url:"/ping",method:"get"})},6e5),window.destiny={},window.destiny.loglevel=0,window.destiny.chat=new(n(78)["default"])}).call(e,n(6))},45:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={PROTECTED:"protected",SUBSCRIBER:"subscriber",SUBSCRIBERT0:"flair9",SUBSCRIBERT1:"flair13",SUBSCRIBERT2:"flair1",SUBSCRIBERT3:"flair3",SUBSCRIBERT4:"flair8",VIP:"vip",MODERATOR:"moderator",ADMIN:"admin",BROADCASTER:"flair12",BOT:"bot",BOT2:"flair11",NOTABLE:"flair2",TRUSTED:"flair4",CONTRIBUTOR:"flair5",COMPCHALLENGE:"flair6",EVE:"flair7",SC2:"flair10"}},56:function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e){n(this,t),this.chat=e}return i(t,[{key:"format",value:function(t,e){return t}}]),t}();e["default"]=o},57:function(t,e,n){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(124),l=i(a),c=n(79),h=i(c),f=function(e){function n(e,i){o(this,n);var r=s(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return r.ui=t(e),r.chat=i,r.btn=null,r.visible=!1,r.shown=!1,r.ui.find(".scrollable").get().forEach(function(t){return r.scrollPlugin=new l["default"](t)}),r.ui.on("click",".close",r.hide.bind(r)),r}return r(n,e),u(n,[{key:"show",value:function(e){this.visible||(this.visible=!0,this.btn=t(e),this.shown=!0,this.btn.addClass("active"),this.ui.addClass("active"),this.redraw(),this.emit("show"))}},{key:"hide",value:function(){this.visible&&(this.visible=!1,this.btn.removeClass("active"),this.ui.removeClass("active"),this.emit("hide"))}},{key:"toggle",value:function(t){var e=this.visible;n.closeMenus(this.chat),e||this.show(t)}},{key:"redraw",value:function(){this.scrollPlugin&&this.scrollPlugin.reset()}}],[{key:"closeMenus",value:function(t){t.menus.forEach(function(t){return t.hide()})}}]),n}(h["default"]);e["default"]=f}).call(e,n(6))},58:function(t,e,n){(function(t){/*!
	 * Bootstrap v3.3.7 (http://getbootstrap.com)
	 * Copyright 2011-2016 Twitter, Inc.
	 * Licensed under the MIT license
	 */
if("undefined"==typeof t)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||e[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(t),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}t.fn.emulateTransitionEnd=function(e){var n=!1,i=this;t(this).one("bsTransitionEnd",function(){n=!0});var o=function(){n||t(i).trigger(t.support.transition.end)};return setTimeout(o,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(t),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.alert");o||n.data("bs.alert",o=new i(this)),"string"==typeof e&&o[e].call(n)})}var n='[data-dismiss="alert"]',i=function(e){t(e).on("click",n,this.close)};i.VERSION="3.3.7",i.TRANSITION_DURATION=150,i.prototype.close=function(e){function n(){r.detach().trigger("closed.bs.alert").remove()}var o=t(this),s=o.attr("data-target");s||(s=o.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,""));var r=t("#"===s?[]:s);e&&e.preventDefault(),r.length||(r=o.closest(".alert")),r.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(r.removeClass("in"),t.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n())};var o=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=i,t.fn.alert.noConflict=function(){return t.fn.alert=o,this},t(document).on("click.bs.alert.data-api",n,i.prototype.close)}(t),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.button"),s="object"==typeof e&&e;o||i.data("bs.button",o=new n(this,s)),"toggle"==e?o.toggle():e&&o.setState(e)})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.isLoading=!1};n.VERSION="3.3.7",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(e){var n="disabled",i=this.$element,o=i.is("input")?"val":"html",s=i.data();e+="Text",null==s.resetText&&i.data("resetText",i[o]()),setTimeout(t.proxy(function(){i[o](null==s[e]?this.options[e]:s[e]),"loadingText"==e?(this.isLoading=!0,i.addClass(n).attr(n,n).prop(n,!0)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n).prop(n,!1))},this),0)},n.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),t&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var i=t.fn.button;t.fn.button=e,t.fn.button.Constructor=n,t.fn.button.noConflict=function(){return t.fn.button=i,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var i=t(n.target).closest(".btn");e.call(i,"toggle"),t(n.target).is('input[type="radio"], input[type="checkbox"]')||(n.preventDefault(),i.is("input,button")?i.trigger("focus"):i.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(t),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.carousel"),s=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e),r="string"==typeof e?e:s.slide;o||i.data("bs.carousel",o=new n(this,s)),"number"==typeof e?o.to(e):r?o[r]():s.interval&&o.pause().cycle()})}var n=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};n.VERSION="3.3.7",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},n.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},n.prototype.getItemForDirection=function(t,e){var n=this.getItemIndex(e),i="prev"==t&&0===n||"next"==t&&n==this.$items.length-1;if(i&&!this.options.wrap)return e;var o="prev"==t?-1:1,s=(n+o)%this.$items.length;return this.$items.eq(s)},n.prototype.to=function(t){var e=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",this.$items.eq(t))},n.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){if(!this.sliding)return this.slide("next")},n.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},n.prototype.slide=function(e,i){var o=this.$element.find(".item.active"),s=i||this.getItemForDirection(e,o),r=this.interval,u="next"==e?"left":"right",a=this;if(s.hasClass("active"))return this.sliding=!1;var l=s[0],c=t.Event("slide.bs.carousel",{relatedTarget:l,direction:u});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,r&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=t(this.$indicators.children()[this.getItemIndex(s)]);h&&h.addClass("active")}var f=t.Event("slid.bs.carousel",{relatedTarget:l,direction:u});return t.support.transition&&this.$element.hasClass("slide")?(s.addClass(e),s[0].offsetWidth,o.addClass(u),s.addClass(u),o.one("bsTransitionEnd",function(){s.removeClass([e,u].join(" ")).addClass("active"),o.removeClass(["active",u].join(" ")),a.sliding=!1,setTimeout(function(){a.$element.trigger(f)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(o.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(f)),r&&this.cycle(),this}};var i=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=n,t.fn.carousel.noConflict=function(){return t.fn.carousel=i,this};var o=function(n){var i,o=t(this),s=t(o.attr("data-target")||(i=o.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var r=t.extend({},s.data(),o.data()),u=o.attr("data-slide-to");u&&(r.interval=!1),e.call(s,r),u&&s.data("bs.carousel").to(u),n.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var n=t(this);e.call(n,n.data())})})}(t),+function(t){"use strict";function e(e){var n,i=e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return t(i)}function n(e){return this.each(function(){var n=t(this),o=n.data("bs.collapse"),s=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);!o&&s.toggle&&/show|hide/.test(e)&&(s.toggle=!1),o||n.data("bs.collapse",o=new i(this,s)),"string"==typeof e&&o[e]()})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.7",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(e=o.data("bs.collapse"),e&&e.transitioning))){var s=t.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){o&&o.length&&(n.call(o,"hide"),e||o.data("bs.collapse",null));var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var u=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return u.call(this);var a=t.camelCase(["scroll",r].join("-"));this.$element.one("bsTransitionEnd",t.proxy(u,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[r](this.$element[0][a])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[n](0).one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(i.TRANSITION_DURATION):o.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(n,i){var o=t(i);this.addAriaAndCollapsedClass(e(o),o)},this)).end()},i.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var o=t.fn.collapse;t.fn.collapse=n,t.fn.collapse.Constructor=i,t.fn.collapse.noConflict=function(){return t.fn.collapse=o,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var o=t(this);o.attr("data-target")||i.preventDefault();var s=e(o),r=s.data("bs.collapse"),u=r?"toggle":o.data();n.call(s,u)})}(t),+function(t){"use strict";function e(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&t(n);return i&&i.length?i:e.parent()}function n(n){n&&3===n.which||(t(o).remove(),t(s).each(function(){var i=t(this),o=e(i),s={relatedTarget:this};o.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&t.contains(o[0],n.target)||(o.trigger(n=t.Event("hide.bs.dropdown",s)),n.isDefaultPrevented()||(i.attr("aria-expanded","false"),o.removeClass("open").trigger(t.Event("hidden.bs.dropdown",s)))))}))}function i(e){return this.each(function(){var n=t(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new r(this)),"string"==typeof e&&i[e].call(n)})}var o=".dropdown-backdrop",s='[data-toggle="dropdown"]',r=function(e){t(e).on("click.bs.dropdown",this.toggle)};r.VERSION="3.3.7",r.prototype.toggle=function(i){var o=t(this);if(!o.is(".disabled, :disabled")){var s=e(o),r=s.hasClass("open");if(n(),!r){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",n);var u={relatedTarget:this};if(s.trigger(i=t.Event("show.bs.dropdown",u)),i.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),s.toggleClass("open").trigger(t.Event("shown.bs.dropdown",u))}return!1}},r.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var i=t(this);if(n.preventDefault(),n.stopPropagation(),!i.is(".disabled, :disabled")){var o=e(i),r=o.hasClass("open");if(!r&&27!=n.which||r&&27==n.which)return 27==n.which&&o.find(s).trigger("focus"),i.trigger("click");var u=" li:not(.disabled):visible a",a=o.find(".dropdown-menu"+u);if(a.length){var l=a.index(n.target);38==n.which&&l>0&&l--,40==n.which&&l<a.length-1&&l++,~l||(l=0),a.eq(l).trigger("focus")}}}};var u=t.fn.dropdown;t.fn.dropdown=i,t.fn.dropdown.Constructor=r,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=u,this},t(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",s,r.prototype.toggle).on("keydown.bs.dropdown.data-api",s,r.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",r.prototype.keydown)}(t),+function(t){"use strict";function e(e,i){return this.each(function(){var o=t(this),s=o.data("bs.modal"),r=t.extend({},n.DEFAULTS,o.data(),"object"==typeof e&&e);s||o.data("bs.modal",s=new n(this,r)),"string"==typeof e?s[e](i):r.show&&s.show(i)})}var n=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.7",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},n.prototype.show=function(e){var i=this,o=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(i.$element)&&(i.ignoreBackdropClick=!0)})}),this.backdrop(function(){var o=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),o&&i.$element[0].offsetWidth,i.$element.addClass("in"),i.enforceFocus();var s=t.Event("shown.bs.modal",{relatedTarget:e});o?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(s)}))},n.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(e){var i=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=t.support.transition&&o;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;s?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var r=function(){i.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",r).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):r()}else e&&e()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var i=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=n,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=t(this),o=i.attr("href"),s=t(i.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),r=s.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},s.data(),i.data());i.is("a")&&n.preventDefault(),s.one("show.bs.modal",function(t){t.isDefaultPrevented()||s.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),e.call(s,r,this)})}(t),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.tooltip"),s="object"==typeof e&&e;!o&&/destroy|hide/.test(e)||(o||i.data("bs.tooltip",o=new n(this,s)),"string"==typeof e&&o[e]())})}var n=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};n.VERSION="3.3.7",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(e,n,i){if(this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),s=o.length;s--;){var r=o[s];if("click"==r)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=r){var u="hover"==r?"mouseenter":"focusin",a="hover"==r?"mouseleave":"focusout";this.$element.on(u+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},n.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},n.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusin"==e.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState?void(n.hoverState="in"):(clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},n.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusout"==e.type?"focus":"hover"]=!1),!n.isInStateTrue())return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var o=this,s=this.tip(),r=this.getUID(this.type);this.setContent(),s.attr("id",r),this.$element.attr("aria-describedby",r),this.options.animation&&s.addClass("fade");var u="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,l=a.test(u);l&&(u=u.replace(a,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(u).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),h=s[0].offsetWidth,f=s[0].offsetHeight;if(l){var d=u,p=this.getPosition(this.$viewport);u="bottom"==u&&c.bottom+f>p.bottom?"top":"top"==u&&c.top-f<p.top?"bottom":"right"==u&&c.right+h>p.width?"left":"left"==u&&c.left-h<p.left?"right":u,s.removeClass(d).addClass(u)}var g=this.getCalculatedOffset(u,c,h,f);this.applyPlacement(g,u);var A=function(){var t=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==t&&o.leave(o)};t.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",A).emulateTransitionEnd(n.TRANSITION_DURATION):A()}},n.prototype.applyPlacement=function(e,n){var i=this.tip(),o=i[0].offsetWidth,s=i[0].offsetHeight,r=parseInt(i.css("margin-top"),10),u=parseInt(i.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(u)&&(u=0),e.top+=r,e.left+=u,t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),i.addClass("in");var a=i[0].offsetWidth,l=i[0].offsetHeight;"top"==n&&l!=s&&(e.top=e.top+s-l);var c=this.getViewportAdjustedDelta(n,e,a,l);c.left?e.left+=c.left:e.top+=c.top;var h=/top|bottom/.test(n),f=h?2*c.left-o+a:2*c.top-s+l,d=h?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(f,i[0][d],h)},n.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},n.prototype.hide=function(e){function i(){"in"!=o.hoverState&&s.detach(),o.$element&&o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),e&&e()}var o=this,s=t(this.$tip),r=t.Event("hide.bs."+this.type);if(this.$element.trigger(r),!r.isDefaultPrevented())return s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),this.hoverState=null,this},n.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(e){e=e||this.$element;var n=e[0],i="BODY"==n.tagName,o=n.getBoundingClientRect();null==o.width&&(o=t.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var s=window.SVGElement&&n instanceof window.SVGElement,r=i?{top:0,left:0}:s?null:e.offset(),u={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},a=i?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},o,u,a,r)},n.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},n.prototype.getViewportAdjustedDelta=function(t,e,n,i){var o={top:0,left:0};if(!this.$viewport)return o;var s=this.options.viewport&&this.options.viewport.padding||0,r=this.getPosition(this.$viewport);if(/right|left/.test(t)){var u=e.top-s-r.scroll,a=e.top+s-r.scroll+i;u<r.top?o.top=r.top-u:a>r.top+r.height&&(o.top=r.top+r.height-a)}else{var l=e.left-s,c=e.left+s+n;l<r.left?o.left=r.left-l:c>r.right&&(o.left=r.left+r.width-c)}return o},n.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},n.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},n.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(e){var n=this;e&&(n=t(e.currentTarget).data("bs."+this.type),n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),e?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})};var i=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=n,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(t),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.popover"),s="object"==typeof e&&e;!o&&/destroy|hide/.test(e)||(o||i.data("bs.popover",o=new n(this,s)),"string"==typeof e&&o[e]())})}var n=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.7",n.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=n,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(t),+function(t){"use strict";function e(n,i){this.$body=t(document.body),this.$scrollElement=t(t(n).is(document.body)?window:n),this.options=t.extend({},e.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var i=t(this),o=i.data("bs.scrollspy"),s="object"==typeof n&&n;o||i.data("bs.scrollspy",o=new e(this,s)),"string"==typeof n&&o[n]()})}e.VERSION="3.3.7",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,n="offset",i=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(n="position",i=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),o=e.data("target")||e.attr("href"),s=/^#./.test(o)&&t(o);return s&&s.length&&s.is(":visible")&&[[s[n]().top+i,o]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),o=this.offsets,s=this.targets,r=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),e>=i)return r!=(t=s[s.length-1])&&this.activate(t);if(r&&e<o[0])return this.activeTarget=null,this.clear();for(t=o.length;t--;)r!=s[t]&&e>=o[t]&&(void 0===o[t+1]||e<o[t+1])&&this.activate(s[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();
var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',i=t(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=t.fn.scrollspy;t.fn.scrollspy=n,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=i,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);n.call(e,e.data())})})}(t),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.tab");o||i.data("bs.tab",o=new n(this)),"string"==typeof e&&o[e]()})}var n=function(e){this.element=t(e)};n.VERSION="3.3.7",n.TRANSITION_DURATION=150,n.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i||(i=e.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var o=n.find(".active:last a"),s=t.Event("hide.bs.tab",{relatedTarget:e[0]}),r=t.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(s),e.trigger(r),!r.isDefaultPrevented()&&!s.isDefaultPrevented()){var u=t(i);this.activate(e.closest("li"),n),this.activate(u,u.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},n.prototype.activate=function(e,i,o){function s(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),u?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}var r=i.find("> .active"),u=o&&t.support.transition&&(r.length&&r.hasClass("fade")||!!i.find("> .fade").length);r.length&&u?r.one("bsTransitionEnd",s).emulateTransitionEnd(n.TRANSITION_DURATION):s(),r.removeClass("in")};var i=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=n,t.fn.tab.noConflict=function(){return t.fn.tab=i,this};var o=function(n){n.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(t),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.affix"),s="object"==typeof e&&e;o||i.data("bs.affix",o=new n(this,s)),"string"==typeof e&&o[e]()})}var n=function(e,i){this.options=t.extend({},n.DEFAULTS,i),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.7",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(t,e,n,i){var o=this.$target.scrollTop(),s=this.$element.offset(),r=this.$target.height();if(null!=n&&"top"==this.affixed)return o<n&&"top";if("bottom"==this.affixed)return null!=n?!(o+this.unpin<=s.top)&&"bottom":!(o+r<=t-i)&&"bottom";var u=null==this.affixed,a=u?o:s.top,l=u?r:e;return null!=n&&o<=n?"top":null!=i&&a+l>=t-i&&"bottom"},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},n.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),i=this.options.offset,o=i.top,s=i.bottom,r=Math.max(t(document).height(),t(document.body).height());"object"!=typeof i&&(s=o=i),"function"==typeof o&&(o=i.top(this.$element)),"function"==typeof s&&(s=i.bottom(this.$element));var u=this.getState(r,e,o,s);if(this.affixed!=u){null!=this.unpin&&this.$element.css("top","");var a="affix"+(u?"-"+u:""),l=t.Event(a+".bs.affix");if(this.$element.trigger(l),l.isDefaultPrevented())return;this.affixed=u,this.unpin="bottom"==u?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(a).trigger(a.replace("affix","affixed")+".bs.affix")}"bottom"==u&&this.$element.offset({top:r-e-s})}};var i=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=n,t.fn.affix.noConflict=function(){return t.fn.affix=i,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var n=t(this),i=n.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),e.call(n,i)})})}(t)}).call(e,n(6))},62:76,63:76,66:function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e){n(this,t),this.console=window.console,this.context=e}return i(t,[{key:"debug",value:function(){for(var t,e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];window.destiny.loglevel>=2&&(t=this.console).debug.apply(t,[this.context].concat(n))}},{key:"log",value:function(){for(var t,e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];window.destiny.loglevel>=1&&(t=this.console).log.apply(t,[this.context].concat(n))}},{key:"info",value:function(){for(var t,e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];window.destiny.loglevel>=0&&(t=this.console).info.apply(t,[this.context].concat(n))}},{key:"error",value:function(){for(var t,e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];window.destiny.loglevel>=0&&(t=this.console).error.apply(t,[this.context].concat(n))}}],[{key:"make",value:function(e){return new t("["+e.constructor.name+"]")}}]),t}();e["default"]=o},78:function(t,e,n){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(490),l=i(a),c=n(79),h=i(c),f=n(301),d=i(f),p=n(57),g=i(p),A=n(302),m=i(A),E=n(80),v=i(E),y=n(81),b=i(y),S=n(299),T=i(S),O=n(298),C=i(O),I=n(285),w=i(I),R=n(293),N=i(R),B=n(124),D=i(B),F=n(297),M=i(F),L=n(295),k=i(L),P=n(294),U=i(P),H=n(296),x=i(H),G=n(286),_=i(G),$=n(292),j=i($),Y=n(82),W=i(Y),K=n(291),V=i(K),X=n(287),J=i(X),Z=n(290),z=i(Z),Q=n(288),q=i(Q),tt=n(289),et=i(tt),nt=n(45),it=i(nt),ot=n(66),st=i(ot),rt=n(536),ut=window.location,at=function(){function e(){s(this,e),this.uri=("https:"===ut.protocol?"wss":"ws")+"://"+ut.host+"/ws",this.reconnect=!0,this.connected=!1,this.showstarthint=!0,this.maxlines=500,this.users=new Map,this.unresolved=[],this.backlog=[],this.backlogLoading=!1,this.pmcountnum=0,this.nickregex=/^[a-zA-Z0-9_]{3,20}$/,this.lastMessage=null,this.emoticons=new Set(rt.destiny),this.twitchemotes=new Set(rt.twitch),this.shownhints=new Set,this.formatters=[],this.backlog=[],this.ignoreregex=null,this.ignoring=new Set,this.settings=new Map([["showtime",!1],["hideflairicons",!1],["timestampformat","HH:mm"],["maxlines",500],["allowNotifications",!1],["highlight",!0],["customhighlight",[]],["highlightnicks",[]]]),this.errorstrings=new Map([["unknown","Unknown error, this usually indicates an internal problem :("],["nopermission","You do not have the required permissions to use that"],["protocolerror","Invalid or badly formatted"],["needlogin","You have to be logged in to use that"],["invalidmsg","The message was invalid"],["throttled","Throttled! You were trying to send messages too fast"],["duplicate","The message is identical to the last one you sent"],["muted","You are muted (subscribing auto-removes mutes). Check your profile for more information."],["submode","The channel is currently in subscriber only mode"],["needbanreason","Providing a reason for the ban is mandatory"],["banned","You have been banned (subscribing auto-removes non-permanent bans), disconnecting. Check your profile for more information."],["requiresocket","This chat requires WebSockets"],["toomanyconnections","Only 5 concurrent connections allowed"],["socketerror","Error contacting server"],["privmsgbanned","Cannot send private messages while banned"],["privmsgaccounttooyoung","Your account is too recent to send private messages"],["notfound","The user was not found"]]),this.hints=new Map([["hint","Type in /hint for more hints"],["slashhelp","Type in /help for more advanced features, like modifying the scrollback size"],["tabcompletion","Use the tab key to auto-complete usernames and emotes (for user only completion prepend a @ or press shift)"],["hoveremotes","Hovering your mouse over an emote will show you the emote code"],["highlight","Chat messages containing your username will be highlighted"],["notify","Use /msg <username> to send a private message to someone"],["ignoreuser","Use /ignore <username> to hide messages from pesky chatters"],["mutespermanent","Mutes are never persistent, don't worry it will pass!"]])}return u(e,[{key:"init",value:function(e){var n=this;Object.assign(this,e.options),this.settings=new Map([].concat(o(this.settings),o(e.settings),o(W["default"].read("chat.settings")||[]))),this.ignoring=new Set([].concat(o(W["default"].read("chat.ignoring")||[]))),this.shownhints=new Set([].concat(o(W["default"].read("chat.shownhints")||[]))),this.log=st["default"].make(this),this.user=this.addUser(e.user||{}),this.source=new d["default"](this,this.uri),this.control=new h["default"](this),this.ui=t("#chat"),this.css=t("#chat-styles")[0].sheet,this.output=t("#chat-output"),this.lines=t("#chat-lines"),this.input=t("#chat-input-control"),this.scrollnotify=t("#chat-scroll-notify"),this.pmcount=t("#chat-pm-count"),this.source.on("PING",function(t){return n.source.send("PONG",t)}),this.source.on("OPEN",function(t){return n.connected=!0}),this.source.on("REFRESH",function(t){return window.location.reload(!1)}),this.source.on("DISPATCH",function(t){return n.onDISPATCH(t)}),this.source.on("CLOSE",function(t){return n.onCLOSE(t)}),this.source.on("NAMES",function(t){return n.onNAMES(t)}),this.source.on("JOIN",function(t){return n.onJOIN(t)}),this.source.on("QUIT",function(t){return n.onQUIT(t)}),this.source.on("PRIVMSG",function(t){return n.onPRIVMSG(t)}),this.source.on("MSG",function(t){return n.onMSG(t)}),this.source.on("MUTE",function(t){return n.onMUTE(t)}),this.source.on("UNMUTE",function(t){return n.onUNMUTE(t)}),this.source.on("BAN",function(t){return n.onBAN(t)}),this.source.on("UNBAN",function(t){return n.onUNBAN(t)}),this.source.on("ERR",function(t){return n.onERR(t)}),this.source.on("SUBONLY",function(t){return n.onSUBONLY(t)}),this.source.on("BROADCAST",function(t){return n.onBROADCAST(t)}),this.source.on("PRIVMSGSENT",function(t){return n.onPRIVMSGSENT(t)}),this.control.on("SEND",function(t){return n.cmdSEND(t)}),this.control.on("HINT",function(t){return n.cmdHINT(t)}),this.control.on("EMOTES",function(t){return n.cmdEMOTES(t)}),this.control.on("HELP",function(t){return n.cmdHELP(t)}),this.control.on("ME",function(t){return n.cmdME(t)}),this.control.on("MESSAGE",function(t){return n.cmdWHISPER(t)}),this.control.on("MSG",function(t){return n.cmdWHISPER(t)}),this.control.on("WHISPER",function(t){return n.cmdWHISPER(t)}),this.control.on("W",function(t){return n.cmdWHISPER(t)}),this.control.on("TELL",function(t){return n.cmdWHISPER(t)}),this.control.on("T",function(t){return n.cmdWHISPER(t)}),this.control.on("NOTIFY",function(t){return n.cmdWHISPER(t)}),this.control.on("IGNORE",function(t){return n.cmdIGNORE(t)}),this.control.on("UNIGNORE",function(t){return n.cmdUNIGNORE(t)}),this.control.on("MUTE",function(t){return n.cmdMUTE(t)}),this.control.on("BAN",function(t){return n.cmdBAN(t)}),this.control.on("IPBAN",function(t){return n.cmdBAN(t)}),this.control.on("UNMUTE",function(t){return n.cmdUNBAN(t)}),this.control.on("UNBAN",function(t){return n.cmdUNBAN(t)}),this.control.on("UNBAN",function(t){return n.cmdUNBAN(t)}),this.control.on("SUBONLY",function(t){return n.cmdSUBONLY(t)}),this.control.on("MAXLINES",function(t){return n.cmdMAXLINES(t)}),this.control.on("UNHIGHLIGHT",function(t){return n.cmdTOGGLEHIGHLIGHT(t)}),this.control.on("HIGHLIGHT",function(t){return n.cmdTOGGLEHIGHLIGHT(t)}),this.control.on("TIMESTAMPFORMAT",function(t){return n.cmdTIMESTAMPFORMAT(t)}),this.control.on("BROADCAST",function(t){return n.cmdBROADCAST(t)}),this.formatters.push(new et["default"](this)),this.formatters.push(new V["default"](this)),this.formatters.push(new J["default"](this)),this.formatters.push(new z["default"](this)),this.formatters.push(new q["default"](this)),this.scrollPlugin=new D["default"](this.output,{sliderMinHeight:40,tabIndex:1}),this.autocomplete=new w["default"](this),this.emoticons.forEach(function(t){return n.autocomplete.addEmote(t)}),this.twitchemotes.forEach(function(t){return n.autocomplete.addEmote(t)}),this.inputhistory=new N["default"](this),this.highlighter=new j["default"](this),this.userfocus=new _["default"](this,this.css),this.menus=new Map([["settings",new x["default"](t("#chat-settings"),this)],["emotes",new U["default"](t("#chat-emote-list"),this)],["users",new M["default"](t("#chat-user-list"),this)],["pm",new k["default"](t("#chat-pm-notification"),this)]]),this.toolbuttons=new Map([["users",t("#chat-users-btn")],["settings",t("#chat-settings-btn")],["emoticon",t("#emoticon-btn")]]),this.setUnreadMessageCount(this.pmcountnum),this.updateSettingsCss(),this.updateIgnoreRegex(),this.toolbuttons.get("settings").on("click",function(t){return n.menus.get("settings").toggle(t.target)}),this.toolbuttons.get("emoticon").on("click",function(t){return n.menus.get("emotes").toggle(t.target)}),this.toolbuttons.get("users").on("click",function(t){return n.menus.get(n.pmcountnum>0?"pm":"users").toggle(t.target)}),this.ui.on("submit",function(t){t.preventDefault(),t.stopPropagation(),n.control.emit("SEND",n.input.val().toString().trim()),n.input.val("").focus()}),this.output.on("update",(0,l["default"])(function(){return n.scrollnotify.toggle(!n.scrollPlugin.isPinned())},100)),this.scrollnotify.on("click",function(){return n.scrollPlugin.updateAndPin(!0)}),this.mousedown=!1,this.waspinned=!0,this.waitingtopin=!1;var i=(0,l["default"])(function(){n.waspinned&&!n.mousedown&&(n.scrollPlugin.updateAndPin(!0),n.log.debug("Unfreeze scrolling.")),n.waitingtopin=!1},750);this.output.on("mouseup",function(){n.mousedown=!1,n.waitingtopin=!0,i()}),this.output.on("mousedown",function(){n.mousedown=!0,n.waitingtopin||(n.waspinned=n.scrollPlugin.isPinned(),n.log.debug("Freeze scrolling.",n.waspinned)),g["default"].closeMenus(n)});var s=null,r=!1,u=(0,l["default"])(function(){n.scrollPlugin.updateAndPin(s),r=!1},300);t(window).on("resize",function(){r||(s=n.scrollPlugin.isPinned(),r=!0),u()}),t("#chat-login-msg").on("click","a",function(e){e.preventDefault();try{if(window.self!==window.top)return void(window.parent.location.href=t(e.target).attr("href")+"?follow="+encodeURIComponent(window.parent.location.pathname))}catch(n){}window.location.href=t(e.target).attr("href")+"?follow="+encodeURIComponent(window.location.pathname)}),this.backlogLoading=!0,this.backlog.forEach(function(t){return n.source.parseAndDispatch({data:t})}),this.backlog.length>0&&this.push(v["default"].uiMessage("<hr/>")),this.scrollPlugin.updateAndPin(!0),this.backlogLoading=!1,this.push(v["default"].statusMessage("Connecting...")),this.source.connect()}},{key:"addBacklog",value:function(t){var e;(e=this.backlog).push.apply(e,o(t))}},{key:"sendCommand",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=(e||"").match(/([^ ]+)/g);this.log.log(t,"->",n),this.control.emit(t,n||[])}},{key:"addUser",value:function(t){var n=this.users.get(t.nick);return n?t.hasOwnProperty("features")&&!e.isArraysEqual(t.features,n.features)&&(n.features=t.features):(n=new m["default"](t),this.users.set(t.nick,n)),n}},{key:"onDISPATCH",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;"object"===("undefined"==typeof e?"undefined":r(e))&&!function(){var n=function(e){var n=e.nick,i=e.ignored;return t.autocomplete.toggleNick(n,i)};e.hasOwnProperty("nick")&&n(t.addUser(e)),e.hasOwnProperty("users")&&e.users.forEach(function(e){return n(t.addUser(e))})}()}},{key:"onCLOSE",value:function(){var t=this,e=this.connected;if(this.connected=!1,this.reconnect){var n=e?Math.floor(2500*Math.random())+501:Math.floor(25001*Math.random())+5e3;setTimeout(function(){return t.source.connect()},n),this.push(v["default"].statusMessage("Disconnected... reconnecting in "+Math.round(n/1e3)+" seconds"))}}},{key:"onNAMES",value:function(t){this.push(v["default"].statusMessage("Connected. Server connections: "+t.connectioncount)),this.showstarthint&&(this.showstarthint=!1,this.sendCommand("HINT"))}},{key:"onJOIN",value:function(t){}},{key:"onQUIT",value:function(t){this.users.has(t.nick)&&(delete this.users["delete"](t.nick),this.autocomplete.removeNick(t.nick))}},{key:"onMSG",value:function(t){var e=("/me "===t.data.substring(0,4)?t.data.substring(4):t.data).trim(),n=this.emoticons.has(e)||this.twitchemotes.has(e);n&&null!==this.lastMessage&&this.lastMessage.message===e?this.lastMessage instanceof C["default"]?this.lastMessage.incEmoteCount():(this.lastMessage.ui.remove(),this.push(new C["default"](e,t.timestamp,2))):this.resolveMessage(t)||this.push(new b["default"](t.data,this.users.get(t.nick),t.timestamp))}},{key:"onMUTE",value:function(t){var e=t.data;this.user.username.toLowerCase()===t.data.toLowerCase()?e="You have been":this.user.hasAnyFeatures(it["default"].SUBSCRIBERT3,it["default"].SUBSCRIBERT4,it["default"].SUBSCRIBERT2,it["default"].ADMIN,it["default"].MODERATOR)||this.removeMessageByUsername(t.data),this.push(v["default"].commandMessage(e+" muted by "+t.nick,t.timestamp))}},{key:"onUNMUTE",value:function(t){var e=t.data;this.user.username.toLowerCase()===t.data.toLowerCase()&&(e="You have been"),this.push(v["default"].commandMessage(e+" unmuted by "+t.nick,t.timestamp))}},{key:"onBAN",value:function(t){var e=t.data;this.user.username.toLowerCase()===e.toLowerCase()?(e="You have been",this.ui.addClass("banned")):this.user.hasAnyFeatures(it["default"].SUBSCRIBERT3,it["default"].SUBSCRIBERT4,it["default"].SUBSCRIBERT2,it["default"].ADMIN,it["default"].MODERATOR)||this.removeMessageByUsername(t.data),this.push(v["default"].commandMessage(e+" banned by "+t.nick,t.timestamp))}},{key:"onUNBAN",value:function(t){var e=t.data;this.user.username.toLowerCase()===t.data.toLowerCase()&&(e="You have been",this.ui.removeClass("banned")),this.push(v["default"].commandMessage(e+" unbanned by "+t.nick,t.timestamp))}},{key:"onERR",value:function(t){this.reconnect="toomanyconnections"!==t&&"banned"!==t;var e=this.errorstrings.has(t)?this.errorstrings.get(t):t;this.push(v["default"].errorMessage(e))}},{key:"onSUBONLY",value:function(t){var e="on"===t.data?"enabled":"disabled";this.push(v["default"].commandMessage("Subscriber only mode "+e+" by "+t.nick,t.timestamp))}},{key:"onBROADCAST",value:function(t){var e=this;this.backlogLoading||("redirect:"===t.data.substring(0,9)?!function(){var n=t.data.substring(9);setTimeout(function(){window.parent?window.parent.location.href=n:window.location.href=n},5e3),e.push(v["default"].broadcastMessage("Redirecting in 5 seconds to "+n,t.timestamp))}():this.push(v["default"].broadcastMessage(t.data,t.timestamp)))}},{key:"onPRIVMSGSENT",value:function(){this.push(v["default"].infoMessage("Your message has been sent!"))}},{key:"onPRIVMSG",value:function(t){var e=this.users.get(t.nick);e&&!this.shouldIgnoreUser(e.username)&&(this.setUnreadMessageCount(this.pmcountnum+1),this.push(new T["default"](t.data,e,t.messageid,t.timestamp)))}},{key:"cmdSEND",value:function(t){var e=t.toLowerCase();if(""!==e&&"/me"!==e&&"/me "!==e){if(null===this.user||!this.user.username)return this.push(v["default"].errorMessage(this.errorstrings.get("needlogin")));if(/^\/[^\/|me]/i.test(t)){var n=t.split(" ",1)[0];this.sendCommand(n.substring(1).toUpperCase(),t.substring(n.length+1))}else{var i=("/me "===e.substring(0,4)?t.substring(4):t).trim();if(this.isEmote(i))this.source.send("MSG",{data:t});else{var o=new b["default"](t,this.user);this.push(o),this.unresolved.unshift(o),this.source.send("MSG",{data:t})}}this.inputhistory.add(t),this.autocomplete.markLastComplete()}}},{key:"cmdEMOTES",value:function(){this.push(v["default"].infoMessage("Available emoticons: "+this.emoticons.join(", ")+" (www.destiny.gg/emotes)"))}},{key:"cmdHELP",value:function(){this.push(v["default"].infoMessage("Available commands: /emotes /me /msg /ignore (without arguments to list the nicks ignored) /unignore /highlight (highlights target nicks messages for easier visibility) /unhighlight /maxlines /mute /unmute /subonly /ban /ipban /unban (also unbans ip bans) /timestampformat"))}},{key:"cmdHINT",value:function(){for(var t=-1,e=null,n=[].concat(o(this.hints.keys()));;){if(++t,t>=this.hints.size){e=n[0],this.shownhints.clear(),this.shownhints.add(e);break}if(e=n[t],!this.shownhints.has(e)){this.shownhints.add(e);break}}W["default"].write("chat.shownhints",this.shownhints),this.push(v["default"].infoMessage(this.hints.get(e)))}},{key:"cmdME",value:function(t){this.source.send("MSG",{data:t.join(" ")})}},{key:"cmdWHISPER",value:function(t){t[0]&&this.nickregex.test(t[0].toLowerCase())?t[0].toLowerCase()===this.user.username.toLowerCase()?this.push(v["default"].errorMessage("Cannot send a message to yourself")):this.source.send("PRIVMSG",{nick:t[0],data:t.slice(1,t.length).join(" ")}):this.push(v["default"].errorMessage("Invalid nick - /msg nick message"))}},{key:"cmdIGNORE",value:function(t){var e=t[0]||null;e?this.nickregex.test(e)?(this.ignoreNick(e,!0),this.removeMessageByUsername(e),this.push(v["default"].statusMessage("Ignoring "+e))):this.push(v["default"].infoMessage("Invalid nick - /ignore nick")):this.ignoring.size<=0?this.push(v["default"].infoMessage("Your ignore list is empty")):this.push(v["default"].infoMessage("Ignoring the following people: "+Array.from(this.ignoring.values()).join(", ")))}},{key:"cmdUNIGNORE",value:function(t){var e=t[0]||null;e&&this.nickregex.test(e)?(this.ignoreNick(e,!1),this.push(v["default"].statusMessage(e+" has been removed from your ignore list"))):this.push(v["default"].errorMessage("Invalid nick - /ignore nick"))}},{key:"cmdMUTE",value:function(t){if(t[0])if(this.nickregex.test(t[0])){var n=t[1]?e.parseTimeInterval(t[1]):null;n&&n>0?this.source.send("MUTE",{data:t[0],duration:n}):this.source.send("MUTE",{data:t[0]})}else this.push(v["default"].infoMessage("Invalid nick - /mute nick[ time]"));else this.push(v["default"].infoMessage("Usage: /mute nick[ time]"))}},{key:"cmdBAN",value:function(t,n){if(t.length<3)this.push(v["default"].infoMessage("Usage: /"+n+" nick time reason (time can be 'permanent')"));else if(this.nickregex.test(t[0]))if(t[2]){var i={nick:t[0],reason:t.slice(2,t.length).join(" ")};"IPBAN"===n||/^perm/i.test(t[1])?i.ispermanent="IPBAN"===n||/^perm/i.test(t[1]):i.duration=e.parseTimeInterval(t[1]),this.source.send("BAN",i)}else this.push(v["default"].errorMessage("Providing a reason is mandatory"));else this.push(v["default"].infoMessage("Invalid nick"))}},{key:"cmdUNBAN",value:function(t,e){t[0]?this.nickregex.test(t[0])?this.source.send(e,{data:t[0]}):this.push(v["default"].infoMessage("Invalid nick - /"+e+" nick")):this.push(v["default"].infoMessage("Usage: /"+e+" nick"))}},{key:"cmdSUBONLY",value:function(t,e){"on"!==t[0]&&"off"!==t[0]?this.push(v["default"].errorMessage("Invalid argument - /"+e+" on/off")):this.source.send(e.toUpperCase(),{data:t[0]})}},{key:"cmdMAXLINES",value:function(t,e){if(t[0]){var n=Math.abs(parseInt(t[0],10));n?(this.settings.set("maxlines",n),W["default"].write("chat.settings",this.settings),this.updateSettingsCss(),this.push(v["default"].infoMessage("Current number of lines shown: "+this.settings.get("maxlines")))):this.push(v["default"].infoMessage("Invalid argument - /"+e+" is expecting a number"))}else this.push(v["default"].infoMessage("Current number of lines shown: "+this.settings.get("maxlines")))}},{key:"cmdTOGGLEHIGHLIGHT",value:function(t,e){var n=this.settings.get("highlightnicks"),i=Object.keys(n);if(t[0])if(this.nickregex.test(t[1])){var o=t[0].toLowerCase();switch(e){case"UNHIGHLIGHT":n[o]&&delete n[o],this.push(v["default"].infoMessage("No longer highlighting "+o));break;default:case"HIGHLIGHT":n[o]||(n[o]=!0),this.push(v["default"].infoMessage("Now highlighting "+o))}this.settings.set("highlightnicks",n),W["default"].write("chat.settings",this.settings),this.highlighter.loadHighlighters(),this.highlighter.redraw(),this.updateSettingsCss()}else this.push(v["default"].errorMessage("Invalid nick - /"+e+" nick"));else this.push(v["default"].infoMessage("Currently highlighted users: "+i.join(", ")))}},{key:"cmdTIMESTAMPFORMAT",value:function(t){if(t[0]){var e=t.slice(1,t.length);/^[a-z :.,-\\*]+$/i.test(e)?(this.settings.set("timestampformat",e),W["default"].write("chat.settings",this.settings),this.updateSettingsCss(),this.push(v["default"].infoMessage("New format: "+this.settings.get("timestampformat")))):this.push(v["default"].errorMessage("Invalid format, see: http://momentjs.com/docs/#/displaying/format/"))}else this.push(v["default"].infoMessage("Current format: "+this.settings.get("timestampformat")+" (the default is 'HH:mm', for more info: http://momentjs.com/docs/#/displaying/format/)"))}},{key:"cmdBROADCAST",value:function(t){this.source.send("BROADCAST",{data:t.join(" ")})}},{key:"push",value:function(t){if(!(t instanceof b["default"]&&this.shouldIgnoreMessage(t.message))){var n=this.settings.get("maxlines"),i=this.lines.children(),o=this.scrollPlugin.isPinned()&&!this.mousedown&&!this.waitingtopin;return o&&i.length>=n&&i.slice(0,i.length-n).remove(),t.highlighted=this.highlighter.mustHighlight(t),this.lines.append(t.attach(this)),this.backlogLoading||(this.log.debug("Update scroll Pinned: "+o+" contentScrollTop: "+this.scrollPlugin.scroller.contentScrollTop+" maxScrollTop: "+this.scrollPlugin.scroller.maxScrollTop),this.scrollPlugin.updateAndPin(o),t.highlighted&&this.settings.get("allowNotifications")&&!this.input.is(":focus")&&e.showNotification(t)),this.lastMessage=t,t}}},{key:"resolveMessage",value:function(t){var e=!0,n=!1,i=void 0;try{for(var o,s=this.unresolved[Symbol.iterator]();!(e=(o=s.next()).done);e=!0){var r=o.value;if(this.user.username===t.nick&&r.message===t.data)return this.unresolved.splice(0,1)[0].resolve(this)}}catch(u){n=!0,i=u}finally{try{!e&&s["return"]&&s["return"]()}finally{if(n)throw i}}return null}},{key:"removeMessageByUsername",value:function(t){this.lines.children('div[data-username="'+t.toLowerCase()+'"]').remove(),this.scrollPlugin.reset()}},{key:"ignoreNick",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t=t.toLowerCase(),e?this.ignoring.has(t)&&this.ignoring["delete"](t):this.ignoring.add(t),W["default"].write("chat.ignoring",this.ignoring),this.updateIgnoreRegex()}},{key:"shouldIgnoreMessage",value:function(t){return""!==t&&this.ignoreregex&&this.ignoreregex.test(t)}},{key:"shouldIgnoreUser",value:function(t){return this.ignoring.has(t.toLowerCase())}},{key:"updateSettingsCss",value:function(){var t=this;Array.from(this.settings.keys()).filter(function(e){return"boolean"==typeof t.settings.get(e)}).forEach(function(e){return t.ui.toggleClass("pref-"+e,t.settings.get(e))})}},{key:"updateIgnoreRegex",value:function(){var t=Array.from(this.ignoring.values()).map(e.makeSafeForRegex);this.ignoreregex=t.length>0?new RegExp(t.join("|"),"i"):null}},{key:"setUnreadMessageCount",value:function(t){this.pmcountnum=Math.max(0,t),this.pmcount.toggleClass("hidden",!this.pmcountnum).text(this.pmcountnum)}},{key:"isEmote",value:function(t){return this.emoticons.has(t)||this.twitchemotes.has(t)}}],[{key:"isArraysEqual",value:function(t,e){return(!t||!e)&&(t.length!==e.length||t.sort().toString()!==e.sort().toString())}},{key:"showNotification",value:function(t){"granted"===Notification.permission&&!function(){var e=new Notification(t.user.username+" said ...",{body:t.message,tag:"dgg"+t.timestamp.valueOf(),icon:"/notifyicon.png",dir:"auto"});setTimeout(function(){return e.close()},5e3),e.onclick=function(){}}()}},{key:"makeSafeForRegex",value:function(t){return t.trim().replace(/[\-\[\]\/{}()*+?.\\\^$|]/g,"\\$&")}},{key:"parseTimeInterval",value:function(t){var e=0,n={s:1e9,sec:1e9,secs:1e9,second:1e9,seconds:1e9,m:6e10,min:6e10,mins:6e10,minute:6e10,minutes:6e10,h:36e11,hr:36e11,hrs:36e11,hour:36e11,hours:36e11,d:864e11,day:864e11,days:864e11};return t.replace(/(\d+(?:\.\d*)?)([a-z]+)?/gi,function(t,i,o){i*=o?n[o.toLowerCase()]||n.s:n.s,e+=+i}),e}}]),e}();e["default"]=at}).call(e,n(6))},79:function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(){n(this,t),this.listeners=new Map}return i(t,[{key:"on",value:function(t,e){return this.listeners.has(t)||this.listeners.set(t,[]),this.listeners.get(t).push(e),this}},{key:"emit",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var o=this.listeners.get(t);return!(!o||!o.length)&&(o.forEach(function(t){return t.apply(void 0,n)}),!0)}}]),t}();e["default"]=o},80:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(1),l=i(a),c=n(300),h=i(c),f=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"chat";o(this,e);var r=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.type=i,r.timestamp=n?l["default"].utc(n).local():(0,l["default"])(),r}return r(e,t),u(e,[{key:"wrapTime",value:function(){
var t=this.timestamp.format("MMMM Do YYYY, h:mm:ss a"),e=this.timestamp.format(this.chat.settings.get("timestampformat"));return'<time class="time" title="'+t+'">'+e+"</time>"}},{key:"wrapMessage",value:function(){var t=this,e=this.message;return this.chat.formatters.forEach(function(n){return e=n.format(e,t.user)}),'<span class="text">'+e+"</span>"}},{key:"html",value:function(){return this.wrap(this.wrapTime()+" "+this.wrapMessage())}}],[{key:"uiMessage",value:function(t){return new h["default"](t)}},{key:"statusMessage",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new e(t,n,"status")}},{key:"errorMessage",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new e(t,n,"error")}},{key:"infoMessage",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new e(t,n,"info")}},{key:"broadcastMessage",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new e(t,n,"broadcast")}},{key:"commandMessage",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new e(t,n,"command")}}]),e}(h["default"]);e["default"]=f},81:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(80),l=i(a),c=n(45),h=i(c),f=function(t){function e(t,n,i){o(this,e);var r=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,"user"));return r.user=n,r.highlighted=!1,r.prepareMessage(),r}return r(e,t),u(e,[{key:"prepareMessage",value:function(){this.isSlashMe=!1,"/me "===this.message.substring(0,4)?(this.isSlashMe=!0,this.message=this.message.substring(4)):"//"===this.message.substring(0,2)&&(this.message=this.message.substring(1))}},{key:"wrapUser",value:function(t){var n=t.features.length>0?'<span class="features">'+e.getFeatureHTML(t)+"</span>":"";return n+' <a class="user '+t.features.join(" ")+'">'+t.username+"</a>"}},{key:"html",value:function(){var t=[],e={};return this.user&&this.user.username&&(e["data-username"]=this.user.username.toLowerCase()),this.chat.user&&this.chat.user.username===this.user.username&&t.push("msg-own"),this.isSlashMe&&t.push("msg-emote"),this.highlighted&&t.push("msg-highlight"),this.chat.lastMessage&&this.chat.lastMessage.user&&this.user&&this.chat.lastMessage.user.username===this.user.username&&t.push("msg-continue"),this.wrap(this.wrapTime()+" "+this.wrapUser(this.user)+" "+this.wrapMessage(),t,e)}}],[{key:"getFeatureHTML",value:function(t){var e="";t.hasFeature(h["default"].SUBSCRIBERT4)?e+='<i class="icon-subscribert4" title="Subscriber (T4)"/>':t.hasFeature(h["default"].SUBSCRIBERT3)?e+='<i class="icon-subscribert3" title="Subscriber (T3)"/>':t.hasFeature(h["default"].SUBSCRIBERT2)?e+='<i class="icon-subscribert2" title="Subscriber (T2)"/>':t.hasFeature(h["default"].SUBSCRIBERT1)?e+='<i class="icon-subscriber" title="Subscriber (T1)"/>':!t.hasFeature(h["default"].SUBSCRIBERT0)&&t.hasFeature(h["default"].SUBSCRIBER)&&(e+='<i class="icon-subscriber" title="Subscriber (T1)"/>');var n=!0,i=!1,o=void 0;try{for(var s,r=t.features[Symbol.iterator]();!(n=(s=r.next()).done);n=!0){var u=s.value;switch(u){case h["default"].SUBSCRIBERT0:e+='<i class="icon-minitwitch" title="Twitch subscriber"/>';break;case h["default"].BOT:e+='<i class="icon-bot" title="Bot"/>';break;case h["default"].BOT2:e+='<i class="icon-bot2" title="Bot"/>';break;case h["default"].NOTABLE:e+='<i class="icon-notable" title="Notable"/>';break;case h["default"].TRUSTED:e+='<i class="icon-trusted" title="Trusted"/>';break;case h["default"].CONTRIBUTOR:e+='<i class="icon-contributor" title="Contributor"/>';break;case h["default"].COMPCHALLENGE:e+='<i class="icon-compchallenge" title="Composition Winner"/>';break;case h["default"].EVE:e+='<i class="icon-eve" title="Eve"/>';break;case h["default"].SC2:e+='<i class="icon-sc2" title="Starcraft 2"/>';break;case h["default"].BROADCASTER:e+='<i class="icon-broadcaster" title="Broadcaster"/>'}}}catch(a){i=!0,o=a}finally{try{!n&&r["return"]&&r["return"]()}finally{if(i)throw o}}return e}}]),e}(l["default"]);e["default"]=f},82:function(t,e){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=window.localStorage||{},r=window.JSON,u=function(){function t(){i(this,t)}return o(t,null,[{key:"write",value:function(t,e){var i="";try{i=r.stringify(e instanceof Map||e instanceof Set?[].concat(n(e)):e)}catch(o){}s.setItem(t,i)}},{key:"read",value:function(t){var e=null;try{e=r.parse(s.getItem(t))}catch(n){}return e}}]),t}();e["default"]=u},124:function(t,e,n){(function(t){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n(539);var s=function(){function e(n,o){i(this,e),this.scroller=t(n).nanoScroller(Object.assign({disableResize:!0,preventPageScrolling:!0},o))[0].nanoscroller}return o(e,[{key:"isPinned",value:function(){return!this.scroller.isActive||this.scroller.contentScrollTop>=this.scroller.maxScrollTop-30}},{key:"updateAndPin",value:function(t){this.reset(),t&&this.scroller.scrollBottom(0)}},{key:"reset",value:function(){this.scroller.reset()}}]),e}();e["default"]=s}).call(e,n(6))},285:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(78),u=i(r),a=function(){function t(e){var n=this;return o(this,t),this.minWordLength=1,this.maxResults=10,this.buckets={},this.origVal=null,this.searchResults=[],this.searchIndex=-1,this.searchWord=null,this.input=e.input,this.input[0].setSelectionRange?(setInterval(this.expireUsers.bind(this),6e4),this.input.on("mousedown",this.resetSearch.bind(this)),void this.input.on("keydown",function(t){9===t.which?(t.preventDefault(),t.stopPropagation(),n.searchResults.length<=0&&(n.resetSearch(),n.searchSelectWord(t.shiftKey)),n.showAutoComplete()):n.resetSearch()})):this}return s(t,[{key:"getBucketId",value:function(t){return 0===t.length?"":t[0].toLowerCase()}},{key:"addToBucket",value:function(t,e,n,i){var o=this.getBucketId(t);return this.buckets[o]||(this.buckets[o]={}),this.buckets[o][t]||(this.buckets[o][t]={data:t,weight:e,isemote:!!n,promoted:i}),this.buckets[o][t]}},{key:"toggleNick",value:function(t,e){return e?this.removeNick(t):this.updateNick(t)}},{key:"removeNick",value:function(t){var e=this.getBucketId(t);return!(!this.buckets[e]||!this.buckets[e][t])&&(delete this.buckets[e][t],!0)}},{key:"addEmote",value:function(t){this.addToBucket(t,1,!0,0)}},{key:"addNick",value:function(t){this.addToBucket(t,1,!1,0)}},{key:"updateNick",value:function(t){var e=Date.now(),n=this.addToBucket(t,e,!1,0);n.weight=e}},{key:"promoteNick",value:function(t){var e=Date.now(),n=this.addToBucket(t,1,!1,e);return n.isemote?this:void(n.promoted=e)}},{key:"getSearchWord",value:function(t,e){var n=t.substring(0,e),i=t.substring(e),o=n.lastIndexOf(" ")+1,s=i.indexOf(" "),r=!1;return o>0&&(n=n.substring(o)),s>-1&&(i=i.substring(0,s)),0===n.lastIndexOf("@")&&(o++,n=n.substring(1),r=!0),{word:n+i,startCaret:o,isUserSearch:r}}},{key:"sortResults",value:function(t,e){return t&&e?t.promoted!==e.promoted?t.promoted>e.promoted?-1:1:t.isemote!==e.isemote?t.isemote&&!e.isemote?-1:1:t.weight!==e.weight?t.weight>e.weight?-1:1:(t=t.data.toLowerCase(),e=e.data.toLowerCase(),t===e?0:t>e?1:-1):0}},{key:"searchBuckets",value:function(t,e,n){t=u["default"].makeSafeForRegex(t);var i=[],o=new RegExp("^"+t,"i"),s=this.buckets[this.getBucketId(t)]||{};for(var r in s)!s.hasOwnProperty(r)||n&&s[r].isemote||o.test(r)&&i.push(s[r]);return i.sort(this.sortResults),i.slice(0,e)}},{key:"expireUsers",value:function(){var t=Date.now()-6e5;for(var e in this.buckets)if(this.buckets.hasOwnProperty(e))for(var n in this.buckets[e])if(this.buckets[e].hasOwnProperty(n)){var i=this.buckets[e][n];!i.isemote&&i.promoted<=t&&(i.promoted=0),!i.isemote&&i.weight<=t&&(i.weight=1)}}},{key:"markLastComplete",value:function(){if(this.lastComplete){var t=this.buckets[this.getBucketId(this.lastComplete)]||{};if(!t[this.lastComplete])return this.lastComplete=null;if(t[this.lastComplete].isemote){for(var e in t)t.hasOwnProperty(e)&&(t[e].promoted=0);return this.lastComplete=null}this.promoteNick(this.lastComplete),this.lastComplete=null}}},{key:"resetSearch",value:function(){this.origVal=null,this.searchResults=[],this.searchIndex=-1,this.searchWord=null}},{key:"searchSelectWord",value:function(t){var e=this.getSearchWord(this.input.val(),this.input[0].selectionStart);if(e.word.length>=this.minWordLength){this.searchWord=e;var n=!!t||this.searchWord.isUserSearch;this.searchResults=this.searchBuckets(this.searchWord.word,this.maxResults,n),this.origVal=this.input.val().toString()}}},{key:"showAutoComplete",value:function(){this.searchIndex=this.searchIndex>=this.searchResults.length-1?0:this.searchIndex+1;var t=this.searchResults[this.searchIndex];if(t&&t.data!==this.searchWord.word){this.lastComplete=t.data;var e=this.origVal.substr(0,this.searchWord.startCaret),n=this.origVal.substr(this.searchWord.startCaret+this.searchWord.word.length);" "===n[0]&&0!==n.length||(n=" "+n),this.input.focus().val(e+t.data+n),this.input[0].setSelectionRange(e.length+t.data.length+1,e.length+t.data.length+1)}}}]),t}();e["default"]=a},286:function(t,e,n){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(66),u=i(r),a=function(){function e(t,n){var i=this;o(this,e),this.log=u["default"].make(this),this.chat=t,this.css=n,this.focused=[],this.chat.lines.on("mousedown",function(t){return i.toggleElement(t.target)})}return s(e,[{key:"toggleElement",value:function(e){var n=t(e);n.hasClass("chat-user")?this.toggleFocus(n.closest(".msg-user").data("username"),!0).toggleFocus(n.text().toLowerCase()):n.hasClass("user")?this.toggleFocus(n.closest(".msg-user").data("username")):this.focused.length>0&&this.clearFocus()}},{key:"addCssRule",value:function(t){this.log.debug("Add focus user",t),this.css.insertRule('.msg-user[data-username="'+t+'"]{opacity:1 !important;}',this.focused.length),this.focused.push(t),this.redraw()}},{key:"removeCssRule",value:function(t){this.log.debug("Remove focus user",t),this.css.deleteRule(t),this.focused.splice(t,1),this.redraw()}},{key:"clearFocus",value:function(){var t=this;this.log.debug("Clearing focus",this.focused.length),this.focused.forEach(function(e){return t.css.deleteRule(0)}),this.focused=[],this.redraw()}},{key:"redraw",value:function(){this.chat.ui.toggleClass("focus-user",this.focused.length>0)}},{key:"toggleFocus",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.focused.indexOf(t.toLowerCase()),i=n!==-1;return null===e&&(e=!i),e&&!i?this.addCssRule(t):!e&&i&&this.removeCssRule(n),this}}]),e}();e["default"]=a}).call(e,n(6))},287:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(56),c=i(l),h=n(45),f=i(h),d=function(t){function e(t){s(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),i=[].concat(o(t.emoticons)).join("|"),u=[].concat(o(t.twitchemotes)).join("|");return n.emoteregex=new RegExp("(^|\\s)("+i+")(?=$|\\s)"),n.gemoteregex=new RegExp("(^|\\s)("+i+")(?=$|\\s)","gm"),n.twitchemoteregex=new RegExp("(^|\\s)("+i+"|"+u+")(?=$|\\s)","gm"),n}return u(e,t),a(e,[{key:"format",value:function(t,e){var n=e&&e.features.length>0?e.hasFeature(f["default"].SUBSCRIBERT0)?this.twitchemoteregex:this.gemoteregex:this.emoteregex;return t.replace(n,'$1<div title="$2" class="chat-emote chat-emote-$2">$2 </div>')}}]),e}(c["default"]);e["default"]=d},288:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(56),l=i(a),c=n(45),h=i(c),f=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),u(e,[{key:"format",value:function(t,e){return e&&0===t.indexOf("&gt;")&&e.hasAnyFeatures(h["default"].SUBSCRIBERT3,h["default"].SUBSCRIBERT4,h["default"].SUBSCRIBERT2,h["default"].ADMIN,h["default"].MODERATOR)&&(t='<span class="greentext">'+t+"</span>"),t}}]),e}(l["default"]);e["default"]=f},289:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(56),l=i(a),c=document.createElement("div"),h=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return r(e,t),u(e,[{key:"format",value:function(t){return c.textContent=t,c.innerHTML}}]),e}(l["default"]);e["default"]=h},290:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(56),l=i(a),c=function(t){function e(t){o(this,e);var n=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.userregex=/((?:^|\s)@?)([a-zA-Z0-9_]{3,20})(?=$|\s|[\.\?!,])/g,n}return r(e,t),u(e,[{key:"format",value:function(t,e){var n=this;return t.replace(this.userregex,function(t,e,i){return n.chat.users.has(i)?e+'<span class="chat-user">'+i+"</span>":t})}}]),e}(l["default"]);e["default"]=c},291:function(t,e,n){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(56),l=i(a),c=function(e){function i(e){o(this,i);var r=s(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e)),u=n(537),a="(?:"+u.join("|")+")",l={"p{L}":"\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC","p{N}":"\\u0030-\\u0039\\u00B2\\u00B3\\u00B9\\u00BC-\\u00BE\\u0660-\\u0669\\u06F0-\\u06F9\\u07C0-\\u07C9\\u0966-\\u096F\\u09E6-\\u09EF\\u09F4-\\u09F9\\u0A66-\\u0A6F\\u0AE6-\\u0AEF\\u0B66-\\u0B6F\\u0B72-\\u0B77\\u0BE6-\\u0BF2\\u0C66-\\u0C6F\\u0C78-\\u0C7E\\u0CE6-\\u0CEF\\u0D66-\\u0D75\\u0E50-\\u0E59\\u0ED0-\\u0ED9\\u0F20-\\u0F33\\u1040-\\u1049\\u1090-\\u1099\\u1369-\\u137C\\u16EE-\\u16F0\\u17E0-\\u17E9\\u17F0-\\u17F9\\u1810-\\u1819\\u1946-\\u194F\\u19D0-\\u19DA\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1B50-\\u1B59\\u1BB0-\\u1BB9\\u1C40-\\u1C49\\u1C50-\\u1C59\\u2070\\u2074-\\u2079\\u2080-\\u2089\\u2150-\\u2182\\u2185-\\u2189\\u2460-\\u249B\\u24EA-\\u24FF\\u2776-\\u2793\\u2CFD\\u3007\\u3021-\\u3029\\u3038-\\u303A\\u3192-\\u3195\\u3220-\\u3229\\u3248-\\u324F\\u3251-\\u325F\\u3280-\\u3289\\u32B1-\\u32BF\\uA620-\\uA629\\uA6E6-\\uA6EF\\uA830-\\uA835\\uA8D0-\\uA8D9\\uA900-\\uA909\\uA9D0-\\uA9D9\\uAA50-\\uAA59\\uABF0-\\uABF9\\uFF10-\\uFF19","p{Sc}":"\\u0024\\u00A2-\\u00A5\\u058F\\u060B\\u09F2\\u09F3\\u09FB\\u0AF1\\u0BF9\\u0E3F\\u17DB\\u20A0-\\u20B9\\uA838\\uFDFC\\uFE69\\uFF04\\uFFE0\\uFFE1\\uFFE5\\uFFE6","p{Sk}":"\\u005E\\u0060\\u00A8\\u00AF\\u00B4\\u00B8\\u02C2-\\u02C5\\u02D2-\\u02DF\\u02E5-\\u02EB\\u02ED\\u02EF-\\u02FF\\u0375\\u0384\\u0385\\u1FBD\\u1FBF-\\u1FC1\\u1FCD-\\u1FCF\\u1FDD-\\u1FDF\\u1FED-\\u1FEF\\u1FFD\\u1FFE\\u309B\\u309C\\uA700-\\uA716\\uA720\\uA721\\uA789\\uA78A\\uFBB2-\\uFBC1\\uFF3E\\uFF40\\uFFE3","p{So}":"\\u00A6\\u00A9\\u00AE\\u00B0\\u0482\\u060E\\u060F\\u06DE\\u06E9\\u06FD\\u06FE\\u07F6\\u09FA\\u0B70\\u0BF3-\\u0BF8\\u0BFA\\u0C7F\\u0D79\\u0F01-\\u0F03\\u0F13\\u0F15-\\u0F17\\u0F1A-\\u0F1F\\u0F34\\u0F36\\u0F38\\u0FBE-\\u0FC5\\u0FC7-\\u0FCC\\u0FCE\\u0FCF\\u0FD5-\\u0FD8\\u109E\\u109F\\u1390-\\u1399\\u1940\\u19DE-\\u19FF\\u1B61-\\u1B6A\\u1B74-\\u1B7C\\u2100\\u2101\\u2103-\\u2106\\u2108\\u2109\\u2114\\u2116\\u2117\\u211E-\\u2123\\u2125\\u2127\\u2129\\u212E\\u213A\\u213B\\u214A\\u214C\\u214D\\u214F\\u2195-\\u2199\\u219C-\\u219F\\u21A1\\u21A2\\u21A4\\u21A5\\u21A7-\\u21AD\\u21AF-\\u21CD\\u21D0\\u21D1\\u21D3\\u21D5-\\u21F3\\u2300-\\u2307\\u230C-\\u231F\\u2322-\\u2328\\u232B-\\u237B\\u237D-\\u239A\\u23B4-\\u23DB\\u23E2-\\u23F3\\u2400-\\u2426\\u2440-\\u244A\\u249C-\\u24E9\\u2500-\\u25B6\\u25B8-\\u25C0\\u25C2-\\u25F7\\u2600-\\u266E\\u2670-\\u26FF\\u2701-\\u2767\\u2794-\\u27BF\\u2800-\\u28FF\\u2B00-\\u2B2F\\u2B45\\u2B46\\u2B50-\\u2B59\\u2CE5-\\u2CEA\\u2E80-\\u2E99\\u2E9B-\\u2EF3\\u2F00-\\u2FD5\\u2FF0-\\u2FFB\\u3004\\u3012\\u3013\\u3020\\u3036\\u3037\\u303E\\u303F\\u3190\\u3191\\u3196-\\u319F\\u31C0-\\u31E3\\u3200-\\u321E\\u322A-\\u3247\\u3250\\u3260-\\u327F\\u328A-\\u32B0\\u32C0-\\u32FE\\u3300-\\u33FF\\u4DC0-\\u4DFF\\uA490-\\uA4C6\\uA828-\\uA82B\\uA836\\uA837\\uA839\\uAA77-\\uAA79\\uFDFD\\uFFE4\\uFFE8\\uFFED\\uFFEE\\uFFFC\\uFFFD"},c=l["p{L}"],h=l["p{N}"],f=c+h,d=f+"/\\-+=_&~*%@|#.,:;'?!"+l["p{Sc}"]+l["p{Sk}"]+l["p{So}"],p=f+"/\\-+=_&~*%;"+l["p{Sc}"],g="(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])",A="(?:\\b"+g+"\\."+g+"\\."+g+"\\."+g+"\\b)",m="["+f+"](?:["+f+"\\-]*["+f+"])?",E="(?:"+m+"\\.)+",v="(?:"+E+a+"|"+A+")",y="\\[["+d+"]*(?:\\[["+d+"]*\\]["+d+"]*)*\\]",b="\\(["+d+"]*(?:\\(["+d+"]*\\)["+d+"]*)*\\)",S=b+"|"+y,T="(?:["+d+"]*(?:"+S+"|["+p+"])+)+",O="(?:"+T+"|/|\\b|$)",C="(?::[0-9]+)?",I="(?:"+v+C+"/"+O+")|(?:"+v+C+"(?:\\b|$))",w="(https?|ftp)://",R="\\b"+w+T,N=R+"|"+I;return r.linkregex=new RegExp(N,"gi"),r._elem=t("<div/>"),r}return r(i,e),u(i,[{key:"encodeUrl",value:function(t){return t.replace(/&/g,"&amp;").replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1);return"&#"+(1024*(e-55296)+(n-56320)+65536)+";"}).replace(/([^\#-~| |!])/g,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}},{key:"format",value:function(t){if(t){var e=this,n="";return/\b(?:NSFL)\b/i.test(t)?n="nsfl-link":/\b(?:NSFW|SPOILER)\b/i.test(t)&&(n="nsfw-link"),t.replace(e.linkregex,function(t,i){i=i?"":"http://";var o=e._elem.html(t).text(),s=o.match(e.linkregex);if(!s)return t;t=e.encodeUrl(s[0]);var r=e.encodeUrl(o.substring(s[0].length)),u=i+t;return'<a target="_blank" class="externallink '+n+'" href="'+u+'" rel="nofollow">'+t+"</a>"+r})}}}]),i}(l["default"]);e["default"]=c}).call(e,n(6))},292:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(78),u=i(r),a=n(81),l=i(a),c=n(45),h=i(c),f=function(){function t(e){o(this,t),this.chat=e,this.customregex=null,this.userregex=null,this.highlightnicks=null,this.loadHighlighters()}return s(t,[{key:"loadHighlighters",value:function(){var t=this.chat.settings.get("customhighlight").map(u["default"].makeSafeForRegex).join("|");""!==t&&(this.customregex=new RegExp("\\b(?:"+t+")\\b","i")),this.chat.user&&this.chat.user.username&&(this.userregex=new RegExp("\\b@?(?:"+this.chat.user.username+")\\b","i")),this.highlightnicks=Object.keys(this.chat.settings.get("highlightnicks"))}},{key:"mustHighlight",value:function(t){return!(!(this.chat.user&&t instanceof l["default"]&&this.chat.settings.get("highlight"))||t.user.hasFeature(h["default"].BOT)||t.user.username===this.chat.user.username)&&Boolean(this.highlightnicks.find(function(e){return t.user.username.toLowerCase()===e.toLowerCase()})||this.userregex&&this.userregex.test(t.message)||this.customregex&&this.customregex.test(t.message))}},{key:"redraw",value:function(){}}]),t}();e["default"]=f},293:function(t,e,n){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(82),u=i(r),a=n(66),l=i(a),c=function(){function e(n){var i=this;o(this,e),this.log=l["default"].make(this),this.input=t(n.input),this.history=u["default"].read("chat.history")||[],this.index=-1,this.lastinput="",this.maxentries=20,this.input.on("keyup",function(t){t.shiftKey||t.metaKey||t.ctrlKey||38!==t.which&&40!==t.which?i.index=-1:i.show(38===t.which?-1:1)})}return s(e,[{key:"show",value:function(t){var e=t===-1?"UP":"DOWN";if(this.log.debug("Show "+e+"("+t+") index "+this.index+" total "+this.history.length),this.index<0){if(t!==-1)return;if(this.index=this.history.length,this.lastinput=this.input.val(),this.index<=0)return}var n=this.index+t;return n>=this.history.length||n<0?void(n>=this.history.length&&(this.input.val(this.lastinput),this.index=-1)):(this.index=n,void this.input.val(this.history[n]))}},{key:"add",value:function(t){this.log.debug("Add",t),
this.index=-1,this.history.length>0&&this.history[this.history.length-1]===t||(this.history.push(t),this.history.length>this.maxentries&&(this.history=this.history.slice(0,this.history.length-this.maxentries)),u["default"].write("chat.history",this.history))}}]),e}();e["default"]=c}).call(e,n(6))},294:function(t,e,n){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(57),c=i(l),h=function(e){function n(e,i){s(this,n);var u=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,i));return u.input=t(u.chat.input),u.temotes=t("#twitch-emotes"),u.demotes=t("#destiny-emotes"),u.demotes.append([].concat(o(u.chat.emoticons)).map(function(t){return n.buildEmote(t)}).join("")),u.temotes.append([].concat(o(u.chat.twitchemotes)).map(function(t){return n.buildEmote(t)}).join("")),u.ui.on("click",".chat-emote",function(t){return u.selectEmote(t.target.innerText)}),u}return u(n,e),a(n,[{key:"selectEmote",value:function(t){var e=this.input.val().toString().trim();this.input.val(e+(""===e?"":" ")+t+" ").focus()}}],[{key:"buildEmote",value:function(t){return'<div class="emote"><span title="'+t+'" class="chat-emote chat-emote-'+t+'">'+t+"</span></div>"}}]),n}(c["default"]);e["default"]=h}).call(e,n(6))},295:function(t,e,n){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=n(57),a=i(u),l=function(e){function n(e,i){o(this,n);var r=s(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,i));return r.ui.on("click","#user-list-link",function(){a["default"].closeMenus(r.chat),r.chat.menus.get("users").show(r.btn)}),r.ui.on("click","#markread-privmsg",function(){r.chat.setUnreadMessageCount(0),a["default"].closeMenus(r.chat),t.ajax({type:"POST",url:"/profile/messages/openall"})}),r.ui.on("click","#inbox-privmsg",function(){r.chat.setUnreadMessageCount(0),a["default"].closeMenus(r.chat)}),r}return r(n,e),n}(a["default"]);e["default"]=l}).call(e,n(6))},296:function(t,e,n){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function g(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:g(o,e,n)}if("value"in i)return i.value;var s=i.get;if(void 0!==s)return s.call(n)},c=n(57),h=i(c),f=n(82),d=i(f),p=function(e){function n(e,i){s(this,n);var u=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,i));return u.notificationEl=u.ui.find("#chat-settings-notification-permissions"),u.customHighlightEl=u.ui.find("input[name=customhighlight]"),u.allowNotificationsEl=u.ui.find('input[name="allowNotifications"]'),u.customHighlightEl.on("keypress blur",function(e){if(!e.which||13===e.which){var n=t(e.target).val().toString().split(",").map(function(t){return t.trim()});u.chat.settings.set("customhighlight",[].concat(o(new Set(n)))),u.chat.highlighter.loadHighlighters(),u.chat.highlighter.redraw()}}),u.ui.on("change",'input[type="checkbox"]',function(e){var n=t(e.target).attr("name"),i=t(e.target).is(":checked");switch(n){case"showtime":u.updateSetting(n,i);break;case"hideflairicons":u.updateSetting(n,i);break;case"highlight":u.updateSetting(n,i);break;case"allowNotifications":i?u.notificationPermission().then(function(t){return u.updateSetting(n,!0)},function(t){return u.updateSetting(n,!1)}):u.updateSetting(n,!1)}}),u}return u(n,e),a(n,[{key:"show",value:function(t){var e=this;l(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"show",this).call(this,t),Object.keys(this.chat.settings).forEach(function(t){e.ui.find("input[name="+t+'][type="checkbox"]').prop("checked",e.chat.settings.get(t))}),"granted"!==Notification.permission&&this.allowNotificationsEl.prop("checked",!1),this.customHighlightEl.val(this.chat.settings.get("customhighlight").join(",")),this.updateNotification()}},{key:"updateSetting",value:function(t,e){this.updateNotification(),this.chat.settings.set(t,e),d["default"].write("chat.settings",this.chat.settings),this.chat.updateSettingsCss(),this.chat.scrollPlugin.updateAndPin(this.chat.scrollPlugin.isPinned())}},{key:"updateNotification",value:function(){var t="default"===Notification.permission?"required":Notification.permission;this.notificationEl.text("(Permission "+t+")")}},{key:"notificationPermission",value:function(){return new Promise(function(t,e){switch(Notification.permission){case"default":Notification.requestPermission(function(n){switch(n){case"granted":t(n);break;default:e(n)}});break;case"granted":t(Notification.permission);break;case"denied":default:e(Notification.permission)}})}}]),n}(h["default"]);e["default"]=p}).call(e,n(6))},297:function(t,e,n){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function p(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:p(o,e,n)}if("value"in i)return i.value;var s=i.get;if(void 0!==s)return s.call(n)},l=n(57),c=i(l),h=n(45),f=i(h),d=function(e){function n(e,i){o(this,n);var r=s(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,i));return r.header=r.ui.find("h5 span"),r.groupsEl=t("#chat-groups"),r.group1=t('<ul id="chat-group1">'),r.group2=t('<ul id="chat-group2">'),r.group3=t('<ul id="chat-group3">'),r.group4=t('<ul id="chat-group4">'),r.group5=t('<ul id="chat-group5">'),r.groups=[r.group1,r.group2,r.group3,r.group4,r.group5],r.groupsEl.on("click",".user",function(t){return r.chat.userfocus.toggleFocus(t.target.textContent)}),r.chat.source.on("JOIN",function(t){return r.addAndRedraw(t.nick)}),r.chat.source.on("QUIT",function(t){return r.removeAndRedraw(t.nick)}),r.chat.source.on("NAMES",function(t){return r.redraw()}),r}return r(n,e),u(n,[{key:"redraw",value:function(){var t=this;this.visible&&(this.groups.forEach(function(t){return t.detach().children("li").remove()}),this.chat.users.forEach(function(e){var n=e.username;return t.addUser(n)}),this.sort(),this.groupsEl.append(this.groups),this.header.text(this.chat.users.size)),a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"redraw",this).call(this)}},{key:"addAndRedraw",value:function(t){this.visible&&!this.hasUser(t)&&(this.addUser(t),this.sort(),this.redraw())}},{key:"removeAndRedraw",value:function(t){this.visible&&this.hasUser(t)&&(this.removeUser(t),this.redraw())}},{key:"removeUser",value:function(t){return this.groupsEl.find('.user[data-username="'+t+'"]').parent().remove()}},{key:"addUser",value:function(t){var e=this.chat.users.get(t),n='<li><a data-username="'+e.username+'" class="user '+e.features.join(" ")+'">'+e.username+"</a></li>";e.hasFeature(f["default"].BOT)||e.hasFeature(f["default"].BOT2)?this.group5.append(n):e.hasFeature(f["default"].ADMIN)||e.hasFeature(f["default"].VIP)?this.group1.append(n):e.hasFeature(f["default"].BROADCASTER)?this.group2.append(n):e.hasFeature(f["default"].SUBSCRIBER)?this.group3.append(n):this.group4.append(n)}},{key:"hasUser",value:function(t){return this.groupsEl.find('.user[data-username="'+t+'"]').length>0}},{key:"sort",value:function(){this.groups.forEach(function(t){t.children(".user").get().sort(function(t,e){return t.getAttribute("data-username").localeCompare(e.getAttribute("data-username"))}).forEach(function(t){return t.parentNode.appendChild(t)})})}}]),n}(c["default"]);e["default"]=d}).call(e,n(6))},298:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(80),l=i(a),c=function(t){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;o(this,e);var r=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,"emote"));return r.emotecount=i,r.emotecountui=null,r}return r(e,t),u(e,[{key:"getEmoteCountLabel",value:function(){return"<i class='count'>"+this.emotecount+"</i><i class='x'>X</i> C-C-C-COMBO"}},{key:"html",value:function(){return this.wrap(this.wrapTime()+" "+this.wrapMessage()+' <span class="emotecount">'+this.getEmoteCountLabel()+"<span>")}},{key:"incEmoteCount",value:function(){++this.emotecount;var t="";this.emotecount>=50?t=" x50":this.emotecount>=30?t=" x30":this.emotecount>=20?t=" x20":this.emotecount>=10?t=" x10":this.emotecount>=5&&(t=" x5"),this.emotecountui||(this.emotecountui=this.ui.find(".emotecount")),this.emotecountui.detach().attr("class","emotecount"+t).html(this.getEmoteCountLabel()).appendTo(this.ui)}}]),e}(l["default"]);e["default"]=c},299:function(t,e,n){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function f(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:f(o,e,n)}if("value"in i)return i.value;var s=i.get;if(void 0!==s)return s.call(n)},l=n(81),c=i(l),h=function(e){function n(t,e,i,r){o(this,n);var u=s(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e,r,"user"));return u.user=e,u.messageid=i,u.isSlashMe=!1,u}return r(n,e),u(n,[{key:"attach",value:function(e){var i=this;return a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"attach",this).call(this,e),this.ui.on("click",".mark-as-read",function(e){t.ajax({type:"POST",url:"/profile/messages/"+encodeURIComponent(i.messageid)+"/open"}).then(function(t){return i.chat.setUnreadMessageCount(t.unread||0)}),i.ui.find(".icon-mail-send").attr("class","icon-mail-open-document"),i.ui.find(".message-actions").remove(),e.preventDefault(),e.stopPropagation()})}},{key:"wrapUser",value:function(t){return' <i class="icon-mail-send" title="Received Message"></i> <a class="user">'+t.username+"</a>"}},{key:"html",value:function(){var t=[],e={};return t.push("private-message"),e["data-messageid"]=this.messageid,e["data-username"]=this.user.username.toLowerCase(),this.wrap(this.wrapTime()+(' <a class="user">'+this.user.username+"</a> ")+this.wrapMessage()+'<span class="message-actions"><a href="#" class="mark-as-read">Mark as read <i class="fa fa-check-square-o"></i></a></span><i class="speech-arrow"></i>',t,e)}}]),n}(c["default"]);e["default"]=h}).call(e,n(6))},300:function(t,e,n){(function(t){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function e(t){n(this,e),this.ui=null,this.chat=null,this.message=t,this.type="ui"}return i(e,[{key:"resolve",value:function(){return this}},{key:"attach",value:function(e,n){return this.chat=e,this.ui=t(this.html()),this.ui}},{key:"wrap",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.unshift("msg-"+this.type),i["class"]=n.join(" "),t("<div>",i).html(e)[0].outerHTML}},{key:"html",value:function(){return this.wrap(this.message)}}]),e}();e["default"]=o}).call(e,n(6))},301:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(79),l=i(a),c=n(66),h=i(c),f=window.WebSocket||window.MozWebSocket,d=function(t){function e(t,n){o(this,e);var i=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.log=h["default"].make(i),i.sock=null,i.server=n,i.chat=t,i}return r(e,t),u(e,[{key:"connect",value:function(){var t=this;try{this.sock=new f(this.server),this.sock.onopen=function(e){return t.emit("OPEN",e)},this.sock.onclose=function(e){return t.emit("CLOSE",e)},this.sock.onerror=function(e){return t.emit("ERR","socketerror")},this.sock.onmessage=function(e){return t.parseAndDispatch(e)}}catch(e){return this.log.error(e),this.emit("ERR","unknown")}}},{key:"parseAndDispatch",value:function(t){var e=t.data.split(" ",1)[0].toUpperCase(),n=t.data.substring(e.length+1),i=null;try{i=JSON.parse(n)}catch(o){i=n}this.log.log(e,i),this.emit("DISPATCH",i),this.emit(e,i)}},{key:"send",value:function(t,e){var n="string"==typeof e?e:JSON.stringify(e);this.sock.send(t+" "+n)}}]),e}(l["default"]);e["default"]=d},302:function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e){n(this,t),this.nick=e.nick||"",this.username=e.nick||"",this.features=e.features||[]}return i(t,[{key:"hasAnyFeatures",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=!0,o=!1,s=void 0;try{for(var r,u=e[Symbol.iterator]();!(i=(r=u.next()).done);i=!0){var a=r.value;if(this.features.indexOf(a)!==-1)return!0}}catch(l){o=!0,s=l}finally{try{!i&&u["return"]&&u["return"]()}finally{if(o)throw s}}return!1}},{key:"hasFeature",value:function(t){return this.hasAnyFeatures(t)}}]),t}();t.exports=o},490:function(t,e,n){var i=n(491);t.exports=function(t,e,n){function o(){var c=i()-a;c<e&&c>0?s=setTimeout(o,e-c):(s=null,n||(l=t.apply(u,r),s||(u=r=null)))}var s,r,u,a,l;return null==e&&(e=100),function(){u=this,r=arguments,a=i();var c=n&&!s;return s||(s=setTimeout(o,e)),c&&(l=t.apply(u,r),u=r=null),l}}},491:function(t,e){function n(){return(new Date).getTime()}t.exports=Date.now||n},492:76,493:76,536:function(t,e){t.exports={destiny:["Dravewin","INFESTINY","FIDGETLOL","Hhhehhehe","GameOfThrows","WORTH","FeedNathan","Abathur","LUL","Heimerdonger","SoSad","DURRSTINY","SURPRISE","NoTears","OverRustle","DuckerZ","Kappa","Klappa","DappaKappa","BibleThump","AngelThump","FrankerZ","BasedGod","OhKrappa","SoDoge","WhoahDude","MotherFuckinGame","DaFeels","UWOTM8","CallCatz","CallChad","DatGeoff","Disgustiny","FerretLOL","Sippy","DestiSenpaii","Nappa","DAFUK","AYYYLMAO","DANKMEMES","MLADY","SOTRIGGERED","MASTERB8","NOTMYTEMPO","LIES","LeRuse","YEE","SWEATSTINY","PEPE","CheekerZ","SpookerZ","SLEEPSTINY","PICNIC","Memegasm","WEEWOO","KappaRoss","ASLAN","DJAslan","TRUMPED","BASEDWATM8","BERN","HmmStiny"],twitch:["nathanD","nathanDank","nathanF","nathanNotears","nathanPepe","nathanRustle","nathanTowel","nathanWat","nathanThinking","nathanRuse","nathanYee","nathanWeeb"]}},537:function(t,e){t.exports=["NORTHWESTERNMUTUAL","TRAVELERSINSURANCE","AMERICANEXPRESS","KERRYPROPERTIES","SANDVIKCOROMANT","AFAMILYCOMPANY","AMERICANFAMILY","BANANAREPUBLIC","CANCERRESEARCH","COOKINGCHANNEL","KERRYLOGISTICS","WEATHERCHANNEL","INTERNATIONAL","LIFEINSURANCE","ORIENTEXPRESS","SPREADBETTING","TRAVELCHANNEL","WOLTERSKLUWER","CONSTRUCTION","LPLFINANCIAL","PAMPEREDCHEF","SCHOLARSHIPS","VERSICHERUNG","ACCOUNTANTS","BARCLAYCARD","BLACKFRIDAY","BLOCKBUSTER","BRIDGESTONE","CALVINKLEIN","CONTRACTORS","CREDITUNION","ENGINEERING","ENTERPRISES","FOODNETWORK","INVESTMENTS","KERRYHOTELS","LAMBORGHINI","MOTORCYCLES","OLAYANGROUP","PHOTOGRAPHY","PLAYSTATION","PRODUCTIONS","PROGRESSIVE","REDUMBRELLA","RIGHTATHOME","WILLIAMHILL","ACCOUNTANT","APARTMENTS","ASSOCIATES","BASKETBALL","BNPPARIBAS","BOEHRINGER","CAPITALONE","CONSULTING","CREDITCARD","CUISINELLA","EUROVISION","EXTRASPACE","FOUNDATION","HEALTHCARE","IMMOBILIEN","INDUSTRIES","MANAGEMENT","MITSUBISHI","NATIONWIDE","NEWHOLLAND","NEXTDIRECT","ONYOURSIDE","PROPERTIES","PROTECTION","PRUDENTIAL","REALESTATE","REPUBLICAN","RESTAURANT","SCHAEFFLER","SWIFTCOVER","TATAMOTORS","TECHNOLOGY","TELEFONICA","UNIVERSITY","VISTAPRINT","VLAANDEREN","VOLKSWAGEN","ACCENTURE","ALFAROMEO","ALLFINANZ","AMSTERDAM","ANALYTICS","AQUARELLE","BARCELONA","BLOOMBERG","CHRISTMAS","COMMUNITY","DIRECTORY","EDUCATION","EQUIPMENT","FAIRWINDS","FINANCIAL","FIRESTONE","FRESENIUS","FRONTDOOR","FUJIXEROX","FURNITURE","GOLDPOINT","GOODHANDS","HISAMITSU","HOMEDEPOT","HOMEGOODS","HOMESENSE","HONEYWELL","INSTITUTE","INSURANCE","KUOKGROUP","LADBROKES","LANCASTER","LANDROVER","LIFESTYLE","MARKETING","MARSHALLS","MCDONALDS","MELBOURNE","MICROSOFT","MONTBLANC","PANASONIC","PASSAGENS","PRAMERICA","RICHARDLI","SCJOHNSON","SHANGRILA","SOLUTIONS","STATEBANK","STATEFARM","STOCKHOLM","TRAVELERS","VACATIONS","YODOBASHI","ABUDHABI","AIRFORCE","ALLSTATE","ATTORNEY","BARCLAYS","BAREFOOT","BARGAINS","BASEBALL","BOUTIQUE","BRADESCO","BROADWAY","BRUSSELS","BUDAPEST","BUILDERS","BUSINESS","CAPETOWN","CATERING","CATHOLIC","CHRYSLER","CIPRIANI","CITYEATS","CLEANING","CLINIQUE","CLOTHING","COMMBANK","COMPUTER","DELIVERY","DELOITTE","DEMOCRAT","DIAMONDS","DISCOUNT","DISCOVER","DOWNLOAD","ENGINEER","ERICSSON","ESURANCE","EVERBANK","EXCHANGE","FEEDBACK","FIDELITY","FIRMDALE","FOOTBALL","FRONTIER","GOODYEAR","GRAINGER","GRAPHICS","GUARDIAN","HDFCBANK","HELSINKI","HOLDINGS","HOSPITAL","INFINITI","IPIRANGA","ISTANBUL","JPMORGAN","LIGHTING","LUNDBECK","MARRIOTT","MASERATI","MCKINSEY","MEMORIAL","MORTGAGE","MOVISTAR","MUTUELLE","OBSERVER","PARTNERS","PHARMACY","PICTURES","PLUMBING","PROPERTY","REDSTONE","RELIANCE","SAARLAND","SAMSCLUB","SECURITY","SERVICES","SHOPPING","SHOWTIME","SOFTBANK","SOFTWARE","STCGROUP","SUPPLIES","SYMANTEC","TELECITY","TRAINING","UCONNECT","VANGUARD","VENTURES","VERISIGN","WOODSIDE","YOKOHAMA","ABOGADO","ACADEMY","AGAKHAN","ALIBABA","ANDROID","ATHLETA","AUCTION","AUDIBLE","AUSPOST","AVIANCA","BANAMEX","BAUHAUS","BENTLEY","BESTBUY","BOOKING","BROTHER","BUGATTI","CAPITAL","CARAVAN","CAREERS","CARTIER","CHANNEL","CHINTAI","CITADEL","CLUBMED","COLLEGE","COLOGNE","COMCAST","COMPANY","COMPARE","CONTACT","COOKING","CORSICA","COUNTRY","COUPONS","COURSES","CRICKET","CRUISES","DENTIST","DIGITAL","DOMAINS","EXPOSED","EXPRESS","FARMERS","FASHION","FERRARI","FERRERO","FINANCE","FISHING","FITNESS","FLIGHTS","FLORIST","FLOWERS","FORSALE","FROGANS","FUJITSU","GALLERY","GENTING","GODADDY","GUITARS","HAMBURG","HANGOUT","HITACHI","HOLIDAY","HOSTING","HOTELES","HOTMAIL","HYUNDAI","ISELECT","ISMAILI","JEWELRY","JUNIPER","KITCHEN","KOMATSU","LACAIXA","LANCOME","LANXESS","LASALLE","LATROBE","LECLERC","LIAISON","LIMITED","LINCOLN","MARKETS","METLIFE","MONSTER","NETBANK","NETFLIX","NETWORK","NEUSTAR","OKINAWA","OLDNAVY","ORGANIC","ORIGINS","PANERAI","PHILIPS","PIONEER","POLITIE","REALTOR","RECIPES","RENTALS","REVIEWS","REXROTH","SAMSUNG","SANDVIK","SCHMIDT","SCHWARZ","SCIENCE","SHIKSHA","SHRIRAM","SINGLES","SPIEGEL","STAPLES","STARHUB","STATOIL","STORAGE","SUPPORT","SURGERY","SYSTEMS","TEMASEK","THEATER","THEATRE","TICKETS","TIFFANY","TOSHIBA","TRADING","WALMART","WANGGOU","WATCHES","WEATHER","WEBSITE","WEDDING","WHOSWHO","WINDOWS","WINNERS","XFINITY","YAMAXUN","YOUTUBE","ZUERICH","ABARTH","ABBOTT","ABBVIE","ACTIVE","AGENCY","AIRBUS","AIRTEL","ALIPAY","ALSACE","ALSTOM","ANQUAN","ARAMCO","AUTHOR","BAYERN","BEAUTY","BERLIN","BHARTI","BLANCO","BOSTIK","BOSTON","BROKER","CAMERA","CAREER","CASEIH","CASINO","CENTER","CHANEL","CHROME","CHURCH","CIRCLE","CLAIMS","CLINIC","COFFEE","COMSEC","CONDOS","COUPON","CREDIT","CRUISE","DATING","DATSUN","DEALER","DEGREE","DENTAL","DESIGN","DIRECT","DOCTOR","DUNLOP","DUPONT","DURBAN","EMERCK","ENERGY","ESTATE","EVENTS","EXPERT","FAMILY","FLICKR","FUTBOL","GALLUP","GARDEN","GEORGE","GIVING","GLOBAL","GOOGLE","GRATIS","HEALTH","HERMES","HIPHOP","HOCKEY","HUGHES","IMAMAT","INSURE","INTUIT","JAGUAR","JOBURG","JUEGOS","KAUFEN","KINDER","KINDLE","KOSHER","LANCIA","LATINO","LAWYER","LEFRAK","LIVING","LOCKER","LONDON","LUXURY","MADRID","MAISON","MAKEUP","MARKET","MATTEL","MOBILY","MONASH","MORMON","MOSCOW","MUSEUM","MUTUAL","NAGOYA","NATURA","NISSAN","NISSAY","NORTON","NOWRUZ","OFFICE","OLAYAN","ONLINE","ORACLE","ORANGE","OTSUKA","PFIZER","PHOTOS","PHYSIO","PIAGET","PICTET","QUEBEC","RACING","REALTY","REISEN","REPAIR","REPORT","REVIEW","ROCHER","ROGERS","RYUKYU","SAFETY","SAKURA","SANOFI","SCHOOL","SCHULE","SECURE","SELECT","SHOUJI","SOCCER","SOCIAL","STREAM","STUDIO","SUPPLY","SUZUKI","SWATCH","SYDNEY","TAIPEI","TAOBAO","TARGET","TATTOO","TENNIS","TIENDA","TJMAXX","TKMAXX","TOYOTA","TRAVEL","UNICOM","VIAJES","VIKING","VILLAS","VIRGIN","VISION","VOTING","VOYAGE","VUELOS","WALTER","WARMAN","WEBCAM","XIHUAN","XPERIA","YACHTS","YANDEX","ZAPPOS","ACTOR","ADULT","AETNA","AMFAM","AMICA","APPLE","ARCHI","AUDIO","AUTOS","AZURE","BAIDU","BEATS","BIBLE","BINGO","BLACK","BOATS","BOOTS","BOSCH","BUILD","CANON","CARDS","CHASE","CHEAP","CHLOE","CISCO","CITIC","CLICK","CLOUD","COACH","CODES","CROWN","CYMRU","DABUR","DANCE","DEALS","DELTA","DODGE","DRIVE","DUBAI","EARTH","EDEKA","EMAIL","EPOST","EPSON","FAITH","FEDEX","FINAL","FOREX","FORUM","GALLO","GAMES","GIFTS","GIVES","GLADE","GLASS","GLOBO","GMAIL","GREEN","GRIPE","GROUP","GUCCI","GUIDE","HOMES","HONDA","HORSE","HOUSE","HYATT","IINET","IKANO","INTEL","IRISH","IVECO","JETZT","KOELN","KYOTO","LAMER","LEASE","LEGAL","LEXUS","LILLY","LINDE","LIPSY","LIXIL","LOANS","LOCUS","LOTTE","LOTTO","LUPIN","MACYS","MANGO","MEDIA","MIAMI","MONEY","MOPAR","MOVIE","NADEX","NEXUS","NIKON","NINJA","NOKIA","NOWTV","OMEGA","OSAKA","PARIS","PARTS","PARTY","PHOTO","PIZZA","PLACE","POKER","PRAXI","PRESS","PRIME","PROMO","QUEST","RADIO","REHAB","REISE","RICOH","ROCKS","RODEO","SALON","SENER","SEVEN","SHARP","SHELL","SHOES","SKYPE","SLING","SMART","SMILE","SOLAR","SPACE","STADA","STORE","STUDY","STYLE","SUCKS","SWISS","TATAR","TIRES","TIROL","TMALL","TODAY","TOKYO","TOOLS","TORAY","TOTAL","TOURS","TRADE","TRUST","TUNES","TUSHU","UBANK","VEGAS","VIDEO","VISTA","VODKA","VOLVO","WALES","WATCH","WEBER","WEIBO","WORKS","WORLD","XEROX","YAHOO","ZIPPO","local","onion","AARP","ABLE","ADAC","AERO","AIGO","AKDN","ALLY","AMEX","ARMY","ARPA","ARTE","ASDA","ASIA","AUDI","AUTO","BABY","BAND","BANK","BBVA","BEER","BEST","BIKE","BING","BLOG","BLUE","BOFA","BOND","BOOK","BUZZ","CAFE","CALL","CAMP","CARE","CARS","CASA","CASE","CASH","CBRE","CERN","CHAT","CITI","CITY","CLUB","COOL","COOP","CYOU","DATE","DCLK","DEAL","DELL","DESI","DIET","DISH","DOCS","DOHA","DUCK","DUNS","DVAG","ERNI","FAGE","FAIL","FANS","FARM","FAST","FIAT","FIDO","FILM","FIRE","FISH","FLIR","FOOD","FORD","FREE","FUND","GAME","GBIZ","GENT","GGEE","GIFT","GMBH","GOLD","GOLF","GOOG","GUGE","GURU","HAIR","HAUS","HDFC","HELP","HERE","HGTV","HOST","HSBC","ICBC","IEEE","IMDB","IMMO","INFO","ITAU","JAVA","JEEP","JOBS","JPRS","KDDI","KIWI","KPMG","KRED","LAND","LEGO","LGBT","LIDL","LIFE","LIKE","LIMO","LINK","LIVE","LOAN","LOFT","LOVE","LTDA","LUXE","MAIF","MEET","MEME","MENU","MINI","MINT","MOBI","MODA","MOTO","MTPC","NAME","NAVY","NEWS","NEXT","NICO","NIKE","OLLO","OPEN","PAGE","PARS","PCCW","PICS","PING","PINK","PLAY","PLUS","POHL","PORN","POST","PROD","PROF","QPON","RAID","READ","REIT","RENT","REST","RICH","RMIT","ROOM","RSVP","RUHR","SAFE","SALE","SAPO","SARL","SAVE","SAXO","SCOR","SCOT","SEAT","SEEK","SEXY","SHAW","SHIA","SHOP","SHOW","SILK","SINA","SITE","SKIN","SNCF","SOHU","SONG","SONY","SPOT","STAR","SURF","TALK","TAXI","TEAM","TECH","TEVA","TIAA","TIPS","TOWN","TOYS","TUBE","VANA","VISA","VIVA","VIVO","VOTE","VOTO","WANG","WEIR","WIEN","WIKI","WINE","WORK","XBOX","YOGA","ZARA","ZERO","ZONE","exit","zkey","AAA","ABB","ABC","ACO","ADS","AEG","AFL","AIG","ANZ","AOL","APP","ART","AWS","AXA","BAR","BBC","BBT","BCG","BCN","BET","BID","BIO","BIZ","BMS","BMW","BNL","BOM","BOO","BOT","BOX","BUY","BZH","CAB","CAL","CAM","CAR","CAT","CBA","CBN","CBS","CEB","CEO","CFA","CFD","COM","CRS","CSC","DAD","DAY","DDS","DEV","DHL","DIY","DNP","DOG","DOT","DTV","DVR","EAT","ECO","EDU","ESQ","EUS","FAN","FIT","FLY","FOO","FOX","FRL","FTR","FYI","GAL","GAP","GDN","GEA","GLE","GMO","GMX","GOO","GOP","GOT","GOV","HBO","HIV","HKT","HOT","HOW","HTC","IBM","ICE","ICU","IFM","ING","INK","INT","IST","ITV","IWC","JCB","JCP","JIO","JLC","JLL","JMP","JNJ","JOT","JOY","KFH","KIA","KIM","KPN","KRD","LAT","LAW","LDS","LOL","LPL","LTD","MAN","MBA","MCD","MED","MEN","MEO","MIL","MIT","MLB","MLS","MMA","MOE","MOI","MOM","MOV","MSD","MTN","MTR","NAB","NBA","NEC","NET","NEW","NFL","NGO","NHK","NOW","NRA","NRW","NTT","NYC","OBI","OFF","ONE","ONG","ONL","OOO","ORG","OTT","OVH","PAY","PET","PID","PIN","PNC","PRO","PRU","PUB","PWC","QVC","RED","REN","RIL","RIO","RIP","RUN","RWE","SAP","SAS","SBI","SBS","SCA","SCB","SES","SEW","SEX","SFR","SKI","SKY","SOY","SRL","SRT","STC","TAB","TAX","TCI","TDK","TEL","THD","TJX","TOP","TRV","TUI","TVS","UBS","UNO","UOL","UPS","VET","VIG","VIN","VIP","WED","WIN","WME","WOW","WTC","WTF","XIN","XXX","XYZ","YOU","YUN","ZIP","bit","gnu","i2p","AC","AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BM","BN","BO","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","ER","ES","ET","EU","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","ST","SU","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UK","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW"]},539:function(t,e,n){var i,o;/*! nanoScrollerJS - v0.8.7 - 2015
	* http://jamesflorentino.github.com/nanoScrollerJS/
	* Copyright (c) 2015 James Florentino; Licensed MIT */
!function(s){return i=[n(6)],o=function(t){return s(t,window,document)}.apply(e,i),!(void 0!==o&&(t.exports=o))}(function(t,e,n){"use strict";var i,o,s,r,u,a,l,c,h,f,d,p,g,A,m,E,v,y,b,S,T,O,C,I,w,R,N,B,D,F,M;C={paneClass:"nano-pane",sliderClass:"nano-slider",contentClass:"nano-content",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null},y="scrollbar",v="scroll",h="mousedown",f="mouseenter",d="mousemove",g="mousewheel",p="mouseup",E="resize",u="drag",a="enter",S="up",m="panedown",s="DOMMouseScroll",r="down",T="wheel",l="keydown",c="keyup",b="touchmove",i="Microsoft Internet Explorer"===e.navigator.appName&&/msie 7./i.test(e.navigator.appVersion)&&e.ActiveXObject,o=null,N=e.requestAnimationFrame,O=e.cancelAnimationFrame,D=n.createElement("div").style,M=function(){var t,e,n,i,o,s;for(i=["t","webkitT","MozT","msT","OT"],t=o=0,s=i.length;o<s;t=++o)if(n=i[t],e=i[t]+"ransform",e in D)return i[t].substr(0,i[t].length-1);return!1}(),F=function(t){return M!==!1&&(""===M?t:M+t.charAt(0).toUpperCase()+t.substr(1))},B=F("transform"),w=B!==!1,I=function(){var t,e,i;return t=n.createElement("div"),e=t.style,e.position="absolute",e.width="100px",e.height="100px",e.overflow=v,e.top="-9999px",n.body.appendChild(t),i=t.offsetWidth-t.clientWidth,n.body.removeChild(t),i},R=function(){var t,n,i;return n=e.navigator.userAgent,!!(t=/(?=.+Mac OS X)(?=.+Firefox)/.test(n))&&(i=/Firefox\/\d{2}\./.exec(n),i&&(i=i[0].replace(/\D+/g,"")),t&&+i>23)},A=function(){function l(i,s){this.el=i,this.options=s,o||(o=I()),this.$el=t(this.el),this.doc=t(this.options.documentContext||n),this.win=t(this.options.windowContext||e),this.body=this.doc.find("body"),this.$content=this.$el.children("."+this.options.contentClass),this.$content.attr("tabindex",this.options.tabIndex||0),this.content=this.$content[0],this.previousPosition=0,this.options.iOSNativeScrolling&&null!=this.el.style.WebkitOverflowScrolling?this.nativeScrolling():this.generate(),this.createEvents(),this.addEvents(),this.reset()}return l.prototype.preventScrolling=function(t,e){if(this.isActive)if(t.type===s)(e===r&&t.originalEvent.detail>0||e===S&&t.originalEvent.detail<0)&&t.preventDefault();else if(t.type===g){if(!t.originalEvent||!t.originalEvent.wheelDelta)return;(e===r&&t.originalEvent.wheelDelta<0||e===S&&t.originalEvent.wheelDelta>0)&&t.preventDefault()}},l.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"}),this.iOSNativeScrolling=!0,this.isActive=!0},l.prototype.updateScrollValues=function(){var t,e;t=this.content,this.maxScrollTop=t.scrollHeight-t.clientHeight,this.prevScrollTop=this.contentScrollTop||0,this.contentScrollTop=t.scrollTop,e=this.contentScrollTop>this.previousPosition?"down":this.contentScrollTop<this.previousPosition?"up":"same",this.previousPosition=this.contentScrollTop,"same"!==e&&this.$el.trigger("update",{position:this.contentScrollTop,maximum:this.maxScrollTop,direction:e}),this.iOSNativeScrolling||(this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=0===this.maxScrollTop?0:this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},l.prototype.setOnScrollStyles=function(){var t;w?(t={},t[B]="translate(0, "+this.sliderTop+"px)"):t={top:this.sliderTop},N?(O&&this.scrollRAF&&O(this.scrollRAF),this.scrollRAF=N(function(e){return function(){return e.scrollRAF=null,e.slider.css(t)}}(this))):this.slider.css(t)},l.prototype.createEvents=function(){this.events={down:function(t){return function(e){return t.isBeingDragged=!0,t.offsetY=e.pageY-t.slider.offset().top,t.slider.is(e.target)||(t.offsetY=0),t.pane.addClass("active"),t.doc.bind(d,t.events[u]).bind(p,t.events[S]),t.body.bind(f,t.events[a]),!1}}(this),drag:function(t){return function(e){return t.sliderY=e.pageY-t.$el.offset().top-t.paneTop-(t.offsetY||.5*t.sliderHeight),t.scroll(),t.contentScrollTop>=t.maxScrollTop&&t.prevScrollTop!==t.maxScrollTop?t.$el.trigger("scrollend"):0===t.contentScrollTop&&0!==t.prevScrollTop&&t.$el.trigger("scrolltop"),!1}}(this),up:function(t){return function(e){return t.isBeingDragged=!1,t.pane.removeClass("active"),t.doc.unbind(d,t.events[u]).unbind(p,t.events[S]),t.body.unbind(f,t.events[a]),!1}}(this),resize:function(t){return function(e){t.reset()}}(this),panedown:function(t){return function(e){return t.sliderY=(e.offsetY||e.originalEvent.layerY)-.5*t.sliderHeight,t.scroll(),t.events.down(e),!1}}(this),scroll:function(t){return function(e){t.updateScrollValues(),t.isBeingDragged||(t.iOSNativeScrolling||(t.sliderY=t.sliderTop,t.setOnScrollStyles()),null!=e&&(t.contentScrollTop>=t.maxScrollTop?(t.options.preventPageScrolling&&t.preventScrolling(e,r),t.prevScrollTop!==t.maxScrollTop&&t.$el.trigger("scrollend")):0===t.contentScrollTop&&(t.options.preventPageScrolling&&t.preventScrolling(e,S),0!==t.prevScrollTop&&t.$el.trigger("scrolltop"))))}}(this),wheel:function(t){return function(e){var n;if(null!=e)return n=e.delta||e.wheelDelta||e.originalEvent&&e.originalEvent.wheelDelta||-e.detail||e.originalEvent&&-e.originalEvent.detail,n&&(t.sliderY+=-n/3),t.scroll(),!1}}(this),enter:function(t){return function(e){var n;if(t.isBeingDragged)return 1!==(e.buttons||e.which)?(n=t.events)[S].apply(n,arguments):void 0}}(this)}},l.prototype.addEvents=function(){var t;this.removeEvents(),t=this.events,this.options.disableResize||this.win.bind(E,t[E]),this.iOSNativeScrolling||(this.slider.bind(h,t[r]),this.pane.bind(h,t[m]).bind(""+g+" "+s,t[T])),this.$content.bind(""+v+" "+g+" "+s+" "+b,t[v])},l.prototype.removeEvents=function(){var t;t=this.events,this.win.unbind(E,t[E]),this.iOSNativeScrolling||(this.slider.unbind(),this.pane.unbind()),this.$content.unbind(""+v+" "+g+" "+s+" "+b,t[v])},l.prototype.generate=function(){var t,n,i,s,r,u,a;return s=this.options,u=s.paneClass,a=s.sliderClass,t=s.contentClass,(r=this.$el.children("."+u)).length||r.children("."+a).length||this.$el.append('<div class="'+u+'"><div class="'+a+'" /></div>'),this.pane=this.$el.children("."+u),this.slider=this.pane.find("."+a),0===o&&R()?(i=e.getComputedStyle(this.content,null).getPropertyValue("padding-right").replace(/[^0-9.]+/g,""),n={right:-14,paddingRight:+i+14}):o&&(n={right:-o},this.$el.addClass("has-scrollbar")),null!=n&&this.$content.css(n),this},l.prototype.restore=function(){this.stopped=!1,this.iOSNativeScrolling||this.pane.show(),this.addEvents()},l.prototype.reset=function(){var t,e,n,s,r,u,a,l,c,h,f,d;return this.iOSNativeScrolling?void(this.contentHeight=this.content.scrollHeight):(this.$el.find("."+this.options.paneClass).length||this.generate().stop(),this.stopped&&this.restore(),t=this.content,s=t.style,r=s.overflowY,i&&this.$content.css({height:this.$content.height()}),e=t.scrollHeight+o,h=parseInt(this.$el.css("max-height"),10),h>0&&(this.$el.height(""),this.$el.height(t.scrollHeight>h?h:t.scrollHeight)),a=this.pane.outerHeight(!1),c=parseInt(this.pane.css("top"),10),u=parseInt(this.pane.css("bottom"),10),l=a+c+u,d=Math.round(l/e*a),d<this.options.sliderMinHeight?d=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&d>this.options.sliderMaxHeight&&(d=this.options.sliderMaxHeight),r===v&&s.overflowX!==v&&(d+=o),this.maxSliderTop=l-d,this.contentHeight=e,this.paneHeight=a,this.paneOuterHeight=l,this.sliderHeight=d,this.paneTop=c,this.slider.height(d),this.events.scroll(),this.pane.show(),this.isActive=!0,t.scrollHeight===t.clientHeight||this.pane.outerHeight(!0)>=t.scrollHeight&&r!==v?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===t.scrollHeight&&r===v?this.slider.hide():this.slider.show(),this.pane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),n=this.$content.css("position"),"static"!==n&&"relative"!==n||(f=parseInt(this.$content.css("right"),10),f&&this.$content.css({right:"",marginRight:f})),this)},l.prototype.scroll=function(){if(this.isActive)return this.sliderY=Math.max(0,this.sliderY),this.sliderY=Math.min(this.maxSliderTop,this.sliderY),this.$content.scrollTop(this.maxScrollTop*this.sliderY/this.maxSliderTop),this.iOSNativeScrolling||(this.updateScrollValues(),this.setOnScrollStyles()),this},l.prototype.scrollBottom=function(t){if(this.isActive)return this.$content.scrollTop(this.contentHeight-this.$content.height()-t).trigger(g),this.stop().restore(),this},l.prototype.scrollTop=function(t){if(this.isActive)return this.$content.scrollTop(+t).trigger(g),this.stop().restore(),this},l.prototype.scrollTo=function(t){if(this.isActive)return this.scrollTop(this.$el.find(t).get(0).offsetTop),this},l.prototype.stop=function(){return O&&this.scrollRAF&&(O(this.scrollRAF),this.scrollRAF=null),this.stopped=!0,this.removeEvents(),this.iOSNativeScrolling||this.pane.hide(),this},l.prototype.destroy=function(){return this.stopped||this.stop(),!this.iOSNativeScrolling&&this.pane.length&&this.pane.remove(),i&&this.$content.height(""),this.$content.removeAttr("tabindex"),this.$el.hasClass("has-scrollbar")&&(this.$el.removeClass("has-scrollbar"),this.$content.css({right:""})),this},l.prototype.flash=function(){if(!this.iOSNativeScrolling&&this.isActive)return this.reset(),this.pane.addClass("flashed"),setTimeout(function(t){return function(){t.pane.removeClass("flashed")}}(this),this.options.flashDelay),this},l}(),t.fn.nanoScroller=function(e){return this.each(function(){var n,i;if((i=this.nanoscroller)||(n=t.extend({},C,e),this.nanoscroller=i=new A(this,n)),e&&"object"==typeof e){if(t.extend(i.options,e),null!=e.scrollBottom)return i.scrollBottom(e.scrollBottom);if(null!=e.scrollTop)return i.scrollTop(e.scrollTop);if(e.scrollTo)return i.scrollTo(e.scrollTo);if("bottom"===e.scroll)return i.scrollBottom(0);if("top"===e.scroll)return i.scrollTop(0);if(e.scroll&&e.scroll instanceof t)return i.scrollTo(e.scroll);if(e.stop)return i.stop();if(e.destroy)return i.destroy();if(e.flash)return i.flash()}return i.reset()})},t.fn.nanoScroller.Constructor=A})}});