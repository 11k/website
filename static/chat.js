webpackJsonp([2],{0:function(e,t,i){(function(e){"use strict";i(26),i(23),i(19),i(24),i(236),i(235),window.destiny=i(22)["default"],window.Chat=i(179)["default"],window.setInterval(function(){e.ajax({url:"/ping",method:"get"})},6e5)}).call(t,i(3))},17:function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),n=function(){function e(t){i(this,e),this.chat=t}return s(e,[{key:"format",value:function(e,t){return e}}]),e}();t["default"]=n},18:function(e,t,i){(function(e){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),r=i(1),o=s(r),a=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"chat";n(this,t),this.ui=null,this.message=e,this.state=null,this.type=s,this.timestamp=i?o["default"].utc(i).local():(0,o["default"])()}return u(t,[{key:"status",value:function(e){this.ui&&(e?this.ui.addClass(e):this.ui.removeClass(this.state)),this.state=e}},{key:"wrapTime",value:function(){var e=this.timestamp.format("MMMM Do YYYY, h:mm:ss a"),t=this.timestamp.format(destiny.chat.gui.getPreference("timestampformat"));return'<time title="'+e+'" datetime="'+e+'">'+t+"</time>"}},{key:"wrapMessage",value:function(){var t=e('<span class="msg" />'),i=t.text(this.message)[0].innerHTML,s=!0,n=!1,u=void 0;try{for(var r,o=destiny.chat.gui.formatters[Symbol.iterator]();!(s=(r=o.next()).done);s=!0){var a=r.value;i=a.format(i,this.user,this.message)}}catch(l){n=!0,u=l}finally{try{!s&&o["return"]&&o["return"]()}finally{if(n)throw u}}return t.html(i).get(0).outerHTML}},{key:"html",value:function(){return this.wrap(this.wrapTime()+" "+this.wrapMessage())}},{key:"wrap",value:function(e){return'<div class="'+this.type+'-msg">'+e+"</div>"}}],[{key:"statusMessage",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new t(e,i,"status")}},{key:"errorMessage",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new t(e,i,"error")}},{key:"infoMessage",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new t(e,i,"info")}},{key:"broadcastMessage",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new t(e,i,"broadcast")}},{key:"commandMessage",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new t(e,i,"command")}}]),t}();t["default"]=a}).call(t,i(3))},21:function(e,t,i){(function(e){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),a=i(18),l=s(a),c=function(t){function i(e,t,s){n(this,i);var r=u(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,s,"user"));return r.user=t,r}return r(i,t),o(i,[{key:"prepareMessage",value:function(){this.isSlashMe=!1,"/me "===this.message.substring(0,4)?(this.isSlashMe=!0,this.message=this.message.substring(4)):"//"===this.message.substring(0,2)&&(this.message=this.message.substring(1))}},{key:"wrap",value:function(e,t){return this.user&&this.user.username?'<div class="'+this.type+"-msg"+(t?" "+t:"")+'" data-username="'+this.user.username.toLowerCase()+'">'+e+"</div>":'<div class="'+this.type+"-msg"+(t?" "+t:"")+'">'+e+"</div>"}},{key:"wrapUser",value:function(e){return(this.isSlashMe?"":i.getFeatureHTML(e))+' <a class="user '+e.features.join(" ")+'">'+e.username+"</a>"}},{key:"html",value:function(){var t=null,i=destiny.chat.gui.lastMessage;return t=i&&i.user&&this.user&&i.user.username==this.user.username?this.isSlashMe?this.wrap(this.wrapTime()+" *"+this.wrapUser(this.user)+" "+this.wrapMessage()):this.wrap(this.wrapTime()+' <span class="continue">&gt;</span> '+this.wrapMessage(),"continue"):this.wrap(this.wrapTime()+" "+(this.isSlashMe?"*":"")+this.wrapUser(this.user)+(this.isSlashMe?" ":": ")+this.wrapMessage()),e(t).toggleClass("own-msg",this.user&&destiny.chat.user&&destiny.chat.user.username==this.user.username),e(t).toggleClass("emote",this.isSlashMe),t}}],[{key:"getFeatureHTML",value:function(e){var t="";e.hasFeature(destiny.UserFeatures.SUBSCRIBERT4)?t+='<i class="icon-subscribert4" title="Subscriber (T4)"/>':e.hasFeature(destiny.UserFeatures.SUBSCRIBERT3)?t+='<i class="icon-subscribert3" title="Subscriber (T3)"/>':e.hasFeature(destiny.UserFeatures.SUBSCRIBERT2)?t+='<i class="icon-subscribert2" title="Subscriber (T2)"/>':e.hasFeature(destiny.UserFeatures.SUBSCRIBERT1)?t+='<i class="icon-subscriber" title="Subscriber (T1)"/>':!e.hasFeature(destiny.UserFeatures.SUBSCRIBERT0)&&e.hasFeature(destiny.UserFeatures.SUBSCRIBER)&&(t+='<i class="icon-subscriber" title="Subscriber (T1)"/>');for(var i=0;i<e.features.length;i++)switch(e.features[i]){case destiny.UserFeatures.SUBSCRIBERT0:t+='<i class="icon-minitwitch" title="Twitch subscriber"/>';break;case destiny.UserFeatures.BOT:t+='<i class="icon-bot" title="Bot"/>';break;case destiny.UserFeatures.BOT2:t+='<i class="icon-bot2" title="Bot"/>';break;case destiny.UserFeatures.NOTABLE:t+='<i class="icon-notable" title="Notable"/>';break;case destiny.UserFeatures.TRUSTED:t+='<i class="icon-trusted" title="Trusted"/>';break;case destiny.UserFeatures.CONTRIBUTOR:t+='<i class="icon-contributor" title="Contributor"/>';break;case destiny.UserFeatures.COMPCHALLENGE:t+='<i class="icon-compchallenge" title="Composition Winner"/>';break;case destiny.UserFeatures.EVE:t+='<i class="icon-eve" title="Eve"/>';break;case destiny.UserFeatures.SC2:t+='<i class="icon-sc2" title="Starcraft 2"/>';break;case destiny.UserFeatures.BROADCASTER:t+='<i class="icon-broadcaster" title="Broadcaster"/>'}return t}}]),i}(l["default"]);t["default"]=c}).call(t,i(3))},178:function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),n=function(){function e(t,s){i(this,e);var n=this;if(!t||0==t.length||!t[0].setSelectionRange)return this;this.minWordLength=1,this.maxResults=10,this.buckets={},this.origVal=null,this.searchResults=[],this.searchIndex=-1,this.searchWord=null,this.input=t;for(var u=s.length-1;u>=0;u--)this.addEmote(s[u]);setInterval(this.expireUsers.bind(this),1e5),this.input.on({mousedown:function(){n.resetSearch()},keydown:function(e){if(9==e.keyCode){var t=e.shiftKey;return n.searchResults.length<=0&&(n.resetSearch(),n.searchSelectWord(t)),n.showAutoComplete(),!1}return n.resetSearch(),!0}})}return s(e,[{key:"getBucketId",value:function(e){return 0==e.length?"":e[0].toLowerCase()}},{key:"addToBucket",value:function(e,t,i,s){if(this.input){var n=this.getBucketId(e);return this.buckets[n]||(this.buckets[n]={}),this.buckets[n][e]||(this.buckets[n][e]={data:e,weight:t,isemote:!!i,promoted:s}),this.buckets[n][e]}}},{key:"addEmote",value:function(e){this.addToBucket(e,1,!0,0)}},{key:"addNick",value:function(e){this.addToBucket(e,1,!1,0)}},{key:"updateNick",value:function(e){if(this.input){var t=Date.now(),i=this.addToBucket(e,t,!1,0);i.weight=t}}},{key:"promoteNick",value:function(e){var t=Date.now(),i=this.addToBucket(e,1,!1,t);return i.isemote?this:void(i.promoted=t)}},{key:"getSearchWord",value:function(e,t){var i=e.substring(0,t),s=e.substring(t),n=i.lastIndexOf(" ")+1,u=s.indexOf(" "),r=!1;return n>0&&(i=i.substring(n)),u>-1&&(s=s.substring(0,u)),0===i.lastIndexOf("@")&&(n++,i=i.substring(1),r=!0),{word:i+s,startCaret:n,isUserSearch:r}}},{key:"sortResults",value:function(e,t){return e&&t?e.promoted!=t.promoted?e.promoted>t.promoted?-1:1:e.isemote!=t.isemote?e.isemote&&!t.isemote?-1:1:e.weight!=t.weight?e.weight>t.weight?-1:1:(e=e.data.toLowerCase(),t=t.data.toLowerCase(),e==t?0:e>t?1:-1):0}},{key:"searchBuckets",value:function(e,t,i){e=e.trim().replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var s=[],n=new RegExp("^"+e,"i"),u=this.buckets[this.getBucketId(e)]||{};for(var r in u)!u.hasOwnProperty(r)||i&&u[r].isemote||n.test(r)&&s.push(u[r]);return s.sort(this.sortResults),s.slice(0,t)}},{key:"expireUsers",value:function(){var e=Date.now()-6e5;for(var t in this.buckets)if(this.buckets.hasOwnProperty(t))for(var i in this.buckets[t])if(this.buckets[t].hasOwnProperty(i)){var s=this.buckets[t][i];!s.isemote&&s.promoted<=e&&(s.promoted=0),!s.isemote&&s.weight<=e&&(s.weight=1)}}},{key:"markLastComplete",value:function(){if(this.lastComplete){var e=this.buckets[this.getBucketId(this.lastComplete)]||{};if(!e[this.lastComplete])return this.lastComplete=null;if(e[this.lastComplete].isemote){for(var t in e)e.hasOwnProperty(t)&&(e[t].promoted=0);return this.lastComplete=null}this.promoteNick(this.lastComplete),this.lastComplete=null}}},{key:"resetSearch",value:function(){this.origVal=null,this.searchResults=[],this.searchIndex=-1,this.searchWord=null}},{key:"searchSelectWord",value:function(e){var t=this.getSearchWord(this.input.val(),this.input[0].selectionStart);if(t.word.length>=this.minWordLength){this.searchWord=t;var i=!!e||this.searchWord.isUserSearch;this.searchResults=this.searchBuckets(this.searchWord.word,this.maxResults,i),this.origVal=this.input.val().toString()}}},{key:"showAutoComplete",value:function(){this.searchIndex>=this.searchResults.length-1?this.searchIndex=0:this.searchIndex=this.searchIndex+1;var e=this.searchResults[this.searchIndex];if(e&&e.data!=this.searchWord.word){this.lastComplete=e.data;var t=this.origVal.substr(0,this.searchWord.startCaret),i=this.origVal.substr(this.searchWord.startCaret+this.searchWord.word.length);" "==i[0]&&0!=i.length||(i=" "+i),this.input.focus().val(t+e.data+i),this.input[0].setSelectionRange(t.length+e.data.length+1,t.length+e.data.length+1)}}}]),e}();t["default"]=n},179:function(e,t,i){(function(e){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),r=i(189),o=s(r),a=i(184),l=s(a),c=i(187),h=s(c),f=i(186),A=s(f),d=i(21),p=s(d),g=i(18),E=s(g),m=function(){function t(e){n(this,t);var i="https:"===location.protocol?"wss://":"ws://";this.server=i+e.options.host+"/ws",this.connected=!1,this.debug=!1,this.users={},this.ignorelist={},this.errorstrings={unknown:"Unknown error, this usually indicates an internal problem :(",nopermission:"You do not have the required permissions to use that",protocolerror:"Invalid or badly formatted",needlogin:"You have to be logged in to use that",invalidmsg:"The message was invalid",throttled:"Throttled! You were trying to send messages too fast",duplicate:"The message is identical to the last one you sent",muted:"You are muted (subscribing auto-removes mutes)",submode:"The channel is currently in subscriber only mode",needbanreason:"Providing a reason for the ban is mandatory",banned:"You have been banned (subscribing auto-removes non-permanent bans), disconnecting",requiresocket:"This chat requires WebSockets",toomanyconnections:"Only 5 concurrent connections allowed",socketerror:"Error contacting server",privmsgbanned:"Cannot send private messages while banned",privmsgaccounttooyoung:"Your account is too recent to send private messages",notfound:"The user was not found"},this.hints={hint:"Type in /hint for more hints",slashhelp:"Type in /help for more advanced features, like modifying the scrollback size",tabcompletion:"Use the tab key to auto-complete usernames and emotes (for user only completion prepend a @ or press shift)",hoveremotes:"Hovering your mouse over an emote will show you the emote code",highlight:"Chat messages containing your username will be highlighted",notify:"Use /msg <username> to send a private message to someone",ignoreuser:"Use /ignore <username> to hide messages from pesky chatters",emotewiki:"For the list of available emotes type /emotes or https://destiny.gg/emotes",mutespermanent:"Mutes are never persistent, don't worry it will pass!"},this.hintindex=[];for(var s in this.hints)this.hints.hasOwnProperty(s)&&this.hintindex.push(s);this.user=new o["default"](e.user),this.gui=new l["default"](this,e.options),this.previousemote=null,this.originemote=null,this.showstarthint=!0,this.loadIgnoreList(),this.gui.loadBacklog()}return u(t,[{key:"start",value:function(){return window.MozWebSocket&&(window.WebSocket=MozWebSocket),window.WebSocket?(this.gui.push(E["default"].statusMessage("Connecting...")),void this.init()):this.gui.push(E["default"].errorMessage(this.errorstrings.requiresocket))}},{key:"l",value:function(){if(this.debug){var e=Function.prototype.bind.call(console.log,console);e.apply(console,arguments)}}},{key:"init",value:function(){var e=this;this.sock=new WebSocket(this.server),this.sock.onopen=function(){e.parseAndDispatch({data:'OPEN ""'})},this.sock.onerror=function(){e.parseAndDispatch({data:'ERR "socketerror"'})},this.sock.onclose=function(){e.parseAndDispatch({data:'CLOSE ""'})},this.sock.onmessage=this.parseAndDispatch.bind(this)}},{key:"loadIgnoreList",value:function(){try{this.ignorelist=JSON.parse(localStorage.chatignorelist||"{}")}catch(e){}this.ignoreregex=null}},{key:"parseAndDispatch",value:function(e){var t=e.data.split(" ",1)[0],i="on"+t,s=JSON.parse(e.data.substring(t.length+1));return this.l(i,s),"PING"==t?this.sock.send("PONG "+e.data.substring(t.length+1)):void(this[i]&&this[i](s))}},{key:"dispatchBacklog",value:function(e){var t=e.split(" ",1)[0],i="on"+t,s=JSON.parse(e.substring(t.length+1));this.users[s.nick]||(this.users[s.nick]=new o["default"](s)),this[i]&&this[i](s)}},{key:"emit",value:function(e,t){this.sock.send(e+" "+JSON.stringify(t))}},{key:"onOPEN",value:function(){this.connected=!0}},{key:"onCLOSE",value:function(){if(!this.dontconnect){var e=this.connected?Math.floor(2500*Math.random())+501:Math.floor(25001*Math.random())+5e3;setTimeout(this.onRECONNECT.bind(this),e),this.connected=!1,this.gui.push(E["default"].statusMessage("Disconnected... reconnecting in "+Math.round(e/1e3)+" seconds"))}}},{key:"onNAMES",value:function(e){if(e.users){for(var t=e.users.length-1;t>=0;t--){var i=e.users[t];this.users[i.nick]=new o["default"](i),this.shouldIgnore(i.nick,"")||this.gui.autoCompletePlugin.addNick(i.nick)}this.gui.trigger("names",e)}this.gui.push(E["default"].statusMessage("Connected. Server connections: "+e.connectioncount)),this.showstarthint&&(this.showstarthint=!1,this.handleCommand("hint"))}},{key:"onJOIN",value:function(e){this.users[e.nick]=new o["default"](e),this.shouldIgnore(e.nick,"")||this.gui.autoCompletePlugin.addNick(e.nick),this.gui.trigger("join",e)}},{key:"onQUIT",value:function(e){this.users[e.nick]&&(delete this.users[e.nick],this.gui.trigger("quit",e))}},{key:"onPRIVMSG",value:function(e){var t=this.users[e.nick];t||(t=new o["default"](e)),this.shouldIgnore(e.nick,e.data)||(this.gui.autoCompletePlugin.updateNick(t.username),this.gui.setUnreadMessageCount(this.gui.pmcountnum+1),this.gui.push(new h["default"](e.data,t,e.messageid,e.timestamp)))}},{key:"onMSG",value:function(e){this.user.username==e.nick&&Array.isArray(e.features)&&(this.user.features=e.features);var t="/me "===e.data.substring(0,4)?e.data.substring(4):e.data;if(this.gui.emoticons.indexOf(t)!==-1||this.gui.twitchemotes.indexOf(t)!==-1){if(this.previousemote&&this.previousemote.message==t)return 1===this.previousemote.emotecount?(this.previousemote.emotecount=2,this.originemote&&(this.originemote.ui.remove(),this.originemote=null),void this.gui.push(this.previousemote)):void this.previousemote.incEmoteCount();this.previousemote=new A["default"](t,e.timestamp)}else this.previousemote=null;var i=this.gui.resolveMessage(e);if(i&&this.previousemote&&(this.originemote=i),this.user.username!=e.nick||!i){if(this.shouldIgnore(e.nick,e.data))return;var s=this.users[e.nick];s?this.gui.autoCompletePlugin.updateNick(e.nick):(s=new o["default"](e),""!=s.nick&&s.nick==this.user.nick&&(this.user=s)),s&&s.features.length!=e.features.length&&(this.users[e.nick]=s);var n=new p["default"](e.data,s,e.timestamp);this.previousemote&&(this.originemote=n),this.gui.push(n)}}},{key:"onMUTE",value:function(e){var t=e.data;this.user.username.toLowerCase()==e.data.toLowerCase()?t="You have been":this.user.hasAnyFeatures(destiny.UserFeatures.SUBSCRIBERT3,destiny.UserFeatures.SUBSCRIBERT4,destiny.UserFeatures.SUBSCRIBERT2,destiny.UserFeatures.ADMIN,destiny.UserFeatures.MODERATOR)||this.gui.removeUserMessages(e.data),this.gui.push(E["default"].commandMessage(t+" muted by "+e.nick,e.timestamp))}},{key:"onUNMUTE",value:function(e){var t=e.data;this.user.username.toLowerCase()==e.data.toLowerCase()&&(t="You have been"),this.gui.push(E["default"].commandMessage(t+" unmuted by "+e.nick,e.timestamp))}},{key:"onBAN",value:function(e){var t=e.data;this.user.username.toLowerCase()==e.data.toLowerCase()?(t="You have been",this.gui.backlogLoading||setTimeout(function(){window.location.href="/banned"},1500)):this.user.hasAnyFeatures(destiny.UserFeatures.SUBSCRIBERT3,destiny.UserFeatures.SUBSCRIBERT4,destiny.UserFeatures.SUBSCRIBERT2,destiny.UserFeatures.ADMIN,destiny.UserFeatures.MODERATOR)||this.gui.removeUserMessages(e.data),this.gui.push(E["default"].commandMessage(t+" banned by "+e.nick,e.timestamp))}},{key:"onUNBAN",value:function(e){var t=e.data;this.user.username.toLowerCase()==e.data.toLowerCase()&&(t="You have been"),this.gui.push(E["default"].commandMessage(t+" unbanned by "+e.nick,e.timestamp))}},{key:"onERR",value:function(e){"toomanyconnections"!=e&&"banned"!=e||(this.dontconnect=!0),"banned"!=e||this.gui.backlogLoading||(window.location.href="/banned"),this.gui.push(E["default"].errorMessage(this.errorstrings[e]))}},{key:"onREFRESH",value:function(){window.location.reload(!1)}},{key:"onRECONNECT",value:function(){this.init()}},{key:"onSUBONLY",value:function(e){var t="on"==e.data?"enabled":"disabled";this.gui.push(E["default"].commandMessage("Subscriber only mode "+t+" by "+e.nick,e.timestamp))}},{key:"onBROADCAST",value:function(e){if(!this.gui.backlogLoading)if("redirect:"==e.data.substring(0,9)){var t=e.data.substring(9);_gaq.push(["_trackEvent","outbound","chat-redirect",t]),_gaq.push(function(){setTimeout(function(){window.parent?window.parent.location.href=t:window.location.href=t},5e3)}),this.gui.push(E["default"].broadcastMessage("Redirecting in 5 seconds to "+t,e.timestamp))}else this.gui.push(E["default"].broadcastMessage(e.data,e.timestamp))}},{key:"onPRIVMSGSENT",value:function(e){this.gui.push(E["default"].infoMessage("Your message has been sent!"))}},{key:"shouldIgnore",value:function(t,i){if(!this.ignorelist)return!1;if(!this.ignoreregex){var s=[];if(e.each(this.ignorelist,function(e){s.push(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"))}),0==s.length)return!1;this.ignoreregex=new RegExp(s.join("|"),"i")}return t=t.toLowerCase(),this.ignorelist[t]||this.ignoreregex.test(i)}},{key:"handleCommand",value:function(t){if(!t.length)return void this.gui.push(E["default"].errorMessage("Empty command"));var i=t.match(/([^ ]+)/g),s=i[0].toLowerCase(),n=/^[a-zA-Z0-9_]{3,20}$/,u={},r=[],o="";if("/"===t.substring(0,1))return u.data="/"+t,void this.emit("MSG",u);switch(this.l(s,i),s){default:this.gui.push(E["default"].errorMessage("Unknown command"));break;case"emotes":this.gui.push(E["default"].infoMessage("Available emoticons: "+this.gui.emoticons.join(", ")+" (www.destiny.gg/emotes)"));break;case"help":this.gui.push(E["default"].infoMessage("Available commands: /emotes /me /msg /ignore (without arguments to list the nicks ignored) /unignore /highlight (highlights target nicks messages for easier visibility) /unhighlight /maxlines /mute /unmute /subonly /ban /ipban /unban (also unbans ip bans) /timestampformat"));break;case"me":u.data="/"+t,this.emit("MSG",u);break;case"message":case"msg":case"whisper":case"w":case"tell":case"t":case"notify":if(!i[1]||!n.test(i[1].toLowerCase())){this.gui.push(E["default"].errorMessage("Invalid nick - /msg nick message"));break}if(i[1].toLowerCase()==this.user.username.toLowerCase()){this.gui.push(E["default"].errorMessage("Cannot send a message to yourself"));break}u.nick=i[1],i.shift(),i.shift(),u.data=i.join(" "),this.emit("PRIVMSG",u),this.gui.autoCompletePlugin.markLastComplete();break;case"ignore":if(!localStorage){this.gui.push(E["default"].errorMessage("Ignore is unavailable, no localStorage"));break}if(!i[1]){if(r=[],e.each(this.ignorelist,function(e){r.push(e)}),0==r.length){this.gui.push(E["default"].infoMessage("Your ignore list is empty"));break}this.gui.push(E["default"].infoMessage("Ignoring the following people: "+r.join(", ")));break}if(o=i[1].toLowerCase(),!n.test(o)){this.gui.push(E["default"].infoMessage("Invalid nick - /ignore nick"));break}this.ignorelist[o]=!0,this.gui.removeUserMessages(o),this.gui.push(E["default"].statusMessage("Ignoring "+o)),localStorage.chatignorelist=JSON.stringify(this.ignorelist),this.loadIgnoreList();break;case"unignore":if(!localStorage){this.gui.push(E["default"].errorMessage("Ignore is unavailable, no localStorage"));break}if(!i[1]||!n.test(i[1].toLowerCase())){this.gui.push(E["default"].errorMessage("Invalid nick - /ignore nick"));break}o=i[1].toLowerCase(),delete this.ignorelist[o],this.gui.push(E["default"].statusMessage(o+" has been removed from your ignore list")),localStorage.chatignorelist=JSON.stringify(this.ignorelist),this.loadIgnoreList();break;case"mute":if(1==i.length){this.gui.push(E["default"].infoMessage("Usage: /"+s+" nick[ time]"));break}if(!n.test(i[1])){this.gui.push(E["default"].infoMessage("Invalid nick - /"+s+" nick[ time]"));break}var a=null;i[2]&&(a=this.parseTimeInterval(i[2])),u.data=i[1],a&&a>0&&(u.duration=a),this.emit(s.toUpperCase(),u);break;case"ban":case"ipban":if(i.length<4){this.gui.push(E["default"].infoMessage("Usage: /"+s+" nick time reason (time can be 'permanent')"));break}if(!n.test(i[1])){this.gui.push(E["default"].infoMessage("Invalid nick"));break}if(u.nick=i[1],"ipban"==s&&(u.banip=!0),/^perm/i.test(i[2])?u.ispermanent=!0:u.duration=this.parseTimeInterval(i[2]),u.reason=i.slice(3,i.length).join(" "),!u.reason){this.gui.push(E["default"].errorMessage("Providing a reason is mandatory"));break}this.emit("BAN",u);break;case"unmute":case"unban":if(1==i.length){this.gui.push(E["default"].infoMessage("Usage: /"+s+" nick"));break}if(!n.test(i[1])){this.gui.push(E["default"].infoMessage("Invalid nick - /"+s+" nick"));break}u.data=i[1],this.emit(s.toUpperCase(),u);break;case"subonly":if("on"!=i[1]&&"off"!=i[1]){this.gui.push(E["default"].errorMessage("Invalid argument - /"+s+" on/off"));break}u.data=i[1],this.emit(s.toUpperCase(),u);break;case"maxlines":if(!i[1]){this.gui.push(E["default"].infoMessage("Current number of lines shown: "+this.gui.getPreference("maxlines")));break}var l=Math.abs(parseInt(i[1],10));if(!l){this.gui.push(E["default"].infoMessage("Invalid argument - /maxlines is expecting a number"));break}this.gui.setPreference("maxlines",l),this.gui.push(E["default"].infoMessage("Current number of lines shown: "+this.gui.getPreference("maxlines")));break;case"unhighlight":case"highlight":var c=this.gui.getPreference("highlightnicks");if(!i[1]){r=[],e.each(c,function(e){r.push(e)}),this.gui.push(E["default"].infoMessage("Currently highlighted users: "+r.join(", ")));break}if(!n.test(i[1])){this.gui.push(E["default"].errorMessage("Invalid nick - /"+s+" nick"));break}o=i[1].toLowerCase();var h="highlight"==s;h?(c[o]=!0,this.gui.push(E["default"].infoMessage("Now highlighting: "+o))):(delete c[o],this.gui.push(E["default"].infoMessage("No longer highlighting: "+o))),this.gui.renewHighlight(o,h),this.gui.setPreference("highlightnicks",c);break;case"timestampformat":if(!i[1]){this.gui.push(E["default"].infoMessage("Current format: "+this.gui.getPreference("timestampformat")+" (the default is 'HH:mm', for more info: http://momentjs.com/docs/#/displaying/format/)"));break}var f=t.substring(s.length);if(!/^[a-z :.,-\\*]+$/i.test(f)){this.gui.push(E["default"].errorMessage("Invalid format, see: http://momentjs.com/docs/#/displaying/format/"));break}this.gui.setPreference("timestampformat",f),this.gui.push(E["default"].infoMessage("New format: "+this.gui.getPreference("timestampformat")));break;case"broadcast":u.data=t.substring(s.length+1),this.emit(s.toUpperCase(),u);break;case"hint":for(var A="",d=null,p=JSON.parse(localStorage.hiddenhints||"[]"),g=0;++g;){if(g>=this.hintindex.length){A=this.hintindex[0],d=this.hints[A],p=[A];break}if(p.indexOf(this.hintindex[g])===-1){A=this.hintindex[g],d=this.hints[A],p.push(A);break}}localStorage.hiddenhints=JSON.stringify(p),this.gui.push(E["default"].infoMessage(d))}}},{key:"parseTimeInterval",value:function(e){var t=0,i={s:1e9,sec:1e9,secs:1e9,second:1e9,seconds:1e9,m:6e10,min:6e10,mins:6e10,minute:6e10,minutes:6e10,h:36e11,hr:36e11,hrs:36e11,hour:36e11,hours:36e11,d:864e11,day:864e11,days:864e11};return e.replace(/(\d+(?:\.\d*)?)([a-z]+)?/gi,function(e,s,n){s*=n?i[n.toLowerCase()]||i.s:i.s,t+=+s}),t}}]),t}();t["default"]=m}).call(t,i(3))},180:function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),a=i(17),l=s(a),c=function(e){function t(e){n(this,t);var i=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.emoteregex=new RegExp("(^|\\s)("+e.emoticons.join("|")+")(?=$|\\s)"),i.gemoteregex=new RegExp("(^|\\s)("+e.emoticons.join("|")+")(?=$|\\s)","gm"),i.twitchemoteregex=new RegExp("(^|\\s)("+e.emoticons.join("|")+"|"+e.twitchemotes.join("|")+")(?=$|\\s)","gm"),i}return r(t,e),o(t,[{key:"format",value:function(e,t){var i=this.emoteregex;return t&&t.features.length>0&&(i=t.hasFeature(destiny.UserFeatures.SUBSCRIBERT0)?this.twitchemoteregex:this.gemoteregex),e.replace(i,'$1<div title="$2" class="chat-emote chat-emote-$2">$2 </div>')}}]),t}(l["default"]);t["default"]=c},181:function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),a=i(17),l=s(a),c=function(e){function t(){return n(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),o(t,[{key:"format",value:function(e,t){return t&&0===e.indexOf("&gt;")&&t.hasAnyFeatures(destiny.UserFeatures.SUBSCRIBERT3,destiny.UserFeatures.SUBSCRIBERT4,destiny.UserFeatures.SUBSCRIBERT2,destiny.UserFeatures.ADMIN,destiny.UserFeatures.MODERATOR)&&(e='<span class="greentext">'+e+"</span>"),e}}]),t}(l["default"]);t["default"]=c},182:function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),a=i(17),l=s(a),c=function(e){function t(e){n(this,t);var i=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.users=e.engine.users,i.userregex=/((?:^|\s)@?)([a-zA-Z0-9_]{3,20})(?=$|\s|[\.\?!,])/g,i}return r(t,e),o(t,[{key:"format",value:function(e,t){var i=this.users;return e.replace(this.userregex,function(e,t,s){return i.propertyIsEnumerable(s)?t+'<span class="chat-user">'+s+"</span>":e})}}]),t}(l["default"]);t["default"]=c},183:function(e,t,i){(function(e){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0
}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),a=i(17),l=s(a),c=function(t){function s(t){n(this,s);var r=u(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,t)),o=i(278),a="(?:"+o.join("|")+")",l={"p{L}":"\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC","p{N}":"\\u0030-\\u0039\\u00B2\\u00B3\\u00B9\\u00BC-\\u00BE\\u0660-\\u0669\\u06F0-\\u06F9\\u07C0-\\u07C9\\u0966-\\u096F\\u09E6-\\u09EF\\u09F4-\\u09F9\\u0A66-\\u0A6F\\u0AE6-\\u0AEF\\u0B66-\\u0B6F\\u0B72-\\u0B77\\u0BE6-\\u0BF2\\u0C66-\\u0C6F\\u0C78-\\u0C7E\\u0CE6-\\u0CEF\\u0D66-\\u0D75\\u0E50-\\u0E59\\u0ED0-\\u0ED9\\u0F20-\\u0F33\\u1040-\\u1049\\u1090-\\u1099\\u1369-\\u137C\\u16EE-\\u16F0\\u17E0-\\u17E9\\u17F0-\\u17F9\\u1810-\\u1819\\u1946-\\u194F\\u19D0-\\u19DA\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1B50-\\u1B59\\u1BB0-\\u1BB9\\u1C40-\\u1C49\\u1C50-\\u1C59\\u2070\\u2074-\\u2079\\u2080-\\u2089\\u2150-\\u2182\\u2185-\\u2189\\u2460-\\u249B\\u24EA-\\u24FF\\u2776-\\u2793\\u2CFD\\u3007\\u3021-\\u3029\\u3038-\\u303A\\u3192-\\u3195\\u3220-\\u3229\\u3248-\\u324F\\u3251-\\u325F\\u3280-\\u3289\\u32B1-\\u32BF\\uA620-\\uA629\\uA6E6-\\uA6EF\\uA830-\\uA835\\uA8D0-\\uA8D9\\uA900-\\uA909\\uA9D0-\\uA9D9\\uAA50-\\uAA59\\uABF0-\\uABF9\\uFF10-\\uFF19","p{Sc}":"\\u0024\\u00A2-\\u00A5\\u058F\\u060B\\u09F2\\u09F3\\u09FB\\u0AF1\\u0BF9\\u0E3F\\u17DB\\u20A0-\\u20B9\\uA838\\uFDFC\\uFE69\\uFF04\\uFFE0\\uFFE1\\uFFE5\\uFFE6","p{Sk}":"\\u005E\\u0060\\u00A8\\u00AF\\u00B4\\u00B8\\u02C2-\\u02C5\\u02D2-\\u02DF\\u02E5-\\u02EB\\u02ED\\u02EF-\\u02FF\\u0375\\u0384\\u0385\\u1FBD\\u1FBF-\\u1FC1\\u1FCD-\\u1FCF\\u1FDD-\\u1FDF\\u1FED-\\u1FEF\\u1FFD\\u1FFE\\u309B\\u309C\\uA700-\\uA716\\uA720\\uA721\\uA789\\uA78A\\uFBB2-\\uFBC1\\uFF3E\\uFF40\\uFFE3","p{So}":"\\u00A6\\u00A9\\u00AE\\u00B0\\u0482\\u060E\\u060F\\u06DE\\u06E9\\u06FD\\u06FE\\u07F6\\u09FA\\u0B70\\u0BF3-\\u0BF8\\u0BFA\\u0C7F\\u0D79\\u0F01-\\u0F03\\u0F13\\u0F15-\\u0F17\\u0F1A-\\u0F1F\\u0F34\\u0F36\\u0F38\\u0FBE-\\u0FC5\\u0FC7-\\u0FCC\\u0FCE\\u0FCF\\u0FD5-\\u0FD8\\u109E\\u109F\\u1390-\\u1399\\u1940\\u19DE-\\u19FF\\u1B61-\\u1B6A\\u1B74-\\u1B7C\\u2100\\u2101\\u2103-\\u2106\\u2108\\u2109\\u2114\\u2116\\u2117\\u211E-\\u2123\\u2125\\u2127\\u2129\\u212E\\u213A\\u213B\\u214A\\u214C\\u214D\\u214F\\u2195-\\u2199\\u219C-\\u219F\\u21A1\\u21A2\\u21A4\\u21A5\\u21A7-\\u21AD\\u21AF-\\u21CD\\u21D0\\u21D1\\u21D3\\u21D5-\\u21F3\\u2300-\\u2307\\u230C-\\u231F\\u2322-\\u2328\\u232B-\\u237B\\u237D-\\u239A\\u23B4-\\u23DB\\u23E2-\\u23F3\\u2400-\\u2426\\u2440-\\u244A\\u249C-\\u24E9\\u2500-\\u25B6\\u25B8-\\u25C0\\u25C2-\\u25F7\\u2600-\\u266E\\u2670-\\u26FF\\u2701-\\u2767\\u2794-\\u27BF\\u2800-\\u28FF\\u2B00-\\u2B2F\\u2B45\\u2B46\\u2B50-\\u2B59\\u2CE5-\\u2CEA\\u2E80-\\u2E99\\u2E9B-\\u2EF3\\u2F00-\\u2FD5\\u2FF0-\\u2FFB\\u3004\\u3012\\u3013\\u3020\\u3036\\u3037\\u303E\\u303F\\u3190\\u3191\\u3196-\\u319F\\u31C0-\\u31E3\\u3200-\\u321E\\u322A-\\u3247\\u3250\\u3260-\\u327F\\u328A-\\u32B0\\u32C0-\\u32FE\\u3300-\\u33FF\\u4DC0-\\u4DFF\\uA490-\\uA4C6\\uA828-\\uA82B\\uA836\\uA837\\uA839\\uAA77-\\uAA79\\uFDFD\\uFFE4\\uFFE8\\uFFED\\uFFEE\\uFFFC\\uFFFD"},c=l["p{L}"],h=l["p{N}"],f=c+h,A=f+"/\\-+=_&~*%@|#.,:;'?!"+l["p{Sc}"]+l["p{Sk}"]+l["p{So}"],d=f+"/\\-+=_&~*%;"+l["p{Sc}"],p="(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])",g="(?:\\b"+p+"\\."+p+"\\."+p+"\\."+p+"\\b)",E="["+f+"](?:["+f+"\\-]*["+f+"])?",m="(?:"+E+"\\.)+",C="(?:"+m+a+"|"+g+")",S="\\[["+A+"]*(?:\\[["+A+"]*\\]["+A+"]*)*\\]",O="\\(["+A+"]*(?:\\(["+A+"]*\\)["+A+"]*)*\\)",v=O+"|"+S,T="(?:["+A+"]*(?:"+v+"|["+d+"])+)+",I="(?:"+T+"|/|\\b|$)",F="(?::[0-9]+)?",R="(?:"+C+F+"/"+I+")|(?:"+C+F+"(?:\\b|$))",N="(https?|ftp)://",y="\\b"+N+T,B=y+"|"+R;return r.linkregex=new RegExp(B,"gi"),r._elem=e("<div/>"),r}return r(s,t),o(s,[{key:"encodeUrl",value:function(e){return e.replace(/&/g,"&amp;").replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,function(e){var t=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(i-56320)+65536)+";"}).replace(/([^\#-~| |!])/g,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}},{key:"format",value:function(e){if(e){var t=this,i="";return/\b(?:NSFL)\b/i.test(e)?i="nsfl-link":/\b(?:NSFW|SPOILER)\b/i.test(e)&&(i="nsfw-link"),e.replace(t.linkregex,function(e,s){s=s?"":"http://";var n=t._elem.html(e).text(),u=n.match(t.linkregex);if(!u)return e;e=t.encodeUrl(u[0]);var r=t.encodeUrl(n.substring(u[0].length)),o=s+e;return'<a target="_blank" class="externallink '+i+'" href="'+o+'" rel="nofollow">'+e+"</a>"+r})}}}]),s}(l["default"]);t["default"]=c}).call(t,i(3))},184:function(e,t,i){(function(e){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),r=i(233),o=s(r),a=i(185),l=s(a),c=i(18),h=s(c),f=i(21),A=s(f),d=i(178),p=s(d),g=i(188),E=s(g),m=i(183),C=s(m),S=i(180),O=s(S),v=i(182),T=s(v),I=i(181),F=s(I);i(280);var R=function(){function t(i,s){n(this,t),this.ui=e("#destinychat"),this.engine=i,this.maxlines=500,this.scrollPlugin=null,this.autoCompletePlugin=null,this.lines=null,this.output=null,this.input=null,this.userMessages=[],this.focusedUsers=[],this.inputhistory=[],this.currenthistoryline=-1,this.storedinputline=null,this.backlog=[],this.backlogLoading=!1,this.highlightregex={},this.lastMessage=null,this.emoticons=[],this.twitchemotes=[],this.formatters=[],this.pmcountnum=0,this.pmcount=null,this.stylesheet=null,this.preferences={showtime:{value:!1,"default":!1},hideflairicons:{value:!1,"default":!1},timestampformat:{value:"HH:mm","default":"HH:mm"},maxlines:{value:500,"default":500},allowNotifications:{value:!1,"default":!1},highlight:{value:!0,"default":!0},customhighlight:{value:[],"default":[]},highlightnicks:{value:{},"default":{}}},e.extend(this,s),this.init()}return u(t,[{key:"trigger",value:function(t,i){e(this).trigger(t,i)}},{key:"on",value:function(t,i){e(this).on(t,i)}},{key:"init",value:function(){var t=this;this.menus=[],this.pmcount=this.ui.find("#chat-pm-count:first").eq(0),this.lines=this.ui.find("#chat-lines:first").eq(0),this.output=this.ui.find("#chat-output:first").eq(0),this.input=this.ui.find("#chat-input .input:first").eq(0),this.stylesheet=e("#chat-styles")[0].sheet,this.formatters.push(new C["default"](this)),this.formatters.push(new O["default"](this)),this.formatters.push(new T["default"](this)),this.formatters.push(new F["default"](this)),this.preferences.maxlines.value=this.maxlines,this.preferences.maxlines["default"]=this.maxlines,this.scrollPlugin=this.output.nanoScroller({disableResize:!0,preventPageScrolling:!0,sliderMinHeight:40,tabIndex:1})[0].nanoscroller,this.loadPreferences(),this.loadHighlighters(),this.loadInputHistory(),this.autoCompletePlugin=new p["default"](this.input,this.emoticons.concat(this.twitchemotes));var i=this.ui.find("#chat-settings:first").eq(0),s=new l["default"](i,t),n=this.ui.find("#chat-settings-notification-permissions"),u=function(){n.text("(Permission "+("default"===Notification.permission?"required":Notification.permission)+")")};i.on("keypress blur","input[name=customhighlight]",function(i){var s=i.keyCode?i.keyCode:i.which;if(!s||13==s){for(var n=e(this).val().toString().trim().split(","),u=n.length-1;u>=0;u--)n[u]=n[u].trim(),n[u]||n.splice(u,1);return t.setPreference("customhighlight",n),t.loadHighlighters(),!1}}),i.on("change",'input[type="checkbox"]',function(){var i=e(this).attr("name"),s=e(this).is(":checked");switch(i){case"showtime":t.setPreference(i,s),t.updateAndScroll(t.isScrolledToBottom());break;case"hideflairicons":t.setPreference(i,s),t.updateAndScroll(t.isScrolledToBottom());break;case"highlight":t.setPreference(i,s);break;case"allowNotifications":s?t.notificationPermission().then(function(){u(),t.setPreference(i,!0)},function(){u(),t.setPreference(i,!1)}):t.setPreference(i,!1)}}),s.on("show",function(){i.find("input[name=customhighlight]").val(t.getPreference("customhighlight").join(", ")),i.find('input[type="checkbox"]').each(function(){var i=e(this).attr("name");e(this).prop("checked",t.getPreference(i))}),"granted"!==Notification.permission&&i.find('input[name="allowNotifications"]').prop("checked",!1),u()});var r=this.ui.find("#chat-emote-list:first").eq(0),a=new l["default"](r,t);a.on("init",function(){for(var i=r.find("#destiny-emotes"),s=r.find("#twitch-emotes"),n=0;n<t.emoticons.length;n++)i.append('<div class="emote"><span title="'+t.emoticons[n]+'" class="chat-emote chat-emote-'+t.emoticons[n]+'">'+t.emoticons[n]+"</span></div>");for(var u=0;u<t.twitchemotes.length;u++)s.append('<div class="emote"><span title="'+t.twitchemotes[u]+'" class="chat-emote chat-emote-'+t.twitchemotes[u]+'">'+t.twitchemotes[u]+"</span></div>");r.on("click",".chat-emote",function(){var i=t.input.val().toString().trim();return t.input.val(i+(""==i?"":" ")+e(this).text()+" "),t.input.focus(),!1})});var c=this.ui.find("#chat-pm-notification:first").eq(0),h=new l["default"](c,t);c.on("click",".user-list-link",function(){return l["default"].closeMenus(t),A.show(h.btn),!1}),c.on("click","#markread-privmsg",function(){return t.setUnreadMessageCount(0),l["default"].closeMenus(t),e.ajax({type:"POST",url:"/profile/messages/openall"}),!1}),c.on("click","#inbox-privmsg",function(){t.setUnreadMessageCount(0),l["default"].closeMenus(t)}),t.setUnreadMessageCount(t.pmcountnum);var f=this.ui.find("#chat-user-list:first").eq(0),A=new l["default"](f,t);A.groups=f.find("#chat-groups"),A.clearAll=function(){A.groups.find("li").remove()},A.sortByName=function(e,t){try{return e.firstChild.getAttribute("data-username").localeCompare(t.firstChild.getAttribute("data-username"))}catch(i){}},A.sortUsers=function(){A.groups.children().each(function(){var t=e(this).find("li").get();t.sort(A.sortByName);for(var i=0;i<t.length;i++)t[i].parentNode.appendChild(t[i])})},f.on("click",".user",function(){t.toggleUserFocus(this.textContent)}),f.each(function(){var i=f.find("h5 span"),s=A.groups,n=e('<ul id="chat-group1">').appendTo(s),u=e('<ul id="chat-group2">').appendTo(s),r=e('<ul id="chat-group3">').appendTo(s),o=e('<ul id="chat-group4">').appendTo(s),a=e('<ul id="chat-group5">').appendTo(s),l=function(){var e=Object.keys(t.engine.users).length;return i.text(e),e},c=function(e){return f.find('a[data-username="'+e+'"]').length>0},h=function(e){return f.find('a[data-username="'+e+'"]').closest("li").remove()},d=function(e){var i=t.engine.users[e],s=i.features.join(" "),l='<li><a data-username="'+i.username+'" class="user '+s+'">'+i.username+"</a></li>";i.hasFeature(destiny.UserFeatures.BOT)||i.hasFeature(destiny.UserFeatures.BOT2)?a.append(l):i.hasFeature(destiny.UserFeatures.ADMIN)||i.hasFeature(destiny.UserFeatures.VIP)?n.append(l):i.hasFeature(destiny.UserFeatures.BROADCASTER)?u.append(l):i.hasFeature(destiny.UserFeatures.SUBSCRIBER)?r.append(l):o.append(l)};t.on("join",function(e,t){A.visible&&!c(t.nick)&&(d(t.nick),l(),A.sortUsers(),A.redraw())}),t.on("quit",function(e,t){A.visible&&c(t.nick)&&(h(t.nick),l(),A.redraw())}),A.on("show",function(){A.clearAll(),l();for(var e in t.engine.users)t.engine.users.hasOwnProperty(e)&&d(e);A.sortUsers(),A.redraw()})}),this.ui.find("#chat-users-btn").on("click",function(){return t.pmcountnum>0?h.toggle(this):A.toggle(this),!1}),this.ui.find("#chat-settings-btn").on("click",function(){return s.toggle(this),!1}),this.ui.find("#emoticon-btn").on("click",function(){return a.toggle(this),!1}),this.lines.on("mousedown",".user-msg a.user",function(){var i=e(this).closest(".user-msg").data("username");return t.toggleUserFocus(i),!1}),this.lines.on("mousedown",".user-msg .chat-user",function(){var i=e(this).closest(".user-msg").data("username"),s=this.textContent.toLowerCase();return t.addUserFocus(i),t.toggleUserFocus(s),!1}),this.ui.on("submit","form#chat-input",function(){return t.send(),!1}),this.input.on("keydown mousedown",function(){l["default"].closeMenus(t)}),this.output.on("mousedown",function(){l["default"].closeMenus(t),t.clearUserFocus()});var d=t.ui.find("#chat-scroll-notify");d.on("click",function(){t.updateAndScroll(!0)}),t.output.on("update",(0,o["default"])(function(){d.toggle(!t.isScrolledToBottom())},100)),this.ui.find('#chat-login-msg a[href="/login"]').on("click",function(){try{window.self!==window.top?window.parent.location.href=e(this).attr("href")+"?follow="+encodeURIComponent(window.parent.location.pathname):window.location.href=e(this).attr("href")+"?follow="+encodeURIComponent(window.location.pathname)}catch(t){}return!1});var g=void 0,E=void 0;this.lines.on("click mousedown keydown",function(e){var i=e.clientX+"-"+e.clientY;switch(e.type){case"click":if(g!==i)return;E=setTimeout(t.input.focus.bind(t.input),500);break;case"mousedown":g=i;break;case"keydown":E&&(clearTimeout(E),E=0)}}),this.lines.on("click",".mark-as-read",function(){var i=e(this).closest(".private-message"),s=i.data("message"),n=s.ui.find(".icon-mail-send"),u=s.ui.find(".message-actions");return e.ajax({type:"POST",url:"/profile/messages/"+encodeURIComponent(s.messageid)+"/open",complete:function(e){n.attr("class","icon-mail-open-document"),u.remove(),t.setUnreadMessageCount(e.unread)}}),!1}),e(window).on({"resize.chat":function(){t.resize()},"focus.chat":function(){t.input.focus()},"load.chat":function(){t.input.focus()}})}},{key:"isScrolledToBottom",value:function(){return!(!this.scrollPlugin||!this.scrollPlugin.isActive)&&this.scrollPlugin.contentScrollTop>=this.scrollPlugin.maxScrollTop-30}},{key:"updateAndScroll",value:function(e){this.scrollPlugin&&this.scrollPlugin.isActive&&(this.scrollPlugin.reset(),e&&this.scrollPlugin.scrollBottom(0))}},{key:"addUserFocusRule",value:function(e){this.stylesheet.insertRule('.user-msg[data-username="'+e+'"]{opacity:1 !important;}',this.focusedUsers.length),this.focusedUsers.push(e),this.ui.toggleClass("focus-user",this.focusedUsers.length>0)}},{key:"removeUserFocusRule",value:function(e){this.stylesheet.deleteRule(e),this.focusedUsers.splice(e,1),this.ui.toggleClass("focus-user",this.focusedUsers.length>0)}},{key:"clearUserFocus",value:function(){for(var e=this.focusedUsers.length-1;e>=0;--e)this.removeUserFocusRule(this.focusedUsers[e],e);this.ui.toggleClass("focus-user",!1)}},{key:"addUserFocus",value:function(e){e&&this.focusedUsers.indexOf(e)===-1&&this.addUserFocusRule(e)}},{key:"removeUserFocus",value:function(e){if(e){e=e.toLowerCase();var t=this.focusedUsers.indexOf(e);t!==-1&&this.removeUserFocusRule(t)}}},{key:"toggleUserFocus",value:function(e){if(e){e=e.toLowerCase();var t=this.focusedUsers.indexOf(e);t===-1?this.addUserFocus(e):this.removeUserFocus(e,t)}}},{key:"loadBacklog",value:function(){if(this.backlogLoading=!0,0==this.backlog.length)return void(this.backlogLoading=!1);for(var e=0,t=this.backlog.length;e<t;e++)this.engine.dispatchBacklog(this.backlog[e]);this.put(new E["default"]("<hr/>")),this.updateAndScroll(!0),this.backlogLoading=!1}},{key:"put",value:function(t,i){return t.ui=e(t.html()),t.ui.data("message",t),t.ui.appendTo(this.lines),void 0!=i&&t.status(i),this.lastMessage=t,t}},{key:"push",value:function(t,i){var s=this.isScrolledToBottom(),n=this.lines.children(),u=this.getPreference("maxlines"),r=n.length;if(s&&r>=u)for(var o=n.slice(0,r-u),a=o.length-1;a>=0;a--)e(o[a]).remove();return this.userMessages.push(t),this.put(t,i),this.scrollPlugin.content.scrollHeight>this.scrollPlugin.el.clientHeight&&!this.scrollPlugin.isActive&&this.scrollPlugin.reset(),this.updateAndScroll(s),this.handleHighlight(t),t}},{key:"send",value:function(){var e=this.input.val().toString().trim();if(""!=e){if(this.input.val("").focus(),null==this.engine.user||!this.engine.user.username)return this.push(h["default"].errorMessage(this.engine.errorstrings.needlogin));var t="/me "===e.substring(0,4)?e.substring(4):e;if(this.emoticons.indexOf(t)!==-1&&this.engine.previousemote&&this.engine.previousemote.message==t)return this.engine.emit("MSG",{data:e});if("/"===e.substring(0,1))return this.engine.handleCommand(e.substring(1));this.push(new A["default"](e,this.engine.user),this.engine.connected?"pending":"unsent"),this.engine.emit("MSG",{data:e}),this.insertInputHistory(e),this.currenthistoryline=-1,this.autoCompletePlugin.markLastComplete()}e=null}},{key:"resize",value:function(){this.updateAndScroll(this.isScrolledToBottom())}},{key:"setupInputHistory",value:function(){var t=!1,i=this;e(this.input).on("keyup",function(e){if((e.shiftKey||e.metaKey||e.ctrlKey)&&(t=!0),38!=e.keyCode&&40!=e.keyCode||t)return void(t=!1);var s=38==e.keyCode?-1:1;if(i.currenthistoryline<0&&38==e.keyCode){if(i.currenthistoryline=i.inputhistory.length,i.storedinputline=i.input.val(),i.currenthistoryline<=0)return}else if(i.currenthistoryline<0&&40==e.keyCode)return;var n=i.currenthistoryline+s;return n>=i.inputhistory.length||n<0?void(n>=i.inputhistory.length&&(i.input.val(i.storedinputline),i.currenthistoryline=-1)):(i.currenthistoryline=n,void i.input.val(i.inputhistory[n]))})}},{key:"loadInputHistory",value:function(){try{this.inputhistory=JSON.parse(localStorage.inputhistory||"[]"),this.setupInputHistory()}catch(e){}}},{key:"insertInputHistory",value:function(e){this.inputhistory.push(e),this.inputhistory.length>20&&this.inputhistory.shift(),localStorage.inputhistory=JSON.stringify(this.inputhistory)}},{key:"resolveMessage",value:function(e){for(var t=0;t<this.userMessages.length;++t)if(this.userMessages[t].message==e.data){var i=this.userMessages.splice(t,1)[0];return i.status(),i}return null}},{key:"notificationPermission",value:function(){var t=e.Deferred();switch(Notification.permission){case"default":Notification.requestPermission(function(e){switch(e){case"granted":t.resolve(e);break;default:t.reject(e)}});break;case"granted":t.resolve(Notification.permission);break;case"denied":default:t.reject(Notification.permission)}return t.promise()}},{key:"showNotification",value:function(e){if("granted"===Notification.permission){var t=new Notification(e.user.username+" said ...",{body:e.message,tag:e.timestamp.unix(),icon:"/notifyicon.png",dir:"auto"});setTimeout(t.close.bind(t),5e3),t.onclick=function(){}}}},{key:"loadHighlighters",value:function(){this.engine.user&&this.engine.user.username&&(this.highlightregex.user=new RegExp("\\b@?(?:"+this.engine.user.username+")\\b","i"));var e=this.getPreference("customhighlight");if(e.length>0){for(var t=e.length-1;t>=0;t--)e[t]=e[t].replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");this.highlightregex.custom=new RegExp("\\b(?:"+e.join("|")+")\\b","i")}}},{key:"renewHighlight",value:function(e,t){this.lines.children('div[data-username="'+e.toLowerCase()+'"]').toggleClass("highlight",t)}},{key:"handleHighlight",value:function(e){if(!e.user||!e.user.username||e.user.username==this.engine.user.username||!this.getPreference("highlight"))return!1;if(e.user.hasFeature(destiny.UserFeatures.BOT))return!1;var t=this.getPreference("highlightnicks");return(t[e.user.username.toLowerCase()]||t[e.user.username]||this.highlightregex.user&&this.highlightregex.user.test(e.message)||this.highlightregex.custom&&this.highlightregex.custom.test(e.message))&&(e.ui.addClass("highlight"),!this.getPreference("allowNotifications")||this.hasFocus()||this.backlogLoading||this.showNotification(e)),!1}},{key:"setPreference",value:function(e,t){this.preferences[e].value=t,this.applyPreferencesCss(),this.savePreferences()}},{key:"getPreference",value:function(e){return this.preferences[e].value||null}},{key:"loadPreferences",value:function(){try{var e=JSON.parse(localStorage.chatoptions||"{}");for(var t in e)e.hasOwnProperty(t)&&this.preferences.hasOwnProperty(t)&&(this.preferences[t].value=e[t]);this.applyPreferencesCss()}catch(i){}}},{key:"savePreferences",value:function(){try{var e={};for(var t in this.preferences)this.preferences.hasOwnProperty(t)&&(e[t]=this.preferences[t].value);localStorage.chatoptions=JSON.stringify(e)}catch(i){}}},{key:"applyPreferencesCss",value:function(){for(var e in this.preferences)this.preferences.hasOwnProperty(e)&&"boolean"==typeof this.preferences[e].value&&this.ui.toggleClass("pref-"+e,this.preferences[e].value)}},{key:"removeUserMessages",value:function(e){this.lines.children('div[data-username="'+e.toLowerCase()+'"]').remove(),this.scrollPlugin.reset()}},{key:"setUnreadMessageCount",value:function(e){this.pmcountnum=Math.max(0,e),this.pmcount.toggleClass("hidden",!this.pmcountnum).text(this.pmcountnum)}},{key:"hasFocus",value:function(){return this.input.is(":focus")}}]),t}();t["default"]=R}).call(t,i(3))},185:function(e,t,i){(function(e){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),n=function(){function t(e,s){i(this,t),this.ui=e,this.chat=s,this.btn=null,this.visible=!1,this.shown=!1,this.scrollPlugin=null,this.ui.on("click",".close",this.hide.bind(this)),this.chat.menus.push(this)}return s(t,[{key:"on",value:function(t,i){e(this).on(t,i)}},{key:"show",value:function(t){this.visible||(this.shown||e(this).triggerHandler("init"),this.visible=!0,this.shown=!0,this.btn=t,e(this.btn).addClass("active"),e(this.ui).addClass("active"),e(this).triggerHandler("show"),e(this.ui).find(".scrollable").each(function(){this.scrollPlugin?this.scrollPlugin.reset():this.scrollPlugin=e(this).nanoScroller({disableResize:!0,preventPageScrolling:!0})[0].nanoscroller}))}},{key:"hide",value:function(){this.visible&&(this.visible=!1,e(this.btn).removeClass("active"),e(this.ui).removeClass("active"),e(this).triggerHandler("hide"))}},{key:"toggle",value:function(e){var i=this.visible;t.closeMenus(this.chat),i||this.show(e)}},{key:"redraw",value:function(){this.scrollPlugin&&this.scrollPlugin.isActive&&this.scrollPlugin.reset()}}],[{key:"closeMenus",value:function(e){for(var t=0;t<e.menus.length;++t)e.menus[t].hide()}}]),t}();t["default"]=n}).call(t,i(3))},186:function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),a=i(18),l=s(a),c=function(e){function t(e,i){var s;n(this,t);var r=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,"emote"));return r.emotecount=1,r.emotecountui=null,s=r,u(r,s)}return r(t,e),o(t,[{key:"getEmoteCountLabel",value:function(){return"<i class='count'>"+this.emotecount+"</i><i class='x'>X</i> C-C-C-COMBO"}},{key:"html",value:function(){return this.wrap(this.wrapTime()+" "+this.wrapMessage()+'<span class="emotecount">'+this.getEmoteCountLabel()+"<span>")}},{key:"incEmoteCount",value:function(){++this.emotecount;var e="";this.emotecount>=50?e=" x50":this.emotecount>=30?e=" x30":this.emotecount>=20?e=" x20":this.emotecount>=10?e=" x10":this.emotecount>=5&&(e=" x5"),null==this.emotecountui&&(this.emotecountui=this.ui.find(".emotecount")),this.emotecountui.detach().attr("class","emotecount"+e).html(this.getEmoteCountLabel()).appendTo(this.ui)}}]),t}(l["default"]);t["default"]=c},187:function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),a=i(21),l=s(a),c=function(e){function t(e,i,s,r){n(this,t);var o=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,r,"user"));return o.user=i,o.messageid=s,o.prepareMessage(),o.isSlashMe=!1,o}return r(t,e),o(t,[{key:"wrap",value:function(e,t){return'<div class="'+this.type+"-msg"+(t?" "+t:"")+' private-message" data-messageid="'+this.messageid+'" data-username="'+this.user.username.toLowerCase()+'">'+e+'<span class="message-actions"><a href="#" class="mark-as-read">Mark as read <i class="fa fa-check-square-o"></i></a></span><i class="speech-arrow"></i></div>'}},{key:"wrapUser",value:function(e){return' <i class="icon-mail-send" title="Received Message"></i> <a class="user">'+e.username+"</a>"}}]),t}(l["default"]);t["default"]=c},188:function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),n=function(){function e(t){i(this,e),this.ui=null,this.message=t}return s(e,[{key:"html",value:function(){return'<div class="ui-msg">'+this.message+"</div>"}}]),e}();t["default"]=n},189:function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),n=function(){function e(t){i(this,e),
t&&(this.nick=t.nick||"",this.username=t.nick||"",this.features=t.features||[])}return s(e,[{key:"hasAnyFeatures",value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var s=!0,n=!1,u=void 0;try{for(var r,o=t[Symbol.iterator]();!(s=(r=o.next()).done);s=!0){var a=r.value;if(this.features.indexOf(a)!==-1)return!0}}catch(l){n=!0,u=l}finally{try{!s&&o["return"]&&o["return"]()}finally{if(n)throw u}}return!1}},{key:"hasFeature",value:function(e){return this.hasAnyFeatures(e)}}]),e}();e.exports=n},233:function(e,t,i){var s=i(234);e.exports=function(e,t,i){function n(){var c=s()-a;c<t&&c>0?u=setTimeout(n,t-c):(u=null,i||(l=e.apply(o,r),u||(o=r=null)))}var u,r,o,a,l;return null==t&&(t=100),function(){o=this,r=arguments,a=s();var c=i&&!u;return u||(u=setTimeout(n,t)),c&&(l=e.apply(o,r),o=r=null),l}}},234:function(e,t){function i(){return(new Date).getTime()}e.exports=Date.now||i},235:19,236:19,278:function(e,t){e.exports=["NORTHWESTERNMUTUAL","TRAVELERSINSURANCE","AMERICANEXPRESS","KERRYPROPERTIES","SANDVIKCOROMANT","AFAMILYCOMPANY","AMERICANFAMILY","BANANAREPUBLIC","CANCERRESEARCH","COOKINGCHANNEL","KERRYLOGISTICS","WEATHERCHANNEL","INTERNATIONAL","LIFEINSURANCE","ORIENTEXPRESS","SPREADBETTING","TRAVELCHANNEL","WOLTERSKLUWER","CONSTRUCTION","LPLFINANCIAL","PAMPEREDCHEF","SCHOLARSHIPS","VERSICHERUNG","ACCOUNTANTS","BARCLAYCARD","BLACKFRIDAY","BLOCKBUSTER","BRIDGESTONE","CALVINKLEIN","CONTRACTORS","CREDITUNION","ENGINEERING","ENTERPRISES","FOODNETWORK","INVESTMENTS","KERRYHOTELS","LAMBORGHINI","MOTORCYCLES","OLAYANGROUP","PHOTOGRAPHY","PLAYSTATION","PRODUCTIONS","PROGRESSIVE","REDUMBRELLA","RIGHTATHOME","WILLIAMHILL","ACCOUNTANT","APARTMENTS","ASSOCIATES","BASKETBALL","BNPPARIBAS","BOEHRINGER","CAPITALONE","CONSULTING","CREDITCARD","CUISINELLA","EUROVISION","EXTRASPACE","FOUNDATION","HEALTHCARE","IMMOBILIEN","INDUSTRIES","MANAGEMENT","MITSUBISHI","NATIONWIDE","NEWHOLLAND","NEXTDIRECT","ONYOURSIDE","PROPERTIES","PROTECTION","PRUDENTIAL","REALESTATE","REPUBLICAN","RESTAURANT","SCHAEFFLER","SWIFTCOVER","TATAMOTORS","TECHNOLOGY","TELEFONICA","UNIVERSITY","VISTAPRINT","VLAANDEREN","VOLKSWAGEN","ACCENTURE","ALFAROMEO","ALLFINANZ","AMSTERDAM","ANALYTICS","AQUARELLE","BARCELONA","BLOOMBERG","CHRISTMAS","COMMUNITY","DIRECTORY","EDUCATION","EQUIPMENT","FAIRWINDS","FINANCIAL","FIRESTONE","FRESENIUS","FRONTDOOR","FUJIXEROX","FURNITURE","GOLDPOINT","GOODHANDS","HISAMITSU","HOMEDEPOT","HOMEGOODS","HOMESENSE","HONEYWELL","INSTITUTE","INSURANCE","KUOKGROUP","LADBROKES","LANCASTER","LANDROVER","LIFESTYLE","MARKETING","MARSHALLS","MCDONALDS","MELBOURNE","MICROSOFT","MONTBLANC","PANASONIC","PASSAGENS","PRAMERICA","RICHARDLI","SCJOHNSON","SHANGRILA","SOLUTIONS","STATEBANK","STATEFARM","STOCKHOLM","TRAVELERS","VACATIONS","YODOBASHI","ABUDHABI","AIRFORCE","ALLSTATE","ATTORNEY","BARCLAYS","BAREFOOT","BARGAINS","BASEBALL","BOUTIQUE","BRADESCO","BROADWAY","BRUSSELS","BUDAPEST","BUILDERS","BUSINESS","CAPETOWN","CATERING","CHRYSLER","CIPRIANI","CITYEATS","CLEANING","CLINIQUE","CLOTHING","COMMBANK","COMPUTER","DELIVERY","DELOITTE","DEMOCRAT","DIAMONDS","DISCOUNT","DISCOVER","DOWNLOAD","ENGINEER","ERICSSON","ESURANCE","EVERBANK","EXCHANGE","FEEDBACK","FIDELITY","FIRMDALE","FOOTBALL","FRONTIER","GOODYEAR","GRAINGER","GRAPHICS","GUARDIAN","HDFCBANK","HELSINKI","HOLDINGS","INFINITI","IPIRANGA","ISTANBUL","JPMORGAN","LIGHTING","LUNDBECK","MARRIOTT","MASERATI","MCKINSEY","MEMORIAL","MORTGAGE","MOVISTAR","MUTUELLE","OBSERVER","PARTNERS","PHARMACY","PICTURES","PLUMBING","PROPERTY","REDSTONE","SAARLAND","SAMSCLUB","SECURITY","SERVICES","SHOPPING","SHOWTIME","SOFTBANK","SOFTWARE","STCGROUP","SUPPLIES","SYMANTEC","TELECITY","TRAINING","UCONNECT","VANGUARD","VENTURES","VERISIGN","WOODSIDE","YOKOHAMA","ABOGADO","ACADEMY","AGAKHAN","ALIBABA","ANDROID","ATHLETA","AUCTION","AUDIBLE","AUSPOST","AVIANCA","BANAMEX","BAUHAUS","BENTLEY","BESTBUY","BOOKING","BROTHER","BUGATTI","CAPITAL","CARAVAN","CAREERS","CARTIER","CHANNEL","CHINTAI","CITADEL","CLUBMED","COLLEGE","COLOGNE","COMCAST","COMPANY","COMPARE","CONTACT","COOKING","CORSICA","COUNTRY","COUPONS","COURSES","CRICKET","CRUISES","DENTIST","DIGITAL","DOMAINS","EXPOSED","EXPRESS","FARMERS","FASHION","FERRARI","FERRERO","FINANCE","FISHING","FITNESS","FLIGHTS","FLORIST","FLOWERS","FORSALE","FROGANS","FUJITSU","GALLERY","GENTING","GODADDY","GUITARS","HAMBURG","HANGOUT","HITACHI","HOLIDAY","HOSTING","HOTELES","HOTMAIL","HYUNDAI","ISELECT","ISMAILI","JEWELRY","JUNIPER","KITCHEN","KOMATSU","LACAIXA","LANCOME","LANXESS","LASALLE","LATROBE","LECLERC","LIAISON","LIMITED","LINCOLN","MARKETS","METLIFE","MONSTER","NETBANK","NETFLIX","NETWORK","NEUSTAR","OKINAWA","OLDNAVY","ORGANIC","ORIGINS","PANERAI","PHILIPS","PIONEER","POLITIE","REALTOR","RECIPES","RENTALS","REVIEWS","REXROTH","SAMSUNG","SANDVIK","SCHMIDT","SCHWARZ","SCIENCE","SHIKSHA","SHRIRAM","SINGLES","SPIEGEL","STAPLES","STARHUB","STATOIL","STORAGE","SUPPORT","SURGERY","SYSTEMS","TEMASEK","THEATER","THEATRE","TICKETS","TIFFANY","TOSHIBA","TRADING","WALMART","WANGGOU","WATCHES","WEATHER","WEBSITE","WEDDING","WHOSWHO","WINDOWS","WINNERS","XFINITY","YAMAXUN","YOUTUBE","ZUERICH","ABARTH","ABBOTT","ABBVIE","ACTIVE","AGENCY","AIRBUS","AIRTEL","ALIPAY","ALSACE","ALSTOM","ANQUAN","ARAMCO","AUTHOR","BAYERN","BEAUTY","BERLIN","BHARTI","BLANCO","BOSTIK","BROKER","CAMERA","CAREER","CASEIH","CASINO","CENTER","CHANEL","CHROME","CHURCH","CIRCLE","CLAIMS","CLINIC","COFFEE","COMSEC","CONDOS","COUPON","CREDIT","DATING","DATSUN","DEALER","DEGREE","DENTAL","DESIGN","DIRECT","DOCTOR","DUNLOP","DUPONT","DURBAN","EMERCK","ENERGY","ESTATE","EVENTS","EXPERT","FAMILY","FLICKR","FUTBOL","GALLUP","GARDEN","GEORGE","GIVING","GLOBAL","GOOGLE","GRATIS","HEALTH","HERMES","HIPHOP","HOCKEY","HUGHES","IMAMAT","INSURE","INTUIT","JAGUAR","JOBURG","JUEGOS","KAUFEN","KINDER","KINDLE","KOSHER","LANCIA","LATINO","LAWYER","LEFRAK","LIVING","LOCKER","LONDON","LUXURY","MADRID","MAISON","MAKEUP","MARKET","MATTEL","MOBILY","MONASH","MORMON","MOSCOW","MUSEUM","MUTUAL","NAGOYA","NATURA","NISSAN","NISSAY","NORTON","NOWRUZ","OFFICE","OLAYAN","ONLINE","ORACLE","ORANGE","OTSUKA","PFIZER","PHOTOS","PHYSIO","PIAGET","PICTET","QUEBEC","RACING","REALTY","REISEN","REPAIR","REPORT","REVIEW","ROCHER","ROGERS","RYUKYU","SAFETY","SAKURA","SANOFI","SCHOOL","SCHULE","SECURE","SELECT","SHOUJI","SOCCER","SOCIAL","STREAM","STUDIO","SUPPLY","SUZUKI","SWATCH","SYDNEY","TAIPEI","TAOBAO","TARGET","TATTOO","TENNIS","TIENDA","TJMAXX","TKMAXX","TOYOTA","TRAVEL","UNICOM","VIAJES","VIKING","VILLAS","VIRGIN","VISION","VOTING","VOYAGE","VUELOS","WALTER","WARMAN","WEBCAM","XIHUAN","XPERIA","YACHTS","YANDEX","ZAPPOS","ACTOR","ADULT","AETNA","AMFAM","AMICA","APPLE","ARCHI","AUDIO","AUTOS","AZURE","BAIDU","BEATS","BIBLE","BINGO","BLACK","BOATS","BOOTS","BOSCH","BUILD","CANON","CARDS","CHASE","CHEAP","CHLOE","CISCO","CITIC","CLICK","CLOUD","COACH","CODES","CROWN","CYMRU","DABUR","DANCE","DEALS","DELTA","DODGE","DRIVE","DUBAI","EARTH","EDEKA","EMAIL","EPOST","EPSON","FAITH","FEDEX","FINAL","FOREX","FORUM","GALLO","GAMES","GIFTS","GIVES","GLADE","GLASS","GLOBO","GMAIL","GREEN","GRIPE","GROUP","GUCCI","GUIDE","HOMES","HONDA","HORSE","HOUSE","HYATT","IINET","IKANO","INTEL","IRISH","IVECO","JETZT","KOELN","KYOTO","LAMER","LEASE","LEGAL","LEXUS","LILLY","LINDE","LIPSY","LIXIL","LOANS","LOCUS","LOTTE","LOTTO","LUPIN","MACYS","MANGO","MEDIA","MIAMI","MONEY","MOPAR","MOVIE","NADEX","NEXUS","NIKON","NINJA","NOKIA","NOWTV","OMEGA","OSAKA","PARIS","PARTS","PARTY","PHOTO","PIZZA","PLACE","POKER","PRAXI","PRESS","PRIME","PROMO","QUEST","RADIO","REHAB","REISE","RICOH","ROCKS","RODEO","SALON","SENER","SEVEN","SHARP","SHELL","SHOES","SKYPE","SLING","SMART","SMILE","SOLAR","SPACE","STADA","STORE","STUDY","STYLE","SUCKS","SWISS","TATAR","TIRES","TIROL","TMALL","TODAY","TOKYO","TOOLS","TORAY","TOTAL","TOURS","TRADE","TRUST","TUNES","TUSHU","UBANK","VEGAS","VIDEO","VISTA","VODKA","VOLVO","WALES","WATCH","WEBER","WEIBO","WORKS","WORLD","XEROX","YAHOO","ZIPPO","local","onion","AARP","ABLE","ADAC","AERO","AIGO","AKDN","ALLY","AMEX","ARMY","ARPA","ARTE","ASDA","ASIA","AUDI","AUTO","BABY","BAND","BANK","BBVA","BEER","BEST","BIKE","BING","BLOG","BLUE","BOFA","BOND","BOOK","BUZZ","CAFE","CALL","CAMP","CARE","CARS","CASA","CASE","CASH","CBRE","CERN","CHAT","CITI","CITY","CLUB","COOL","COOP","CYOU","DATE","DCLK","DEAL","DELL","DESI","DIET","DISH","DOCS","DOHA","DUCK","DUNS","DVAG","ERNI","FAGE","FAIL","FANS","FARM","FAST","FIAT","FIDO","FILM","FIRE","FISH","FLIR","FORD","FUND","GAME","GBIZ","GENT","GGEE","GIFT","GMBH","GOLD","GOLF","GOOG","GUGE","GURU","HAUS","HDFC","HELP","HERE","HGTV","HOST","HSBC","ICBC","IEEE","IMDB","IMMO","INFO","ITAU","JAVA","JEEP","JOBS","JPRS","KDDI","KIWI","KPMG","KRED","LAND","LEGO","LGBT","LIDL","LIFE","LIKE","LIMO","LINK","LIVE","LOAN","LOFT","LOVE","LTDA","LUXE","MAIF","MEET","MEME","MENU","MINI","MINT","MOBI","MODA","MTPC","NAME","NAVY","NEWS","NEXT","NICO","NIKE","OLLO","OPEN","PAGE","PARS","PCCW","PICS","PING","PINK","PLAY","PLUS","POHL","PORN","POST","PROD","PROF","QPON","RAID","READ","REIT","RENT","REST","RICH","ROOM","RSVP","RUHR","SAFE","SALE","SAPO","SARL","SAVE","SAXO","SCOR","SCOT","SEAT","SEEK","SEXY","SHAW","SHIA","SHOP","SHOW","SILK","SINA","SITE","SKIN","SNCF","SOHU","SONG","SONY","SPOT","STAR","SURF","TALK","TAXI","TEAM","TECH","TEVA","TIAA","TIPS","TOWN","TOYS","TUBE","VANA","VISA","VIVA","VIVO","VOTE","VOTO","WANG","WEIR","WIEN","WIKI","WINE","WORK","XBOX","YOGA","ZARA","ZERO","ZONE","exit","zkey","AAA","ABB","ABC","ACO","ADS","AEG","AFL","AIG","ANZ","APP","ART","AWS","AXA","BAR","BBC","BBT","BCG","BCN","BET","BID","BIO","BIZ","BMS","BMW","BNL","BOM","BOO","BOT","BUY","BZH","CAB","CAL","CAM","CAR","CAT","CBA","CBN","CBS","CEB","CEO","CFA","CFD","COM","CRS","CSC","DAD","DAY","DDS","DEV","DHL","DIY","DNP","DOG","DOT","DTV","DVR","EAT","ECO","EDU","ESQ","EUS","FAN","FIT","FLY","FOO","FOX","FRL","FTR","FYI","GAL","GAP","GDN","GEA","GLE","GMO","GMX","GOO","GOP","GOT","GOV","HBO","HIV","HKT","HOT","HOW","HTC","IBM","ICE","ICU","IFM","ING","INK","INT","IST","ITV","IWC","JCB","JCP","JLC","JLL","JMP","JNJ","JOT","JOY","KFH","KIA","KIM","KPN","KRD","LAT","LAW","LDS","LOL","LPL","LTD","MAN","MBA","MCD","MED","MEN","MEO","MIL","MIT","MLB","MLS","MMA","MOE","MOI","MOM","MOV","MSD","MTN","MTR","NAB","NBA","NEC","NET","NEW","NFL","NGO","NHK","NOW","NRA","NRW","NTT","NYC","OBI","OFF","ONE","ONG","ONL","OOO","ORG","OTT","OVH","PAY","PET","PID","PIN","PNC","PRO","PRU","PUB","PWC","QVC","RED","REN","RIO","RIP","RUN","RWE","SAP","SAS","SBI","SBS","SCA","SCB","SES","SEW","SEX","SFR","SKI","SKY","SOY","SRL","SRT","STC","TAB","TAX","TCI","TDK","TEL","THD","TJX","TOP","TRV","TUI","TVS","UBS","UNO","UOL","UPS","VET","VIG","VIN","VIP","WED","WIN","WME","WOW","WTC","WTF","XIN","XXX","XYZ","YOU","YUN","ZIP","bit","gnu","i2p","AC","AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BM","BN","BO","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","ER","ES","ET","EU","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","ST","SU","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UK","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW"]},280:function(e,t,i){var s,n;/*! nanoScrollerJS - v0.8.7 - 2015
	* http://jamesflorentino.github.com/nanoScrollerJS/
	* Copyright (c) 2015 James Florentino; Licensed MIT */
!function(u){return s=[i(3)],n=function(e){return u(e,window,document)}.apply(t,s),!(void 0!==n&&(e.exports=n))}(function(e,t,i){"use strict";var s,n,u,r,o,a,l,c,h,f,A,d,p,g,E,m,C,S,O,v,T,I,F,R,N,y,B,b,D,L,M;F={paneClass:"nano-pane",sliderClass:"nano-slider",contentClass:"nano-content",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null},S="scrollbar",C="scroll",h="mousedown",f="mouseenter",A="mousemove",p="mousewheel",d="mouseup",m="resize",o="drag",a="enter",v="up",E="panedown",u="DOMMouseScroll",r="down",T="wheel",l="keydown",c="keyup",O="touchmove",s="Microsoft Internet Explorer"===t.navigator.appName&&/msie 7./i.test(t.navigator.appVersion)&&t.ActiveXObject,n=null,B=t.requestAnimationFrame,I=t.cancelAnimationFrame,D=i.createElement("div").style,M=function(){var e,t,i,s,n,u;for(s=["t","webkitT","MozT","msT","OT"],e=n=0,u=s.length;n<u;e=++n)if(i=s[e],t=s[e]+"ransform",t in D)return s[e].substr(0,s[e].length-1);return!1}(),L=function(e){return M!==!1&&(""===M?e:M+e.charAt(0).toUpperCase()+e.substr(1))},b=L("transform"),N=b!==!1,R=function(){var e,t,s;return e=i.createElement("div"),t=e.style,t.position="absolute",t.width="100px",t.height="100px",t.overflow=C,t.top="-9999px",i.body.appendChild(e),s=e.offsetWidth-e.clientWidth,i.body.removeChild(e),s},y=function(){var e,i,s;return i=t.navigator.userAgent,!!(e=/(?=.+Mac OS X)(?=.+Firefox)/.test(i))&&(s=/Firefox\/\d{2}\./.exec(i),s&&(s=s[0].replace(/\D+/g,"")),e&&+s>23)},g=function(){function l(s,u){this.el=s,this.options=u,n||(n=R()),this.$el=e(this.el),this.doc=e(this.options.documentContext||i),this.win=e(this.options.windowContext||t),this.body=this.doc.find("body"),this.$content=this.$el.children("."+this.options.contentClass),this.$content.attr("tabindex",this.options.tabIndex||0),this.content=this.$content[0],this.previousPosition=0,this.options.iOSNativeScrolling&&null!=this.el.style.WebkitOverflowScrolling?this.nativeScrolling():this.generate(),this.createEvents(),this.addEvents(),this.reset()}return l.prototype.preventScrolling=function(e,t){if(this.isActive)if(e.type===u)(t===r&&e.originalEvent.detail>0||t===v&&e.originalEvent.detail<0)&&e.preventDefault();else if(e.type===p){if(!e.originalEvent||!e.originalEvent.wheelDelta)return;(t===r&&e.originalEvent.wheelDelta<0||t===v&&e.originalEvent.wheelDelta>0)&&e.preventDefault()}},l.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"}),this.iOSNativeScrolling=!0,this.isActive=!0},l.prototype.updateScrollValues=function(){var e,t;e=this.content,this.maxScrollTop=e.scrollHeight-e.clientHeight,this.prevScrollTop=this.contentScrollTop||0,this.contentScrollTop=e.scrollTop,t=this.contentScrollTop>this.previousPosition?"down":this.contentScrollTop<this.previousPosition?"up":"same",this.previousPosition=this.contentScrollTop,"same"!==t&&this.$el.trigger("update",{position:this.contentScrollTop,maximum:this.maxScrollTop,direction:t}),this.iOSNativeScrolling||(this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=0===this.maxScrollTop?0:this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},l.prototype.setOnScrollStyles=function(){var e;N?(e={},e[b]="translate(0, "+this.sliderTop+"px)"):e={top:this.sliderTop},B?(I&&this.scrollRAF&&I(this.scrollRAF),this.scrollRAF=B(function(t){return function(){return t.scrollRAF=null,t.slider.css(e)}}(this))):this.slider.css(e)},l.prototype.createEvents=function(){this.events={down:function(e){return function(t){return e.isBeingDragged=!0,e.offsetY=t.pageY-e.slider.offset().top,e.slider.is(t.target)||(e.offsetY=0),e.pane.addClass("active"),e.doc.bind(A,e.events[o]).bind(d,e.events[v]),e.body.bind(f,e.events[a]),!1}}(this),drag:function(e){return function(t){return e.sliderY=t.pageY-e.$el.offset().top-e.paneTop-(e.offsetY||.5*e.sliderHeight),e.scroll(),e.contentScrollTop>=e.maxScrollTop&&e.prevScrollTop!==e.maxScrollTop?e.$el.trigger("scrollend"):0===e.contentScrollTop&&0!==e.prevScrollTop&&e.$el.trigger("scrolltop"),!1}}(this),up:function(e){return function(t){return e.isBeingDragged=!1,e.pane.removeClass("active"),e.doc.unbind(A,e.events[o]).unbind(d,e.events[v]),e.body.unbind(f,e.events[a]),!1}}(this),resize:function(e){return function(t){e.reset()}}(this),panedown:function(e){return function(t){return e.sliderY=(t.offsetY||t.originalEvent.layerY)-.5*e.sliderHeight,e.scroll(),e.events.down(t),!1}}(this),scroll:function(e){return function(t){e.updateScrollValues(),e.isBeingDragged||(e.iOSNativeScrolling||(e.sliderY=e.sliderTop,e.setOnScrollStyles()),null!=t&&(e.contentScrollTop>=e.maxScrollTop?(e.options.preventPageScrolling&&e.preventScrolling(t,r),e.prevScrollTop!==e.maxScrollTop&&e.$el.trigger("scrollend")):0===e.contentScrollTop&&(e.options.preventPageScrolling&&e.preventScrolling(t,v),0!==e.prevScrollTop&&e.$el.trigger("scrolltop"))))}}(this),wheel:function(e){return function(t){var i;if(null!=t)return i=t.delta||t.wheelDelta||t.originalEvent&&t.originalEvent.wheelDelta||-t.detail||t.originalEvent&&-t.originalEvent.detail,i&&(e.sliderY+=-i/3),e.scroll(),!1}}(this),enter:function(e){return function(t){var i;if(e.isBeingDragged)return 1!==(t.buttons||t.which)?(i=e.events)[v].apply(i,arguments):void 0}}(this)}},l.prototype.addEvents=function(){var e;this.removeEvents(),e=this.events,this.options.disableResize||this.win.bind(m,e[m]),this.iOSNativeScrolling||(this.slider.bind(h,e[r]),this.pane.bind(h,e[E]).bind(""+p+" "+u,e[T])),this.$content.bind(""+C+" "+p+" "+u+" "+O,e[C])},l.prototype.removeEvents=function(){var e;e=this.events,this.win.unbind(m,e[m]),this.iOSNativeScrolling||(this.slider.unbind(),this.pane.unbind()),this.$content.unbind(""+C+" "+p+" "+u+" "+O,e[C])},l.prototype.generate=function(){var e,i,s,u,r,o,a;return u=this.options,o=u.paneClass,a=u.sliderClass,e=u.contentClass,(r=this.$el.children("."+o)).length||r.children("."+a).length||this.$el.append('<div class="'+o+'"><div class="'+a+'" /></div>'),this.pane=this.$el.children("."+o),this.slider=this.pane.find("."+a),0===n&&y()?(s=t.getComputedStyle(this.content,null).getPropertyValue("padding-right").replace(/[^0-9.]+/g,""),i={right:-14,paddingRight:+s+14}):n&&(i={right:-n},this.$el.addClass("has-scrollbar")),null!=i&&this.$content.css(i),this},l.prototype.restore=function(){this.stopped=!1,this.iOSNativeScrolling||this.pane.show(),this.addEvents()},l.prototype.reset=function(){var e,t,i,u,r,o,a,l,c,h,f,A;return this.iOSNativeScrolling?void(this.contentHeight=this.content.scrollHeight):(this.$el.find("."+this.options.paneClass).length||this.generate().stop(),this.stopped&&this.restore(),e=this.content,u=e.style,r=u.overflowY,s&&this.$content.css({height:this.$content.height()}),t=e.scrollHeight+n,h=parseInt(this.$el.css("max-height"),10),h>0&&(this.$el.height(""),this.$el.height(e.scrollHeight>h?h:e.scrollHeight)),a=this.pane.outerHeight(!1),c=parseInt(this.pane.css("top"),10),o=parseInt(this.pane.css("bottom"),10),l=a+c+o,A=Math.round(l/t*a),A<this.options.sliderMinHeight?A=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&A>this.options.sliderMaxHeight&&(A=this.options.sliderMaxHeight),r===C&&u.overflowX!==C&&(A+=n),this.maxSliderTop=l-A,this.contentHeight=t,this.paneHeight=a,this.paneOuterHeight=l,this.sliderHeight=A,this.paneTop=c,this.slider.height(A),this.events.scroll(),this.pane.show(),this.isActive=!0,e.scrollHeight===e.clientHeight||this.pane.outerHeight(!0)>=e.scrollHeight&&r!==C?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===e.scrollHeight&&r===C?this.slider.hide():this.slider.show(),this.pane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),i=this.$content.css("position"),"static"!==i&&"relative"!==i||(f=parseInt(this.$content.css("right"),10),f&&this.$content.css({right:"",marginRight:f})),this)},l.prototype.scroll=function(){if(this.isActive)return this.sliderY=Math.max(0,this.sliderY),this.sliderY=Math.min(this.maxSliderTop,this.sliderY),this.$content.scrollTop(this.maxScrollTop*this.sliderY/this.maxSliderTop),this.iOSNativeScrolling||(this.updateScrollValues(),this.setOnScrollStyles()),this},l.prototype.scrollBottom=function(e){if(this.isActive)return this.$content.scrollTop(this.contentHeight-this.$content.height()-e).trigger(p),this.stop().restore(),this},l.prototype.scrollTop=function(e){if(this.isActive)return this.$content.scrollTop(+e).trigger(p),this.stop().restore(),this},l.prototype.scrollTo=function(e){if(this.isActive)return this.scrollTop(this.$el.find(e).get(0).offsetTop),this},l.prototype.stop=function(){return I&&this.scrollRAF&&(I(this.scrollRAF),this.scrollRAF=null),this.stopped=!0,this.removeEvents(),this.iOSNativeScrolling||this.pane.hide(),this},l.prototype.destroy=function(){return this.stopped||this.stop(),!this.iOSNativeScrolling&&this.pane.length&&this.pane.remove(),s&&this.$content.height(""),this.$content.removeAttr("tabindex"),this.$el.hasClass("has-scrollbar")&&(this.$el.removeClass("has-scrollbar"),this.$content.css({right:""})),this},l.prototype.flash=function(){if(!this.iOSNativeScrolling&&this.isActive)return this.reset(),this.pane.addClass("flashed"),setTimeout(function(e){return function(){e.pane.removeClass("flashed")}}(this),this.options.flashDelay),this},l}(),e.fn.nanoScroller=function(t){return this.each(function(){var i,s;if((s=this.nanoscroller)||(i=e.extend({},F,t),this.nanoscroller=s=new g(this,i)),t&&"object"==typeof t){if(e.extend(s.options,t),null!=t.scrollBottom)return s.scrollBottom(t.scrollBottom);if(null!=t.scrollTop)return s.scrollTop(t.scrollTop);if(t.scrollTo)return s.scrollTo(t.scrollTo);if("bottom"===t.scroll)return s.scrollBottom(0);if("top"===t.scroll)return s.scrollTop(0);if(t.scroll&&t.scroll instanceof e)return s.scrollTo(t.scroll);if(t.stop)return s.stop();if(t.destroy)return s.destroy();if(t.flash)return s.flash()}return s.reset()})},e.fn.nanoScroller.Constructor=g})}});